/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dump",function(e,t){var n=e.Lang,r="{...}",i="f(){...}",s=", ",o=" => ",u=function(e,t){var u,a,f=[],l=n.type(e);if(!n.isObject(e))return e+"";if(l=="date")return e;if(e.nodeType&&e.tagName)return e.tagName+"#"+e.id;if(e.document&&e.navigator)return"window";if(e.location&&e.body)return"document";if(l=="function")return i;t=n.isNumber(t)?t:3;if(l=="array"){f.push("[");for(u=0,a=e.length;u<a;u+=1)n.isObject(e[u])?f.push(t>0?n.dump(e[u],t-1):r):f.push(e[u]),f.push(s);f.length>1&&f.pop(),f.push("]")}else if(l=="regexp")f.push(e.toString());else{f.push("{");for(u in e)if(e.hasOwnProperty(u))try{f.push(u+o),n.isObject(e[u])?f.push(t>0?n.dump(e[u],t-1):r):f.push(e[u]),f.push(s)}catch(c){f.push("Error: "+c.message)}f.length>1&&f.pop(),f.push("}")}return f.join("")};e.dump=u,n.dump=u},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-base",function(e,t){function o(t){var n=this;n._uid="io:"+s++,n._init(t),e.io._map[n._uid]=n}var n=["start","complete","end","success","failure","progress"],r=["status","statusText","responseText","responseXML"],i=e.config.win,s=0;o.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(t){var r=this,i,s;r.cfg=t||{},e.augment(r,e.EventTarget);for(i=0,s=n.length;i<s;++i)r.publish("io:"+n[i],e.merge({broadcast:1},t)),r.publish("io-trn:"+n[i],t)},_create:function(t,n){var r=this,s={id:e.Lang.isNumber(n)?n:r._id++,uid:r._uid},o=t.xdr?t.xdr.use:null,u=t.form&&t.form.upload?"iframe":null,a;return o==="native"&&(o=e.UA.ie&&!l?"xdr":null,r.setHeader("X-Requested-With")),a=o||u,s=a?e.merge(e.IO.customTransport(a),s):e.merge(e.IO.defaultTransport(),s),s.notify&&(t.notify=function(e,t,n){r.notify(e,t,n)}),a||i&&i.FormData&&t.data instanceof i.FormData&&(s.c.upload.onprogress=function(e){r.progress(s,e,t)},s.c.onload=function(e){r.load(s,e,t)},s.c.onerror=function(e){r.error(s,e,t)},s.upload=!0),s},_destroy:function(t){i&&!t.notify&&!t.xdr&&(u&&!t.upload?t.c.onreadystatechange=null:t.upload?(t.c.upload.onprogress=null,t.c.onload=null,t.c.onerror=null):e.UA.ie&&!t.e&&t.c.abort()),t=t.c=null},_evt:function(t,r,i){var s=this,o,u=i.arguments,a=s.cfg.emitFacade,f="io:"+t,l="io-trn:"+t;this.detach(l),r.e&&(r.c={status:0,statusText:r.e}),o=[a?{id:r.id,data:r.c,cfg:i,arguments:u}:r.id],a||(t===n[0]||t===n[2]?u&&o.push(u):(r.evt?o.push(r.evt):o.push(r.c),u&&o.push(u))),o.unshift(f),s.fire.apply(s,o),i.on&&(o[0]=l,s.once(l,i.on[t],i.context||e),s.fire.apply(s,o))},start:function(e,t){this._evt(n[0],e,t)},complete:function(e,t){this._evt(n[1],e,t)},end:function(e,t){this._evt(n[2],e,t),this._destroy(e)},success:function(e,t){this._evt(n[3],e,t),this.end(e,t)},failure:function(e,t){this._evt(n[4],e,t),this.end(e,t)},progress:function(e,t,r){e.evt=t,this._evt(n[5],e,r)},load:function(e,t,r){e.evt=t.target,this._evt(n[1],e,r)},error:function(e,t,r){e.evt=t,this._evt(n[4],e,r)},_retry:function(e,t,n){return this._destroy(e),n.xdr.use="flash",this.send(t,n,e.id)},_concat:function(e,t){return e+=(e.indexOf("?")===-1?"?":"&")+t,e},setHeader:function(e,t){t?this._headers[e]=t:delete this._headers[e]},_setHeaders:function(t,n){n=e.merge(this._headers,n),e.Object.each(n,function(e,r){e!=="disable"&&t.setRequestHeader(r,n[r])})},_startTimeout:function(e,t){var n=this;n._timeout[e.id]=setTimeout(function(){n._abort(e,"timeout")},t)},_clearTimeout:function(e){clearTimeout(this._timeout[e]),delete this._timeout[e]},_result:function(e,t){var n;try{n=e.c.status}catch(r){n=0}n>=200&&n<300||n===304||n===1223?this.success(e,t):this.failure(e,t)},_rS:function(e,t){var n=this;e.c.readyState===4&&(t.timeout&&n._clearTimeout(e.id),setTimeout(function(){n.complete(e,t),n._result(e,t)},0))},_abort:function(e,t){e&&e.c&&(e.e=t,e.c.abort())},send:function(t,n,i){var s,o,u,a,f,c,h=this,p=t,d={};n=n?e.Object(n):{},s=h._create(n,i),o=n.method?n.method.toUpperCase():"GET",f=n.sync,c=n.data,e.Lang.isObject(c)&&!c.nodeType&&!s.upload&&e.QueryString&&e.QueryString.stringify&&(n.data=c=e.QueryString.stringify(c));if(n.form){if(n.form.upload)return h.upload(s,t,n);c=h._serialize(n.form,c)}c||(c="");if(c)switch(o){case"GET":case"HEAD":case"DELETE":p=h._concat(p,c),c="";break;case"POST":case"PUT":n.headers=e.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},n.headers)}if(s.xdr)return h.xdr(p,s,n);if(s.notify)return s.c.send(s,t,n);!f&&!s.upload&&(s.c.onreadystatechange=function(){h._rS(s,n)});try{s.c.open(o,p,!f,n.username||null,n.password||null),h._setHeaders(s.c,n.headers||{}),h.start(s,n),n.xdr&&n.xdr.credentials&&l&&(s.c.withCredentials=!0),s.c.send(c);if(f){for(u=0,a=r.length;u<a;++u)d[r[u]]=s.c[r[u]];return d.getAllResponseHeaders=function(){return s.c.getAllResponseHeaders()},d.getResponseHeader=function(e){return s.c.getResponseHeader(e)},h.complete(s,n),h._result(s,n),d}}catch(v){if(s.xdr)return h._retry(s,t,n);h.complete(s,n),h._result(s,n)}return n.timeout&&h._startTimeout(s,n.timeout),{id:s.id,abort:function(){return s.c?h._abort(s,"abort"):!1},isInProgress:function(){return s.c?s.c.readyState%4:!1},io:h}}},e.io=function(t,n){var r=e.io._map["io:0"]||new o;return r.send.apply(r,[t,n])},e.io.header=function(t,n){var r=e.io._map["io:0"]||new o;r.setHeader(t,n)},e.IO=o,e.io._map={};var u=i&&i.XMLHttpRequest,a=i&&i.XDomainRequest,f=i&&i.ActiveXObject,l=u&&"withCredentials"in new XMLHttpRequest;e.mix(e.IO,{_default:"xhr",defaultTransport:function(t){if(!t){var n={c:e.IO.transports[e.IO._default](),notify:e.IO._default==="xhr"?!1:!0};return n}e.IO._default=t},transports:{xhr:function(){return u?new XMLHttpRequest:f?new ActiveXObject("Microsoft.XMLHTTP"):null},xdr:function(){return a?new XDomainRequest:null},iframe:function(){return{}},flash:null,nodejs:null},customTransport:function(t){var n={c:e.IO.transports[t]()};return n[t==="xdr"||t==="flash"?"xdr":"notify"]=!0,n}}),e.mix(e.IO.prototype,{notify:function(e,t,n){var r=this;switch(e){case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e},e="failure";default:r[e].apply(r,[t,n])}}})},"3.11.0",{requires:["event-custom-base","querystring-stringify-simple"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-parse",function(e,t){var n=e.Lang;e.mix(e.namespace("XML"),{parse:function(e){var t=null;if(n.isString(e))try{n.isUndefined(ActiveXObject)||(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e))}catch(r){try{n.isUndefined(DOMParser)||(t=(new DOMParser).parseFromString(e,"text/xml")),n.isUndefined(Windows.Data.Xml.Dom)||(t=new Windows.Data.Xml.Dom.XmlDocument,t.loadXml(e))}catch(i){}}return n.isNull(t)||n.isNull(t.documentElement)||t.documentElement.nodeName==="parsererror",t}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.11.0");
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-xdr",function(e,t){function a(e,t,n){var r='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0">'+'<param name="movie" value="'+e+'">'+'<param name="FlashVars" value="yid='+t+"&uid="+n+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",i=s.createElement("div");s.body.appendChild(i),i.innerHTML=r}function f(t,n,r){return n==="flash"&&(t.c.responseText=decodeURI(t.c.responseText)),r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(t,n,i){var s=this;return i.xdr.use==="flash"?(r[n.id]=i,o.setTimeout(function(){try{n.c.send(t,{id:n.id,uid:n.uid,method:i.method,data:i.data,headers:i.headers})}catch(e){s.xdrResponse("transport error",n,i),delete r[n.id]}},e.io.xdr.delay)):u?(s._ieEvt(n,i),n.c.open(i.method||"GET",t),setTimeout(function(){n.c.send(i.data)},0)):n.c.send(t,n,i),{id:n.id,abort:function(){return n.c?l(n,i):!1},isInProgress:function(){return n.c?c(n.id):!1},io:s}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(t){t.id==="flash"&&(a(e.UA.ie?t.src+"?d="+(new Date).valueOf().toString():t.src,e.id,t.uid),e.IO.transports.flash=function(){return s.getElementById("io_swf")})}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"3.11.0",{requires:["io-base","datatype-xml-parse"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("json-parse",function(e,t){var n=e.config.global.JSON;e.namespace("JSON").parse=function(e,t,r){return n.parse(typeof e=="string"?e:e+"",t,r)}},"3.11.0",{requires:["yui-base"]});
YUI.add("gallery-flickr-api",function(Y){YUI.namespace("flickrAPITransactions");function onFailure(){return!0}function onProgress(){return!0}function onTimeout(){return!0}function serializeObject(o){var string_out="";for(var i in o)o.hasOwnProperty(i)&&(string_out+=i+"="+o[i]+"&");return string_out.substr(0,string_out.length-1)}function formatCallbackArgs(fCallback,oArgs,isSuccess,isSetRequest){var data,args,f=com;if(isSetRequest){try{data=Y.JSON.parse(oArgs[1].responseText)}catch(ex){Y.log("invalid JSON","error","flickrAPI")}args=[{params:oArgs[2].params,data:data}].concat(oArgs)}else data=f.response_map[f.id_map[oArgs[0].tId]]?f.response_map[f.id_map[oArgs[0].tId]][0]:null,args=[{params:oArgs[0].data,data:data}].concat(oArgs);if(data&&isSuccess)return"ok"===data.stat?fCallback.apply(Y,args):(Y.log(data.message,"error","flickrAPI"),this.failure.apply(Y,args));if(0===isSuccess)this.failure.apply(Y,args);else if(fCallback)return fCallback.apply(Y,args)}var default_uri=Y.config.flickr.flags.enable_client_fullpath_api?Y.config.flickrAPI.flickr_api_uri:"/services/rest/",constant_params={format:"json",clientType:"yui-3-flickrapi-module"},TRANS=YUI.flickrAPITransactions,com={last_response_id:0,id_map:{},response_map:{},setResponse:function(id,data){var f=com;return f.response_map[id]=data,f.response_map[id]},setId:function(yui_id,flickr_id){var f=com,new_id=flickr_id;return f.id_map[yui_id]=new_id,f.last_response_id=new_id}};Y.flickrAPI={callMethod:function(sMethod,oRequest,oCallback,oYUIGetConf,return_only){"number"!=typeof(oYUIGetConf=oYUIGetConf||{}).timeout&&(oYUIGetConf.timeout=6e4),oYUIPOSTConf=oYUIGetConf,oRequest=oRequest||{};var full_url,uri=default_uri;(oRequest=Y.merge(Y.config.flickrAPI,oRequest)).flickr_api_uri&&(uri=oRequest.flickr_api_uri,delete oRequest.flickr_api_uri),Y.Object.each(oRequest,function(val,key,obj){obj[key]=encodeURIComponent(val)}),oRequest.method=sMethod,Y.Lang.isFunction(oCallback)&&(oCallback={success:oCallback,failure:onFailure,progress:onProgress,timeout:onTimeout}),Y.Lang.isObject(oCallback)&&(oYUIGetConf=Y.merge(oYUIGetConf,{onSuccess:function(){return Y.fire("flickrAPI:success"),formatCallbackArgs.apply(oCallback,[oCallback.success,arguments,1])},onFailure:function(){if(null!==com.response_map[com.id_map[arguments[0].tId]])return Y.log("Your request (ID:"+arguments[0].tId+") has failed.","error","flickrAPI"),Y.fire("flickrAPI:failure"),formatCallbackArgs.apply(oCallback,[oCallback.failure,arguments,0])},onProgress:function(){return Y.fire("flickrAPI:progress"),formatCallbackArgs.apply(oCallback,[Y.Lang.isFunction(oCallback.progress)?oCallback.progress:function(){},arguments,null])},onTimeout:function(){return Y.log("Your request (ID:"+arguments[0].tId+") has timed out","error","flickrAPI"),TRANS["flapicb"+com.id_map[arguments[0].tId]]=function(){Y.log("A response callback was fired but suppressed because of a timeout enforced by configuration.","warn","flickrAPI")},com.response_map[com.id_map[arguments[0].tId]]=null,Y.Get.abort(arguments[0].tId),Y.fire("flickrAPI:timeout"),formatCallbackArgs.apply(oCallback,[oCallback.timeout,arguments,0])}}),oYUIPOSTConf=Y.merge(oYUIPOSTConf,{success:function(){return Y.fire("flickrAPI:success"),formatCallbackArgs.apply(oCallback,[oCallback.success,arguments,1,1])},failure:function(){return Y.log("Your request (ID:"+arguments[0].tId+") has failed.","error","flickrAPI"),Y.fire("flickrAPI:failure"),formatCallbackArgs.apply(oCallback,[oCallback.failure,arguments,0,1])},timeout:function(){return Y.log("Your request (ID:"+arguments[0].tId+") has timed out","error","flickrAPI"),Y.fire("flickrAPI:timeout"),formatCallbackArgs.apply(oCallback,[oCallback.timeout,arguments,0,1])}}));var url_param=(oYUIGetConf.scope=Y).merge(oYUIGetConf.data,constant_params,oRequest);return oYUIGetConf.data=url_param,full_url=uri+"?"+serializeObject(url_param),return_only?{uri:uri,params:url_param,full_url:full_url}:/(?:add|create|delete|edit|mute|post|record|remove|set|submit|unmute|move|sort|hide|block|unblock|insert|promote|login|cancel)[a-zA-Z]*$/.test(url_param.method)||full_url.length>Y.config.maxURLLength?(url_param.nojsoncallback=1,function(uri,params,yui_config){Y.use("io",function(Y){Y.io(uri,{method:"POST",data:serializeObject(params),timeout:6e4,on:yui_config,xdr:{credentials:!0},arguments:{params:params}})})}(uri,url_param,oYUIPOSTConf)):function(uri,params,yui_config){var flickr_response_id=com.last_response_id+1,yui_request_id=Y.Get.script(uri+"?"+serializeObject(params)+"&jsoncallback=YUI.flickrAPITransactions.flapicb"+flickr_response_id+"&cachebust="+(new Date).getTime(),yui_config);return com.setId(yui_request_id.tId,flickr_response_id),TRANS["flapicb"+flickr_response_id]=function(server_arg){com.setResponse(flickr_response_id,arguments)&&Y.later(1e3,Y,function(){delete TRANS["flapicb"+flickr_response_id]})},yui_request_id}(uri,url_param,oYUIGetConf)}}},"gallery-a-002",{requires:["event"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-core",function(e,t){function b(e,t,n){this._yuievt=null,this._initAttrHost(e,t,n)}e.State=function(){this.data={}},e.State.prototype={add:function(e,t,n){var r=this.data[e];r||(r=this.data[e]={}),r[t]=n},addAll:function(e,t){var n=this.data[e],r;n||(n=this.data[e]={});for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r])},remove:function(e,t){var n=this.data[e];n&&delete n[t]},removeAll:function(t,n){var r;n?e.each(n,function(e,n){this.remove(t,typeof n=="string"?n:e)},this):(r=this.data,t in r&&delete r[t])},get:function(e,t){var n=this.data[e];if(n)return n[t]},getAll:function(e,t){var n=this.data[e],r,i;if(t)i=n;else if(n){i={};for(r in n)n.hasOwnProperty(r)&&(i[r]=n[r])}return i}};var n=e.Object,r=e.Lang,i=".",s="getter",o="setter",u="readOnly",a="writeOnce",f="initOnly",l="validator",c="value",h="valueFn",p="lazyAdd",d="added",v="_bypassProxy",m="initValue",g="lazy",y;b.INVALID_VALUE={},y=b.INVALID_VALUE,b._ATTR_CFG=[o,s,l,c,h,a,u,p,v],b.protectAttrs=function(t){if(t){t=e.merge(t);for(var n in t)t.hasOwnProperty(n)&&(t[n]=e.merge(t[n]))}return t},b.prototype={_initAttrHost:function(t,n,r){this._state=new e.State,this._initAttrs(t,n,r)},addAttr:function(e,t,n){var r=this,i=r._state,s=i.data,o,u,a;t=t||{},p in t&&(n=t[p]),u=i.get(e,d);if(n&&!u)i.data[e]={lazy:t,added:!0};else if(!u||t.isLazyAdd)a=c in t,a&&(o=t.value,t.value=undefined),t.added=!0,t.initializing=!0,s[e]=t,a&&r.set(e,o),t.initializing=!1;return r},attrAdded:function(e){return!!this._state.get(e,d)},get:function(e){return this._getAttr(e)},_isLazyAttr:function(e){return this._state.get(e,g)},_addLazyAttr:function(e,t){var n=this._state;t=t||n.get(e,g),t&&(n.data[e].lazy=undefined,t.isLazyAdd=!0,this.addAttr(e,t))},set:function(e,t,n){return this._setAttr(e,t,n)},_set:function(e,t,n){return this._setAttr(e,t,n,!0)},_setAttr:function(t,r,s,o){var u=!0,a=this._state,l=this._stateProxy,c=this._tCfgs,h,p,d,v,m,g,y;return t.indexOf(i)!==-1&&(d=t,v=t.split(i),t=v.shift()),c&&c[t]&&this._addOutOfOrder(t,c[t]),h=a.data[t]||{},h.lazy&&(h=h.lazy,this._addLazyAttr(t,h)),p=h.value===undefined,l&&t in l&&!h._bypassProxy&&(p=!1),g=h.writeOnce,y=h.initializing,!p&&!o&&(g&&(u=!1),h.readOnly&&(u=!1)),!y&&!o&&g===f&&(u=!1),u&&(p||(m=this.get(t)),v&&(r=n.setValue(e.clone(m),v,r),r===undefined&&(u=!1)),u&&(!this._fireAttrChange||y?this._setAttrVal(t,d,m,r,s,h):this._fireAttrChange(t,d,m,r,s,h))),this},_addOutOfOrder:function(e,t){var n={};n[e]=t,delete this._tCfgs[e],this._addAttrs(n,this._tVals)},_getAttr:function(e){var t=e,r=this._tCfgs,s,o,u,a;return e.indexOf(i)!==-1&&(s=e.split(i),e=s.shift()),r&&r[e]&&this._addOutOfOrder(e,r[e]),a=this._state.data[e]||{},a.lazy&&(a=a.lazy,this._addLazyAttr(e,a)),u=this._getStateVal(e,a),o=a.getter,o&&!o.call&&(o=this[o]),u=o?o.call(this,u,t):u,u=s?n.getValue(u,s):u,u},_getStateVal:function(e,t){var n=this._stateProxy;return t||(t=this._state.getAll(e)||{}),n&&e in n&&!t._bypassProxy?n[e]:t.value},_setStateVal:function(e,t){var n=this._stateProxy;n&&e in n&&!this._state.get(e,v)?n[e]=t:this._state.add(e,c,t)},_setAttrVal:function(e,t,n,i,s,o){var u=this,a=!0,f=o||this._state.data[e]||{},l=f.validator,c=f.setter,h=f.initializing,p=this._getStateVal(e,f),d=t||e,v,g;return l&&(l.call||(l=this[l]),l&&(g=l.call(u,i,d,s),!g&&h&&(i=f.defaultValue,g=!0))),!l||g?(c&&(c.call||(c=this[c]),c&&(v=c.call(u,i,d,s),v===y?h?i=f.defaultValue:a=!1:v!==undefined&&(i=v))),a&&(!t&&i===p&&!r.isObject(i)?a=!1:(m in f||(f.initValue=i),u._setStateVal(e,i)))):a=!1,a},setAttrs:function(e,t){return this._setAttrs(e,t)},_setAttrs:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.set(n,e[n],t);return this},getAttrs:function(e){return this._getAttrs(e)},_getAttrs:function(e){var t={},r,i,s,o=e===!0;if(!e||o)e=n.keys(this._state.data);for(i=0,s=e.length;i<s;i++){r=e[i];if(!o||this._getStateVal(r)!=this._state.get(r,m))t[r]=this.get(r)}return t},addAttrs:function(e,t,n){return e&&(this._tCfgs=e,this._tVals=t?this._normAttrVals(t):null,this._addAttrs(e,this._tVals,n),this._tCfgs=this._tVals=null),this},_addAttrs:function(e,t,n){var r=this._tCfgs,i=this._tVals,s,o,u;for(s in e)e.hasOwnProperty(s)&&(o=e[s],o.defaultValue=o.value,u=this._getAttrInitVal(s,o,i),u!==undefined&&(o.value=u),r[s]&&(r[s]=undefined),this.addAttr(s,o,n))},_protectAttrs:b.protectAttrs,_normAttrVals:function(e){var t,n,r,s,o,u;if(!e)return null;t={};for(u in e)e.hasOwnProperty(u)&&(u.indexOf(i)!==-1?(r=u.split(i),s=r.shift(),n=n||{},o=n[s]=n[s]||[],o[o.length]={path:r,value:e[u]}):t[u]=e[u]);return{simple:t,complex:n}},_getAttrInitVal:function(e,t,r){var i=t.value,s=t.valueFn,o,u=!1,a=t.readOnly,f,l,c,h,p,d,v;!a&&r&&(f=r.simple,f&&f.hasOwnProperty(e)&&(i=f[e],u=!0)),s&&!u&&(s.call||(s=this[s]),s&&(o=s.call(this,e),i=o));if(!a&&r){l=r.complex;if(l&&l.hasOwnProperty(e)&&i!==undefined&&i!==null){v=l[e];for(c=0,h=v.length;c<h;++c)p=v[c].path,d=v[c].value,n.setValue(i,p,d)}}return i},_initAttrs:function(t,n,r){t=t||this.constructor.ATTRS;var i=e.Base,s=e.BaseCore,o=i&&e.instanceOf(this,i),u=!o&&s&&e.instanceOf(this,s);t&&!o&&!u&&this.addAttrs(e.AttributeCore.protectAttrs(t),n,r)}},e.AttributeCore=b},"3.11.0",{requires:["oop"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-observable",function(e,t){function s(){this._ATTR_E_FACADE={},n.call(this,{emitFacade:!0})}var n=e.EventTarget,r="Change",i="broadcast";s._ATTR_CFG=[i],s.prototype={set:function(e,t,n){return this._setAttr(e,t,n)},_set:function(e,t,n){return this._setAttr(e,t,n,!0)},setAttrs:function(e,t){return this._setAttrs(e,t)},_setAttrs:function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.set(n,e[n],t);return this},_fireAttrChange:function(t,n,i,s,o,u){var a=this,f=this._getFullType(t+r),l=a._state,c,h,p;u||(u=l.data[t]||{}),u.published||(p=a._publish(f),p.emitFacade=!0,p.defaultTargetOnly=!0,p.defaultFn=a._defAttrChangeFn,h=u.broadcast,h!==undefined&&(p.broadcast=h),u.published=!0),o?(c=e.merge(o),c._attrOpts=o):c=a._ATTR_E_FACADE,c.attrName=t,c.subAttrName=n,c.prevVal=i,c.newVal=s,a._hasPotentialSubscribers(f)?a.fire(f,c):this._setAttrVal(t,n,i,s,o,u)},_defAttrChangeFn:function(e,t){var n=e._attrOpts;n&&delete e._attrOpts,this._setAttrVal(e.attrName,e.subAttrName,e.prevVal,e.newVal,n)?t||(e.newVal=this.get(e.attrName)):t||e.stopImmediatePropagation()}},e.mix(s,n,!1,null,1),e.AttributeObservable=s,e.AttributeEvents=s},"3.11.0",{requires:["event-custom"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-extras",function(e,t){function o(){}var n="broadcast",r="published",i="initValue",s={readOnly:1,writeOnce:1,getter:1,broadcast:1};o.prototype={modifyAttr:function(e,t){var i=this,o,u;if(i.attrAdded(e)){i._isLazyAttr(e)&&i._addLazyAttr(e),u=i._state;for(o in t)s[o]&&t.hasOwnProperty(o)&&(u.add(e,o,t[o]),o===n&&u.remove(e,r))}},removeAttr:function(e){this._state.removeAll(e)},reset:function(t){var n=this;return t?(n._isLazyAttr(t)&&n._addLazyAttr(t),n.set(t,n._state.get(t,i))):e.each(n._state.data,function(e,t){n.reset(t)}),n},_getAttrCfg:function(t){var n,r=this._state;return t?n=r.getAll(t)||{}:(n={},e.each(r.data,function(e,t){n[t]=r.getAll(t)})),n}},e.AttributeExtras=o},"3.11.0",{requires:["oop"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-base",function(e,t){function n(){e.AttributeCore.apply(this,arguments),e.AttributeObservable.apply(this,arguments),e.AttributeExtras.apply(this,arguments)}e.mix(n,e.AttributeCore,!1,null,1),e.mix(n,e.AttributeExtras,!1,null,1),e.mix(n,e.AttributeObservable,!0,null,1),n.INVALID_VALUE=e.AttributeCore.INVALID_VALUE,n._ATTR_CFG=e.AttributeCore._ATTR_CFG.concat(e.AttributeObservable._ATTR_CFG),n.protectAttrs=e.AttributeCore.protectAttrs,e.Attribute=n},"3.11.0",{requires:["attribute-core","attribute-observable","attribute-extras"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-core",function(e,t){function v(e){this._BaseInvoked||(this._BaseInvoked=!0,this._initBase(e))}var n=e.Object,r=e.Lang,i=".",s="initialized",o="destroyed",u="initializer",a="value",f=Object.prototype.constructor,l="deep",c="shallow",h="destructor",p=e.AttributeCore,d=function(e,t,n){var r;for(r in t)n[r]&&(e[r]=t[r]);return e};v._ATTR_CFG=p._ATTR_CFG.concat("cloneDefaultValue"),v._NON_ATTRS_CFG=["plugins"],v.NAME="baseCore",v.ATTRS={initialized:{readOnly:!0,value:!1},destroyed:{readOnly:!0,value:!1}},v.modifyAttrs=function(t,n){typeof t!="function"&&(n=t,t=this);var r,i,s;r=t.ATTRS||(t.ATTRS={});if(n){t._CACHED_CLASS_DATA=null;for(s in n)n.hasOwnProperty(s)&&(i=r[s]||(r[s]={}),e.mix(i,n[s],!0))}},v.prototype={_initBase:function(t){e.stamp(this),this._initAttribute(t);var n=e.Plugin&&e.Plugin.Host;this._initPlugins&&n&&n.call(this),this._lazyAddAttrs!==!1&&(this._lazyAddAttrs=!0),this.name=this.constructor.NAME,this.init.apply(this,arguments)},_initAttribute:function(){p.call(this)},init:function(e){return this._baseInit(e),this},_baseInit:function(e){this._initHierarchy(e),this._initPlugins&&this._initPlugins(e),this._set(s,!0)},destroy:function(){return this._baseDestroy(),this},_baseDestroy:function(){this._destroyPlugins&&this._destroyPlugins(),this._destroyHierarchy(),this._set(o,!0)},_getClasses:function(){return this._classes||this._initHierarchyData(),this._classes},_getAttrCfgs:function(){return this._attrs||this._initHierarchyData(),this._attrs},_getInstanceAttrCfgs:function(e){var t={},r,i,s,o,u,a,f,l=e._subAttrs,c=this._attrCfgHash();for(a in e)if(e.hasOwnProperty(a)&&a!=="_subAttrs"){f=e[a],r=t[a]=d({},f,c),i=r.value,i&&typeof i=="object"&&this._cloneDefaultValue(a,r);if(l&&l.hasOwnProperty(a)){o=e._subAttrs[a];for(u in o)s=o[u],s.path&&n.setValue(r.value,s.path,s.value)}}return t},_filterAdHocAttrs:function(e,t){var n,r=this._nonAttrs,i;if(t){n={};for(i in t)!e[i]&&!r[i]&&t.hasOwnProperty(i)&&(n[i]={value:t[i]})}return n},_initHierarchyData:function(){var e=this.constructor,t=e._CACHED_CLASS_DATA,n,r,i,s,o,u=!e._ATTR_CFG_HASH,a,f={},l=[],c=[];n=e;if(!t){while(n){l[l.length]=n,n.ATTRS&&(c[c.length]=n.ATTRS);if(u){s=n._ATTR_CFG,o=o||{};if(s)for(r=0,i=s.length;r<i;r+=1)o[s[r]]=!0}a=n._NON_ATTRS_CFG;if(a)for(r=0,i=a.length;r<i;r++)f[a[r]]=!0;n=n.superclass?n.superclass.constructor:null}u&&(e._ATTR_CFG_HASH=o),t=e._CACHED_CLASS_DATA={classes:l,nonAttrs:f,attrs:this._aggregateAttrs(c)}}this._classes=t.classes,this._attrs=t.attrs,this._nonAttrs=t.nonAttrs},_attrCfgHash:function(){return this.constructor._ATTR_CFG_HASH},_cloneDefaultValue:function(t,n){var i=n.value,s=n.cloneDefaultValue;s===l||s===!0?n.value=e.clone(i):s===c?n.value=e.merge(i):s===undefined&&(f===i.constructor||r.isArray(i))&&(n.value=e.clone(i))},_aggregateAttrs:function(e){var t,n,r,s,o,u,f=this._attrCfgHash(),l,c={};if(e)for(u=e.length-1;u>=0;--u){n=e[u];for(t in n)n.hasOwnProperty(t)&&(s=d({},n[t],f),o=null,t.indexOf(i)!==-1&&(o=t.split(i),t=o.shift()),l=c[t],o&&l&&l.value?(r=c._subAttrs,r||(r=c._subAttrs={}),r[t]||(r[t]={}),r[t][o.join(i)]={value:s.value,path:o}):o||(l?(l.valueFn&&a in s&&(l.valueFn=null),d(l,s,f)):c[t]=s))}return c},_initHierarchy:function(e){var t=this._lazyAddAttrs,n,r,i,s,o,a,f,l,c,h,p,d=[],v=this._getClasses(),m=this._getAttrCfgs(),g=v.length-1;for(o=g;o>=0;o--){n=v[o],r=n.prototype,h=n._yuibuild&&n._yuibuild.exts,r.hasOwnProperty(u)&&(d[d.length]=r.initializer);if(h)for(a=0,f=h.length;a<f;a++)l=h[a],l.apply(this,arguments),c=l.prototype,c.hasOwnProperty(u)&&(d[d.length]=c.initializer)}p=this._getInstanceAttrCfgs(m),this._preAddAttrs&&this._preAddAttrs(p,e,t),this._allowAdHocAttrs&&this.addAttrs(this._filterAdHocAttrs(m,e),e,t),this.addAttrs(p,e,t);for(i=0,s=d.length;i<s;i++)d[i].apply(this,arguments)},_destroyHierarchy:function(){var e,t,n,r,i,s,o,u,a=this._getClasses();for(n=0,r=a.length;n<r;n++){e=a[n],t=e.prototype,o=e._yuibuild&&e._yuibuild.exts;if(o)for(i=0,s=o.length;i<s;i++)u=o[i].prototype,u.hasOwnProperty(h)&&u.destructor.apply(this,arguments);t.hasOwnProperty(h)&&t.destructor.apply(this,arguments)}},toString:function(){return this.name+"["+e.stamp(this,!0)+"]"}},e.mix(v,p,!1,null,1),v.prototype.constructor=v,e.BaseCore=v},"3.11.0",{requires:["attribute-core"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-observable",function(e,t){function f(){}var n=e.Lang,r="destroy",i="init",s="bubbleTargets",o="_bubbleTargets",u=e.AttributeObservable,a=e.BaseCore;f._ATTR_CFG=u._ATTR_CFG.concat(),f._NON_ATTRS_CFG=["on","after","bubbleTargets"],f.prototype={_initAttribute:function(){a.prototype._initAttribute.apply(this,arguments),u.call(this),this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME,this._yuievt.config.prefix=this._eventPrefix},init:function(e){var t=this._getFullType(i),n=this._publish(t);return n.emitFacade=!0,n.fireOnce=!0,n.defaultTargetOnly=!0,n.defaultFn=this._defInitFn,this._preInitEventCfg(e),n._hasPotentialSubscribers()?this.fire(t,{cfg:e}):(this._baseInit(e),n.fired=!0,n.firedWith=[{cfg:e}]),this},_preInitEventCfg:function(e){e&&(e.on&&this.on(e.on),e.after&&this.after(e.after));var t,r,i,u=e&&s in e;if(u||o in this){i=u?e&&e.bubbleTargets:this._bubbleTargets;if(n.isArray(i))for(t=0,r=i.length;t<r;t++)this.addTarget(i[t]);else i&&this.addTarget(i)}},destroy:function(){return this.publish(r,{fireOnce:!0,defaultTargetOnly:!0,defaultFn:this._defDestroyFn}),this.fire(r),this.detachAll(),this},_defInitFn:function(e){this._baseInit(e.cfg)},_defDestroyFn:function(e){this._baseDestroy(e.cfg)}},e.mix(f,u,!1,null,1),e.BaseObservable=f},"3.11.0",{requires:["attribute-observable"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-base",function(e,t){function o(){i.apply(this,arguments),s.apply(this,arguments),r.apply(this,arguments)}var n=e.AttributeCore,r=e.AttributeExtras,i=e.BaseCore,s=e.BaseObservable;o._ATTR_CFG=i._ATTR_CFG.concat(s._ATTR_CFG),o._NON_ATTRS_CFG=i._NON_ATTRS_CFG.concat(s._NON_ATTRS_CFG),o.NAME="base",o.ATTRS=n.protectAttrs(i.ATTRS),o.modifyAttrs=i.modifyAttrs,e.mix(o,i,!1,null,1),e.mix(o,r,!1,null,1),e.mix(o,s,!0,null,1),o.prototype.constructor=o,e.Base=o},"3.11.0",{requires:["attribute-base","base-core","base-observable"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("color-base",function(e,t){var n=/^#?([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})(\ufffe)?/,r=/^#?([\da-fA-F]{1})([\da-fA-F]{1})([\da-fA-F]{1})(\ufffe)?/,i=/rgba?\(([\d]{1,3}), ?([\d]{1,3}), ?([\d]{1,3}),? ?([.\d]*)?\)/,s={HEX:"hex",RGB:"rgb",RGBA:"rgba"},o={hex:"toHex",rgb:"toRGB",rgba:"toRGBA"};e.Color={KEYWORDS:{black:"000",silver:"c0c0c0",gray:"808080",white:"fff",maroon:"800000",red:"f00",purple:"800080",fuchsia:"f0f",green:"008000",lime:"0f0",olive:"808000",yellow:"ff0",navy:"000080",blue:"00f",teal:"008080",aqua:"0ff"},REGEX_HEX:n,REGEX_HEX3:r,REGEX_RGB:i,re_RGB:i,re_hex:n,re_hex3:r,STR_HEX:"#{*}{*}{*}",STR_RGB:"rgb({*}, {*}, {*})",STR_RGBA:"rgba({*}, {*}, {*}, {*})",TYPES:s,CONVERTS:o,convert:function(t,n){var r=e.Color.CONVERTS[n.toLowerCase()],i=t;return r&&e.Color[r]&&(i=e.Color[r](t)),i},toHex:function(t){var n=e.Color._convertTo(t,"hex"),r=n.toLowerCase()==="transparent";return n.charAt(0)!=="#"&&!r&&(n="#"+n),r?n.toLowerCase():n.toUpperCase()},toRGB:function(t){var n=e.Color._convertTo(t,"rgb");return n.toLowerCase()},toRGBA:function(t){var n=e.Color._convertTo(t,"rgba");return n.toLowerCase()},toArray:function(t){var n=e.Color.findType(t).toUpperCase(),r,i,s,o;return n==="HEX"&&t.length<5&&(n="HEX3"),n.charAt(n.length-1)==="A"&&(n=n.slice(0,-1)),r=e.Color["REGEX_"+n],r&&(i=r.exec(t)||[],s=i.length,s&&(i.shift(),s--,n==="HEX3"&&(i[0]+=i[0],i[1]+=i[1],i[2]+=i[2]),o=i[s-1],o||(i[s-1]=1))),i},fromArray:function(t,n){t=t.concat();if(typeof n=="undefined")return t.join(", ");var r="{*}";n=e.Color["STR_"+n.toUpperCase()],t.length===3&&n.match(/\{\*\}/g).length===4&&t.push(1);while(n.indexOf(r)>=0&&t.length>0)n=n.replace(r,t.shift());return n},findType:function(t){if(e.Color.KEYWORDS[t])return"keyword";var n=t.indexOf("("),r;return n>0&&(r=t.substr(0,n)),r&&e.Color.TYPES[r.toUpperCase()]?e.Color.TYPES[r.toUpperCase()]:"hex"},_getAlpha:function(t){var n,r=e.Color.toArray(t);return r.length>3&&(n=r.pop()),+n||1},_keywordToHex:function(t){var n=e.Color.KEYWORDS[t];if(n)return n},_convertTo:function(t,n){if(t==="transparent")return t;var r=e.Color.findType(t),i=n,s,o,u,a;return r==="keyword"&&(t=e.Color._keywordToHex(t),r="hex"),r==="hex"&&t.length<5&&(t.charAt(0)==="#"&&(t=t.substr(1)),t="#"+t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),r===n?t:(r.charAt(r.length-1)==="a"&&(r=r.slice(0,-1)),s=n.charAt(n.length-1)==="a",s&&(n=n.slice(0,-1),o=e.Color._getAlpha(t)),a=n.charAt(0).toUpperCase()+n.substr(1).toLowerCase(),u=e.Color["_"+r+"To"+a],u||r!=="rgb"&&n!=="rgb"&&(t=e.Color["_"+r+"ToRgb"](t),r="rgb",u=e.Color["_"+r+"To"+a]),u&&(t=u(t,s)),s&&(e.Lang.isArray(t)||(t=e.Color.toArray(t)),t.push(o),t=e.Color.fromArray(t,i.toUpperCase())),t)},_hexToRgb:function(e,t){var n,r,i;return e.charAt(0)==="#"&&(e=e.substr(1)),e=parseInt(e,16),n=e>>16,r=e>>8&255,i=e&255,t?[n,r,i]:"rgb("+n+", "+r+", "+i+")"},_rgbToHex:function(t){var n=e.Color.toArray(t),r=n[2]|n[1]<<8|n[0]<<16;r=(+r).toString(16);while(r.length<6)r="0"+r;return"#"+r}}},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dom-style",function(e,t){(function(e){var t="documentElement",n="defaultView",r="ownerDocument",i="style",s="float",o="cssFloat",u="styleFloat",a="transparent",f="getComputedStyle",l="getBoundingClientRect",c=e.config.win,h=e.config.doc,p=undefined,d=e.DOM,v="transform",m="transformOrigin",g=["WebkitTransform","MozTransform","OTransform","msTransform"],y=/color$/i,b=/width|height|top|left|right|bottom|margin|padding/i;e.Array.each(g,function(e){e in h[t].style&&(v=e,m=e+"Origin")}),e.mix(d,{DEFAULT_UNIT:"px",CUSTOM_STYLES:{},setStyle:function(e,t,n,r){r=r||e.style;var i=d.CUSTOM_STYLES;if(r){n===null||n===""?n="":!isNaN(new Number(n))&&b.test(t)&&(n+=d.DEFAULT_UNIT);if(t in i){if(i[t].set){i[t].set(e,n,r);return}typeof i[t]=="string"&&(t=i[t])}else t===""&&(t="cssText",n="");r[t]=n}},getStyle:function(e,t,n){n=n||e.style;var r=d.CUSTOM_STYLES,i="";if(n){if(t in r){if(r[t].get)return r[t].get(e,t,n);typeof r[t]=="string"&&(t=r[t])}i=n[t],i===""&&(i=d[f](e,t))}return i},setStyles:function(t,n){var r=t.style;e.each(n,function(e,n){d.setStyle(t,n,e,r)},d)},getComputedStyle:function(e,t){var s="",o=e[r],u;return e[i]&&o[n]&&o[n][f]&&(u=o[n][f](e,null),u&&(s=u[t])),s}}),h[t][i][o]!==p?d.CUSTOM_STYLES[s]=o:h[t][i][u]!==p&&(d.CUSTOM_STYLES[s]=u),e.UA.opera&&(d[f]=function(t,i){var s=t[r][n],o=s[f](t,"")[i];return y.test(i)&&(o=e.Color.toRGB(o)),o}),e.UA.webkit&&(d[f]=function(e,t){var i=e[r][n],s=i[f](e,"")[t];return s==="rgba(0, 0, 0, 0)"&&(s=a),s}),e.DOM._getAttrOffset=function(t,n){var r=e.DOM[f](t,n),i=t.offsetParent,s,o,u;return r==="auto"&&(s=e.DOM.getStyle(t,"position"),s==="static"||s==="relative"?r=0:i&&i[l]&&(o=i[l]()[n],u=t[l]()[n],n==="left"||n==="top"?r=u-o:r=o-t[l]()[n])),r},e.DOM._getOffset=function(e){var t,n=null;return e&&(t=d.getStyle(e,"position"),n=[parseInt(d[f](e,"left"),10),parseInt(d[f](e,"top"),10)],isNaN(n[0])&&(n[0]=parseInt(d.getStyle(e,"left"),10),isNaN(n[0])&&(n[0]=t==="relative"?0:e.offsetLeft||0)),isNaN(n[1])&&(n[1]=parseInt(d.getStyle(e,"top"),10),isNaN(n[1])&&(n[1]=t==="relative"?0:e.offsetTop||0))),n},d.CUSTOM_STYLES.transform={set:function(e,t,n){n[v]=t},get:function(e,t){return d[f](e,v)}},d.CUSTOM_STYLES.transformOrigin={set:function(e,t,n){n[m]=t},get:function(e,t){return d[f](e,m)}}})(e)},"3.11.0",{requires:["dom-base","color-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-style",function(e,t){(function(e){e.mix(e.Node.prototype,{setStyle:function(t,n){return e.DOM.setStyle(this._node,t,n),this},setStyles:function(t){return e.DOM.setStyles(this._node,t),this},getStyle:function(t){return e.DOM.getStyle(this._node,t)},getComputedStyle:function(t){return e.DOM.getComputedStyle(this._node,t)}}),e.NodeList.importMethod(e.Node.prototype,["getStyle","getComputedStyle","setStyle","setStyles"])})(e)},"3.11.0",{requires:["dom-style","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances,n;for(n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0,n;for(n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY",s;return n==="auto"&&(s=t.getStyle("position"),s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0),n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"3.11.0",{requires:["base-base","node-style"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"3.11.0",{requires:["anim-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dom-screen",function(e,t){(function(e){var t="documentElement",n="compatMode",r="position",i="fixed",s="relative",o="left",u="top",a="BackCompat",f="medium",l="borderLeftWidth",c="borderTopWidth",h="getBoundingClientRect",p="getComputedStyle",d=e.DOM,v=/^t(?:able|d|h)$/i,m;e.UA.ie&&(e.config.doc[n]!=="BackCompat"?m=t:m="body"),e.mix(d,{winHeight:function(e){var t=d._getWinSize(e).height;return t},winWidth:function(e){var t=d._getWinSize(e).width;return t},docHeight:function(e){var t=d._getDocSize(e).height;return Math.max(t,d._getWinSize(e).height)},docWidth:function(e){var t=d._getDocSize(e).width;return Math.max(t,d._getWinSize(e).width)},docScrollX:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageXOffset:0;return Math.max(r[t].scrollLeft,r.body.scrollLeft,s)},docScrollY:function(n,r){r=r||n?d._getDoc(n):e.config.doc;var i=r.defaultView,s=i?i.pageYOffset:0;return Math.max(r[t].scrollTop,r.body.scrollTop,s)},getXY:function(){return e.config.doc[t][h]?function(r){var i=null,s,o,u,f,l,c,p,v,g,y;if(r&&r.tagName){p=r.ownerDocument,u=p[n],u!==a?y=p[t]:y=p.body,y.contains?g=y.contains(r):g=e.DOM.contains(y,r);if(g){v=p.defaultView,v&&"pageXOffset"in v?(s=v.pageXOffset,o=v.pageYOffset):(s=m?p[m].scrollLeft:d.docScrollX(r,p),o=m?p[m].scrollTop:d.docScrollY(r,p)),e.UA.ie&&(!p.documentMode||p.documentMode<8||u===a)&&(l=y.clientLeft,c=y.clientTop),f=r[h](),i=[f.left,f.top];if(l||c)i[0]-=l,i[1]-=c;if(o||s)if(!e.UA.ios||e.UA.ios>=4.2)i[0]+=s,i[1]+=o}else i=d._getOffset(r)}return i}:function(t){var n=null,s,o,u,a,f;if(t)if(d.inDoc(t)){n=[t.offsetLeft,t.offsetTop],s=t.ownerDocument,o=t,u=e.UA.gecko||e.UA.webkit>519?!0:!1;while(o=o.offsetParent)n[0]+=o.offsetLeft,n[1]+=o.offsetTop,u&&(n=d._calcBorders(o,n));if(d.getStyle(t,r)!=i){o=t;while(o=o.parentNode){a=o.scrollTop,f=o.scrollLeft,e.UA.gecko&&d.getStyle(o,"overflow")!=="visible"&&(n=d._calcBorders(o,n));if(a||f)n[0]-=f,n[1]-=a}n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n[0]+=d.docScrollX(t,s),n[1]+=d.docScrollY(t,s)}else n=d._getOffset(t);return n}}(),getScrollbarWidth:e.cached(function(){var t=e.config.doc,n=t.createElement("div"),r=t.getElementsByTagName("body")[0],i=.1;return r&&(n.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;",n.appendChild(t.createElement("p")).style.height="1px",r.insertBefore(n,r.firstChild),i=n.offsetWidth-n.clientWidth,r.removeChild(n)),i},null,.1),getX:function(e){return d.getXY(e)[0]},getY:function(e){return d.getXY(e)[1]},setXY:function(e,t,n){var i=d.setStyle,a,f,l,c;e&&t&&(a=d.getStyle(e,r),f=d._getOffset(e),a=="static"&&(a=s,i(e,r,a)),c=d.getXY(e),t[0]!==null&&i(e,o,t[0]-c[0]+f[0]+"px"),t[1]!==null&&i(e,u,t[1]-c[1]+f[1]+"px"),n||(l=d.getXY(e),(l[0]!==t[0]||l[1]!==t[1])&&d.setXY(e,t,!0)))},setX:function(e,t){return d.setXY(e,[t,null])},setY:function(e,t){return d.setXY(e,[null,t])},swapXY:function(e,t){var n=d.getXY(e);d.setXY(e,d.getXY(t)),d.setXY(t,n)},_calcBorders:function(t,n){var r=parseInt(d[p](t,c),10)||0,i=parseInt(d[p](t,l),10)||0;return e.UA.gecko&&v.test(t.tagName)&&(r=0,i=0),n[0]+=i,n[1]+=r,n},_getWinSize:function(r,i){i=i||r?d._getDoc(r):e.config.doc;var s=i.defaultView||i.parentWindow,o=i[n],u=s.innerHeight,a=s.innerWidth,f=i[t];return o&&!e.UA.opera&&(o!="CSS1Compat"&&(f=i.body),u=f.clientHeight,a=f.clientWidth),{height:u,width:a}},_getDocSize:function(r){var i=r?d._getDoc(r):e.config.doc,s=i[t];return i[n]!="CSS1Compat"&&(s=i.body),{height:s.scrollHeight,width:s.scrollWidth}}})})(e),function(e){var t="top",n="right",r="bottom",i="left",s=function(e,s){var o=Math.max(e[t],s[t]),u=Math.min(e[n],s[n]),a=Math.min(e[r],s[r]),f=Math.max(e[i],s[i]),l={};return l[t]=o,l[n]=u,l[r]=a,l[i]=f,l},o=e.DOM;e.mix(o,{region:function(e){var t=o.getXY(e),n=!1;return e&&t&&(n=o._getRegion(t[1],t[0]+e.offsetWidth,t[1]+e.offsetHeight,t[0])),n},intersect:function(u,a,f){var l=f||o.region(u),c={},h=a,p;if(h.tagName)c=o.region(h);else{if(!e.Lang.isObject(a))return!1;c=a}return p=s(c,l),{top:p[t],right:p[n],bottom:p[r],left:p[i],area:(p[r]-p[t])*(p[n]-p[i]),yoff:p[r]-p[t],xoff:p[n]-p[i],inRegion:o.inRegion(u,a,!1,f)}},inRegion:function(u,a,f,l){var c={},h=l||o.region(u),p=a,d;if(p.tagName)c=o.region(p);else{if(!e.Lang.isObject(a))return!1;c=a}return f?h[i]>=c[i]&&h[n]<=c[n]&&h[t]>=c[t]&&h[r]<=c[r]:(d=s(c,h),d[r]>=d[t]&&d[n]>=d[i]?!0:!1)},inViewportRegion:function(e,t,n){return o.inRegion(e,o.viewportRegion(e),t,n)},_getRegion:function(e,s,o,u){var a={};return a[t]=a[1]=e,a[i]=a[0]=u,a[r]=o,a[n]=s,a.width=a[n]-a[i],a.height=a[r]-a[t],a},viewportRegion:function(t){t=t||e.config.doc.documentElement;var n=!1,r,i;return t&&(r=o.docScrollX(t),i=o.docScrollY(t),n=o._getRegion(i,o.winWidth(t)+r,i+o.winHeight(t),r)),n}})}(e)},"3.11.0",{requires:["dom-base","dom-style"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-screen",function(e,t){e.each(["winWidth","winHeight","docWidth","docHeight","docScrollX","docScrollY"],function(t){e.Node.ATTRS[t]={getter:function(){var n=Array.prototype.slice.call(arguments);return n.unshift(e.Node.getDOMNode(this)),e.DOM[t].apply(this,n)}}}),e.Node.ATTRS.scrollLeft={getter:function(){var t=e.Node.getDOMNode(this);return"scrollLeft"in t?t.scrollLeft:e.DOM.docScrollX(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollLeft"in n?n.scrollLeft=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(t,e.DOM.docScrollY(n)))}},e.Node.ATTRS.scrollTop={getter:function(){var t=e.Node.getDOMNode(this);return"scrollTop"in t?t.scrollTop:e.DOM.docScrollY(t)},setter:function(t){var n=e.Node.getDOMNode(this);n&&("scrollTop"in n?n.scrollTop=t:(n.document||n.nodeType===9)&&e.DOM._getWin(n).scrollTo(e.DOM.docScrollX(n),t))}},e.Node.importMethod(e.DOM,["getXY","setXY","getX","setX","getY","setY","swapXY"]),e.Node.ATTRS.region={getter:function(){var t=this.getDOMNode(),n;return t&&!t.tagName&&t.nodeType===9&&(t=t.documentElement),e.DOM.isWindow(t)?n=e.DOM.viewportRegion(t):n=e.DOM.region(t),n}},e.Node.ATTRS.viewportRegion={getter:function(){return e.DOM.viewportRegion(e.Node.getDOMNode(this))}},e.Node.importMethod(e.DOM,"inViewportRegion"),e.Node.prototype.intersect=function(t,n){var r=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.intersect(r,t,n)},e.Node.prototype.inRegion=function(t,n,r){var i=e.Node.getDOMNode(this);return e.instanceOf(t,e.Node)&&(t=e.Node.getDOMNode(t)),e.DOM.inRegion(i,t,n,r)}},"3.11.0",{requires:["dom-screen","node-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"3.11.0",{requires:["anim-base","node-screen"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"3.11.0",{requires:["anim-xy"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"3.11.0",{requires:["anim-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("pluginhost-base",function(e,t){function r(){this._plugins={}}var n=e.Lang;r.prototype={plug:function(e,t){var r,i,s;if(n.isArray(e))for(r=0,i=e.length;r<i;r++)this.plug(e[r]);else e&&!n.isFunction(e)&&(t=e.cfg,e=e.fn),e&&e.NS&&(s=e.NS,t=t||{},t.host=this,this.hasPlugin(s)?this[s].setAttrs&&this[s].setAttrs(t):(this[s]=new e(t),this._plugins[s]=e));return this},unplug:function(e){var t=e,r=this._plugins;if(e)n.isFunction(e)&&(t=e.NS,t&&(!r[t]||r[t]!==e)&&(t=null)),t&&(this[t]&&(this[t].destroy&&this[t].destroy(),delete this[t]),r[t]&&delete r[t]);else for(t in this._plugins)this._plugins.hasOwnProperty(t)&&this.unplug(t);return this},hasPlugin:function(e){return this._plugins[e]&&this[e]},_initPlugins:function(e){this._plugins=this._plugins||{},this._initConfigPlugins&&this._initConfigPlugins(e)},_destroyPlugins:function(){this.unplug()}},e.namespace("Plugin").Host=r},"3.11.0",{requires:["yui-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("pluginhost-config",function(e,t){var n=e.Plugin.Host,r=e.Lang;n.prototype._initConfigPlugins=function(t){var n=this._getClasses?this._getClasses():[this.constructor],r=[],i={},s,o,u,a,f;for(o=n.length-1;o>=0;o--)s=n[o],a=s._UNPLUG,a&&e.mix(i,a,!0),u=s._PLUG,u&&e.mix(r,u,!0);for(f in r)r.hasOwnProperty(f)&&(i[f]||this.plug(r[f]));t&&t.plugins&&this.plug(t.plugins)},n.plug=function(t,n,i){var s,o,u,a;if(t!==e.Base){t._PLUG=t._PLUG||{},r.isArray(n)||(i&&(n={fn:n,cfg:i}),n=[n]);for(o=0,u=n.length;o<u;o++)s=n[o],a=s.NAME||s.fn.NAME,t._PLUG[a]=s}},n.unplug=function(t,n){var i,s,o,u;if(t!==e.Base){t._UNPLUG=t._UNPLUG||{},r.isArray(n)||(n=[n]);for(s=0,o=n.length;s<o;s++)i=n[s],u=i.NAME,t._PLUG[u]?delete t._PLUG[u]:t._UNPLUG[u]=i}}},"3.11.0",{requires:["pluginhost-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-pluginhost",function(e,t){e.Node.plug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.plug.apply(e.Base,t),e.Node},e.Node.unplug=function(){var t=e.Array(arguments);return t.unshift(e.Node),e.Plugin.Host.unplug.apply(e.Base,t),e.Node},e.mix(e.Node,e.Plugin.Host,!1,null,1),e.NodeList.prototype.plug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.plug.apply(e.one(n),t)}),this},e.NodeList.prototype.unplug=function(){var t=arguments;return e.NodeList.each(this,function(n){e.Node.prototype.unplug.apply(e.one(n),t)}),this}},"3.11.0",{requires:["node-base","pluginhost"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-node-plugin",function(e,t){var n=function(t){t=t?e.merge(t):{},t.node=t.host,n.superclass.constructor.apply(this,arguments)};n.NAME="nodefx",n.NS="fx",e.extend(n,e.Anim),e.namespace("Plugin"),e.Plugin.NodeFX=n},"3.11.0",{requires:["node-pluginhost","anim-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-scroll",function(e,t){var n=Number;e.Anim.behaviors.scroll={set:function(e,t,r,i,s,o,u){var a=e._node,f=[u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)];f[0]&&a.set("scrollLeft",f[0]),f[1]&&a.set("scrollTop",f[1])},get:function(e){var t=e._node;return[t.get("scrollLeft"),t.get("scrollTop")]}}},"3.11.0",{requires:["anim-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.11.0",{requires:["base-base","pluginhost"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-build",function(e,t){function f(e,t,n){n[e]&&(t[e]=(t[e]||[]).concat(n[e]))}function l(e,t,n){n._ATTR_CFG&&(t._ATTR_CFG_HASH=null,f.apply(null,arguments))}function c(e,t,r){n.modifyAttrs(t,r.ATTRS)}var n=e.BaseCore,r=e.Base,i=e.Lang,s="initializer",o="destructor",u=["_PLUG","_UNPLUG"],a;r._build=function(t,n,i,u,a,f){var l=r._build,c=l._ctor(n,f),h=l._cfg(n,f,i),p=l._mixCust,d=c._yuibuild.dynamic,v,m,g,y,b,w;for(v=0,m=i.length;v<m;v++)g=i[v],y=g.prototype,b=y[s],w=y[o],delete y[s],delete y[o],e.mix(c,g,!0,null,1),p(c,g,h),b&&(y[s]=b),w&&(y[o]=w),c._yuibuild.exts.push(g);return u&&e.mix(c.prototype,u,!0),a&&(e.mix(c,l._clean(a,h),!0),p(c,a,h)),c.prototype.hasImpl=l._impl,d&&(c.NAME=t,c.prototype.constructor=c,c.modifyAttrs=n.modifyAttrs),c},a=r._build,e.mix(a,{_mixCust:function(t,n,r){var s,o,u,a,f,l;r&&(s=r.aggregates,o=r.custom,u=r.statics),u&&e.mix(t,n,!0,u);if(s)for(l=0,f=s.length;l<f;l++)a=s[l],!t.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(t[a]=i.isArray(n[a])?[]:{}),e.aggregate(t,n,!0,[a]);if(o)for(l in o)o.hasOwnProperty(l)&&o[l](l,t,n)},_tmpl:function(t){function n(){n.superclass.constructor.apply(this,arguments)}return e.extend(n,t),n},_impl:function(e){var t=this._getClasses(),n,r,i,s,o,u;for(n=0,r=t.length;n<r;n++){i=t[n];if(i._yuibuild){s=i._yuibuild.exts,o=s.length;for(u=0;u<o;u++)if(s[u]===e)return!0}}return!1},_ctor:function(e,t){var n=t&&!1===t.dynamic?!1:!0,r=n?a._tmpl(e):e,i=r._yuibuild;return i||(i=r._yuibuild={}),i.id=i.id||null,i.exts=i.exts||[],i.dynamic=n,r},_cfg:function(t,n,r){var i=[],s={},o=[],u,a=n&&n.aggregates,f=n&&n.custom,l=n&&n.statics,c=t,h,p;while(c&&c.prototype)u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics))),c=c.superclass?c.superclass.constructor:null;if(r)for(h=0,p=r.length;h<p;h++)c=r[h],u=c._buildCfg,u&&(u.aggregates&&(i=i.concat(u.aggregates)),u.custom&&e.mix(s,u.custom,!0),u.statics&&(o=o.concat(u.statics)));return a&&(i=i.concat(a)),f&&e.mix(s,n.cfgBuild,!0),l&&(o=o.concat(l)),{aggregates:i,custom:s,statics:o}},_clean:function(t,n){var r,i,s,o=e.merge(t),u=n.aggregates,a=n.custom;for(r in a)o.hasOwnProperty(r)&&delete o[r];for(i=0,s=u.length;i<s;i++)r=u[i],o.hasOwnProperty(r)&&delete o[r];return o}}),r.build=function(e,t,n,r){return a(e,t,n,null,null,r)},r.create=function(e,t,n,r,i){return a(e,t,n,r,i)},r.mix=function(e,t){return e._CACHED_CLASS_DATA&&(e._CACHED_CLASS_DATA=null),a(null,e,t,null,null,{dynamic:!1})},n._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}},r._buildCfg={aggregates:u.concat(),custom:{ATTRS:c,_ATTR_CFG:l,_NON_ATTRS_CFG:f}}},"3.11.0",{requires:["base-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("json-stringify",function(e,t){var n=":",r=e.config.global.JSON;e.mix(e.namespace("JSON"),{dateToString:function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+n+t(e.getUTCMinutes())+n+t(e.getUTCSeconds())+"Z"},stringify:function(){return r.stringify.apply(r,arguments)},charCacheThreshold:100})},"3.11.0",{requires:["yui-base"]});
YUI.add("gallery-storage-lite",function(Y){var storageDriver,storageMode,d=Y.config.doc,w=Y.config.win,JSON=Y.JSON,StorageLite=Y.namespace("StorageLite"),DB_NAME="yui_storage_lite",data={};try{if(w.localStorage)storageMode=1;else if(w.globalStorage){storageMode=2;w.globalStorage[w.location.hostname]}else storageMode=w.openDatabase&&-1===navigator.userAgent.indexOf("Chrome")?3:5<=Y.UA.ie?4:0}catch(e){storageMode=0}Y.StorageFullError=function(message){Y.StorageFullError.superclass.constructor.call(message),this.name="StorageFullError",this.message=message||"Maximum storage capacity reached",Y.UA.ie&&(this.description=this.message)},Y.extend(Y.StorageFullError,Error),Y.augment(StorageLite,Y.EventTarget,!0,null,{emitFacade:!0,prefix:"storage-lite",preventable:!1}),StorageLite.publish("ready",{fireOnce:!0}),Y.mix(StorageLite,{clear:function(){},getItem:function(key,json){return null},length:function(){return 0},removeItem:function(key){},setItem:function(key,value){}}),1===storageMode||2===storageMode?(Y.mix(StorageLite,{length:function(){return storageDriver.length},removeItem:function(key){storageDriver.removeItem(key)},setItem:function(key,value,json){storageDriver.setItem(key,json?JSON.stringify(value):value)}},!0),1===storageMode?(storageDriver=w.localStorage,Y.mix(StorageLite,{clear:function(){storageDriver.clear()},getItem:function(key,json){try{return json?JSON.parse(storageDriver.getItem(key)):storageDriver.getItem(key)}catch(ex){return null}}},!0)):2===storageMode&&(storageDriver=w.globalStorage[w.location.hostname],Y.mix(StorageLite,{clear:function(){for(var key in storageDriver)storageDriver.hasOwnProperty(key)&&(storageDriver.removeItem(key),delete storageDriver[key])},getItem:function(key,json){try{return json?JSON.parse(storageDriver[key].value):storageDriver[key].value}catch(ex){return null}}},!0)),StorageLite.fire("ready")):3===storageMode||4===storageMode?(Y.mix(StorageLite,{clear:function(){data={},StorageLite._save()},getItem:function(key,json){return data.hasOwnProperty(key)?data[key]:null},length:function(){var key,count=0;for(key in data)data.hasOwnProperty(key)&&(count+=1);return count},removeItem:function(key){data?(delete data[key],StorageLite._save()):data={}},setItem:function(key,value,json){data[key]=value,StorageLite._save()}},!0),3===storageMode?(storageDriver=w.openDatabase(DB_NAME,"1.0","YUI StorageLite data",1048576),Y.mix(StorageLite,{_save:function(){storageDriver.transaction(function(t){t.executeSql("REPLACE INTO "+DB_NAME+" (name, value) VALUES ('data', ?)",[JSON.stringify(data)])})}},!0),storageDriver.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+DB_NAME+"(name TEXT PRIMARY KEY, value TEXT NOT NULL)"),t.executeSql("SELECT value FROM "+DB_NAME+" WHERE name = 'data'",[],function(t,results){if(results.rows.length)try{data=JSON.parse(results.rows.item(0).value)}catch(ex){data={}}StorageLite.fire("ready")})})):4===storageMode&&((storageDriver=d.createElement("span")).addBehavior("#default#userData"),Y.mix(StorageLite,{_save:function(){var _data=JSON.stringify(data);try{storageDriver.setAttribute("data",_data),storageDriver.save("yui_storage_lite")}catch(ex){throw new Y.StorageFullError}}},!0),Y.on("domready",function(){d.body.appendChild(storageDriver),storageDriver.load("yui_storage_lite");try{data=JSON.parse(storageDriver.getAttribute("data"))}catch(ex){data={}}StorageLite.fire("ready")}))):StorageLite.fire("ready")},"1.0.0",{requires:["event-base","event-custom","event-custom-complex","json"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-event-delegate",function(e,t){e.Node.prototype.delegate=function(t){var n=e.Array(arguments,0,!0),r=e.Lang.isObject(t)&&!e.Lang.isArray(t)?1:2;return n.splice(r,0,this._node),e.delegate.apply(e,n)}},"3.11.0",{requires:["node-base","event-delegate"]});
YUI.add("focus-tracker",function(Y){var textInputExp=/^text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color$/i;function get(){var focused;try{focused=Y.one(document.activeElement)}catch(err){return console.warn("Caught error from document.activeElement",err),!1}return focused}Y.focusTracker={get:get,isInput:function(){var tagName,elt=get();return!!elt&&("INPUT"===(tagName=elt.get("tagName").toUpperCase())?textInputExp.test(elt.get("type")):"TEXTAREA"===tagName||"SELECT"===tagName||void 0)},blur:function(){var elt=get();if(elt&&Y.Lang.isFunction(elt.blur))try{elt.blur()}catch(ex){}}}},"0.0.1",{requires:F.config.modules["focus-tracker"].requires||[],optional:F.config.modules["focus-tracker"].optional||[]});YUI.add("sprintf",function(Y){function str_repeat(i,m){for(var o=[];0<m;o[--m]=i);return o.join("")}Y.sprintf=function(){for(var a,m,p,c,x,i=0,f=arguments[i++],o=[];f;){if(m=/^[^\x25]+/.exec(f))o.push(m[0]);else if(m=/^\x25{2}/.exec(f))o.push("%");else{if(!(m=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(f)))throw"sprintf failure";if(null==(a=arguments[m[1]||i++])||null==a)throw"Too few arguments.";if(/[^s]/.test(m[7])&&"number"!=typeof a)throw"Expecting number but found "+typeof a;switch(m[7]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a);break;case"e":a=m[6]?a.toExponential(m[6]):a.toExponential();break;case"f":a=m[6]?parseFloat(a).toFixed(m[6]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&m[6]?a.substring(0,m[6]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(m[7])&&m[2]&&0<=a?"+"+a:a,c=m[3]?"0"==m[3]?"0":m[3].charAt(1):" ",x=m[5]-String(a).length-"".length,p=m[5]?str_repeat(c,x):"",o.push(""+(m[4]?a+p:p+a))}f=f.substring(m[0].length)}return o.join("")}},"0.0.1");YUI.add("transjax-base",function(Y){var strings={};Y.transjax={add:function(module_name,new_strings){Y.Lang.isObject(strings[module_name])||(strings[module_name]={}),Y.Lang.isObject(new_strings)&&Y.mix(strings[module_name],new_strings)},get:function(){var arguments_arr,module_name,key,string,strings_obj_raw,strings_obj;if(module_name=(arguments_arr=Array.prototype.slice.call(arguments)).shift(),key=arguments_arr.shift(),strings_obj_raw=strings[module_name],1<arguments.length)return Y.Lang.isObject(strings_obj_raw)&&(string=strings_obj_raw[key]),Y.Lang.isUndefined(string)?key:(arguments_arr.unshift(string),Y.sprintf.apply(window,arguments_arr));for(var i in strings_obj={},strings_obj_raw)strings_obj_raw.hasOwnProperty(i)&&(strings_obj[i]=strings_obj_raw[i]);return strings_obj}}},"0.0.1",{requires:["sprintf"]});YUI.add("global-dialog-transjax",function(a){a.transjax.add("global-dialog",{button_confirm:"OKAY",button_cancel:"CANCEL"})},"0.0.1",{requires:["transjax-base"]});YUI.add("better-throttle",function(Y){Y.betterThrottle=function(supplied_function,delay,oScope,only_call_the_last_one){var last,timer;function cancel(){timer&&(timer.cancel(),timer=void 0)}function call_supplied_function(){cancel(),supplied_function.apply(oScope,arguments)}return last=0,oScope=oScope||null,function(){var now=(new Date).getTime();if(only_call_the_last_one)cancel();else if(delay<now-last)return last=now,void call_supplied_function.apply(oScope,arguments);timer=timer||Y.later(delay,oScope,call_supplied_function,arguments)}}},"0.0.1",{requires:[]});YUI.add("keyboard-shortcut-legend-transjax",function(a){a.transjax.add("keyboard-shortcut-legend",{header_no_context:"Keyboard shortcuts for this page",header_context:"Keyboard shortcuts for this view",instructions:"This dialog lists all of the keyboard shortcuts available on this particular page. Press any key on your keyboard to hear what it does.",enable_shortcuts:"Enable keyboard shortcuts",saving:"Saving...",saved:"Saved!",unable_to_save:"Unable to save",button_close:"CLOSE",shortcut_description:"Show all keyboard shortcuts",esc_description:"Close a dialog, like this one",esc_description_screenreader:"(press escape again to close this dialog)",general:"General",navigation:"Navigation",lightbox:"Light Box",map:"Map",actions:"Actions",you_can_reenable_shortcuts_in_prefs:'You can always <a href="/account/prefs/shortcuts/?from=extend">re-enable keyboard shortcuts</a> later in your account settings, under Sharing &amp; Extending.',change_layout:"change",qwerty_layout:"QWERTY layout",spanish_layout:"Spanish layout",qwertz_layout:"QWERTZ layout",azerty_layout:"AZERTY layout",dvorak_layout:"Dvorak layout",spanish:"Spanish",layout_selector_description:"Select a keyboard layout",up_arrow:"Up arrow",down_arrow:"Down arrow",left_arrow:"Left arrow",right_arrow:"Right arrow"})},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend-transjax"].requires||[]});YUI.add("keyboard-shortcut-legend-layouts",function(Y){var qwerty,qwertz,azerty,spanish,dvorak;qwerty=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{keyCode:192,sub:"`",sup:"~"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:"@"},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"^"},{keyCode:55,sub:"7",sup:"&"},{keyCode:56,sub:"8",sup:"*"},{keyCode:57,sub:"9",sup:"("},{keyCode:48,sub:"0",sup:")"},{keyCode:189,sub:"-",sup:"_"},{keyCode:187,sub:"=",sup:"+"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{keyCode:219,sub:"[",sup:"{"},{keyCode:221,sub:"]",sup:"}"},{keyCode:220,sub:"\\",sup:"|"}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:186,sub:";",sup:":"},{keyCode:222,sub:"'",sup:'"'},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:90,sub:"Z",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:"<"},{keyCode:190,sub:".",sup:">"},{keyCode:191,sub:"/",sup:"?"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]],spanish=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"<",sup:">"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:'"'},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"&"},{keyCode:55,sub:"7",sup:"/"},{keyCode:56,sub:"8",sup:"("},{keyCode:57,sub:"9",sup:")"},{keyCode:48,sub:"0",sup:"="},{keyCode:222,sub:"'",sup:"?"},{sub:"",sup:""},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"`",sup:"^"},{keyCode:107,sub:"+",sup:"*"},{sub:"",sup:""}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{sub:"",sup:""},{sub:"",sup:""},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:90,sub:"Z",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:";"},{keyCode:190,sub:".",sup:":"},{keyCode:109,sub:"-",sup:"_"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]],qwertz=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"^",sup:""},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:'"'},{keyCode:51,sub:"3",sup:""},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"&"},{keyCode:55,sub:"7",sup:"/"},{keyCode:56,sub:"8",sup:"("},{keyCode:57,sub:"9",sup:")"},{keyCode:48,sub:"0",sup:"="},{keyCode:191,sub:"",sup:"?"},{sub:"",sup:"`"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:"@"},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"",sup:""},{keyCode:107,sub:"+",sup:"*"},{keyCode:13,sub:"return",sup:"",className:"return-top"},{keyCode:13,sub:"",sup:"",className:"return-middle"}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{sub:"",sup:""},{sub:"",sup:""},{sub:"#",sup:"'"},{keyCode:13,sub:"",sup:"",className:"return"}],[{sub:"<",sup:">"},{keyCode:89,sub:"Y",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:";"},{keyCode:190,sub:".",sup:":"},{keyCode:109,sub:"_",sup:"-"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]],azerty=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"2",sup:"",className:"small-text"},{keyCode:49,sub:"1",sup:"&"},{keyCode:50,sub:"2",sup:""},{keyCode:51,sub:"3",sup:'"'},{keyCode:52,sub:"4",sup:"'"},{keyCode:53,sub:"5",sup:"("},{keyCode:54,sub:"6",sup:"-"},{keyCode:55,sub:"7",sup:""},{keyCode:56,sub:"8",sup:"_"},{keyCode:57,sub:"9",sup:""},{keyCode:48,sub:"0",sup:""},{sub:"",sup:")"},{keyCode:109,sub:"+",sup:"="},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:65,sub:"A",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"",sup:"^"},{sub:"$",sup:""},{keyCode:13,sub:"return",sup:"",className:"return-top"},{keyCode:13,sub:"",sup:"",className:"return-middle"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:77,sub:"M",sup:""},{sub:"",sup:"%"},{sub:"*",sup:""},{keyCode:13,sub:"",sup:"",className:"return"}],[{sub:"<",sup:">"},{keyCode:87,sub:"W",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:188,sub:",",sup:"?"},{keyCode:59,sub:";",sup:"."},{keyCode:191,sub:":",sup:"/"},{sub:"!",sup:""},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]],dvorak=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{keyCode:192,sub:"`",sup:"~"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:"@"},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"^"},{keyCode:55,sub:"7",sup:"&"},{keyCode:56,sub:"8",sup:"*"},{keyCode:57,sub:"9",sup:"("},{keyCode:48,sub:"0",sup:")"},{keyCode:219,sub:"[",sup:"{"},{keyCode:221,sub:"]",sup:"}"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:222,sub:"'",sup:'"'},{keyCode:188,sub:",",sup:"<"},{keyCode:190,sub:".",sup:">"},{keyCode:80,sub:"P",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:191,sub:"/",sup:"?"},{keyCode:187,sub:"=",sup:"+"},{keyCode:220,sub:"\\",sup:"|"}],[{keyCode:65,sub:"A",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:189,sub:"-",sup:"_"},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:186,sub:";",sup:":"},{keyCode:81,sub:"Q",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]],Y.keyboardShortcutLegendLayouts={qwerty:qwerty,spanish:spanish,qwertz:qwertz,azerty:azerty,dvorak:dvorak}},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend-layouts"].requires||[],optional:F.config.modules["keyboard-shortcut-legend-layouts"].optional||[]});YUI.add("page-context",function(Y){var contexts=[""];Y.PageContext={set:function(name){return contexts[contexts.length-1]!==name&&(contexts.push(name),Y.fire("PageContext:set",{newVal:name,oldVal:contexts[contexts.length-2]||""}),!0)},unset:function(name){var i;for(i=contexts.length-1;0<i;i-=1)if(contexts[i]===name)return contexts.splice(i,1),Y.fire("PageContext:unset",{newVal:contexts[contexts.length-1]||"",oldVal:name}),!0;return!1},get:function(){return contexts[contexts.length-1]}}},"0.0.1",{requires:F.config.modules["page-context"].requires||[],optional:F.config.modules["page-context"].optional||[]});YUI.add("global-dialog",function(Y){Y.global_dialog=new function(){var self=this,emulate_position_fixed=Y.UA.ie&&(Y.UA.ie<7||void 0!==document.documentMode&&5===document.documentMode||!document.compatMode.match(/css1compat/i))||navigator.userAgent.match(navigator.userAgent.match(/Version\/[1234]\s/i));Y.UA.ie&&Y.UA.ie;this.spinner=null,this.is_modal=!1,this.events_on=!1,this.o_shadows=null,this.is_showing=!1,this.style=void 0===Y.config||void 0===Y.config.flickr||Y.config.flickr.is_zeus?"default":"style_2009",this.last_style=null,this.on_escape_handler=null,this.esc_to_close=!0,this.o=null,this.o_container=null,this.o_cover=null,this.timestamp=null,this.get_elements=function(){return self.o_cover||(self.o_cover=Y.one("#global-dialog-background")),!(!self.o||!self.o_container)||(self.o=Y.one("#global_dialog"),!!self.o&&(self.o_container=self.o.one("div.global_dialog_container"),self.o?(self.o_shadows={left:Y.one("div.shadow_l"),right:Y.one("div.shadow_r")},!0):void 0))},this.reposition=function(){var shadow_height,bgY;if(emulate_position_fixed&&(bgY=window.innerWidth?(window.pageXOffset,window.pageYOffset):(document.body.scrollLeft,document.body.scrollTop)),!self.get_elements())return emulate_position_fixed&&(self.spinner&&(self.spinner.style.top=bgY+parseInt((document.documentElement.clientHeight||document.body.clientHeight)/2,10)+"px"),self.position_cover()),!1;(shadow_height=parseInt(self.o_container.get("offsetHeight"),10))&&self.o_shadows&&self.o_shadows.left&&self.o_shadows.right&&(self.o_shadows.left.setStyle("height",shadow_height+"px"),self.o_shadows.right.setStyle("height",shadow_height+"px")),self.o.setStyle("marginLeft",-self.o.get("offsetWidth")/2+"px"),self.o.setStyle("marginTop",-self.o.get("offsetHeight")/2+"px"),self.o.setStyle("left","50%"),self.o.setStyle("top","50%"),emulate_position_fixed&&self.o.setStyle("top",bgY+parseInt((document.documentElement.clientHeight||document.body.clientHeight)/2,10)+"px")},this.show=function(params){if(void 0!==params&&void 0!==params.loading&&self.set_loading(!!params.loading),!self.get_elements())return!1;params&&!1===params.esc_to_close?this.esc_to_close=!1:this.esc_to_close=!0,void 0!==params?(void 0===params.modal||void 0!==params.modal&&!1!==params.modal?self.set_modal(!0):self.set_modal(!1),void 0!==params.style?self.set_style(params.style):self.set_style(self.style),void 0!==params.width&&self.set_width(params.width),self.set_short_message_style(void 0!==params.short_message&&params.short_message)):self.set_modal(!0),self.is_showing||(params&&void 0!==params.left?(self.o.setStyle("left",params.left),self.o.setStyle("top",params.top),self.o.setStyle("display","block")):(self.o.setStyle("left","-9999px"),self.o.setStyle("top","-9999px"),self.o.setStyle("display","block"),self.reposition()),self.is_showing=!0)},this.hide=function(o_options){if(Y.focusTracker&&Y.focusTracker.isInput()&&Y.focusTracker.blur(),self.set_modal(),emulate_position_fixed&&self.detach_events(),self.detach_key_events(),o_options&&o_options.loading?self.set_loading(!0):self.set_loading(!1),!self.get_elements())return!1;self.is_showing&&(self.o.setStyle("display","none"),self.is_showing=!1),self.on_escape_handler=null,self.modal_remove_handler&&self.modal_remove_handler.detach&&self.modal_remove_handler.detach(),self.modal_remove_key_handler&&self.modal_remove_key_handler.detach&&self.modal_remove_key_handler.detach()},this.set_width=function(n_width){if(!self.get_elements())return!1;n_width?(self.o.setStyle("width","auto"),self.o_container.setStyle("width",n_width+("auto"===n_width?"":"px"))):(self.o.setStyle("width","auto"),self.o_container.setStyle("width",Y.UA.ie&&Y.UA.ie<7?"334px":"320px")),self.reposition()},this.set_style=function(s_style){if(!self.get_elements())return!1;self.last_style&&self.o.removeClass(self.last_style),s_style&&self.o.addClass(s_style),self.last_style=s_style,self.reposition()},this.set_short_message_style=function(use_style){if(self.use_short_message_style=use_style,!self.get_elements())return!1;self.o.removeClass("style_2009"),use_style?(self.o.removeClass("global_dialog"),self.o.addClass("global-dialog-short-msg"),self.is_modal&&(self.modal_remove_handler=self.o_cover.once("click",function(){self.hide()}),self.modal_remove_key_handler=Y.once("key",function(){Y.keyboardShortcutManager.isEnabled()&&this.esc_to_close&&(Y.PageContext&&Y.PageContext.unset(Y.PageContext.get()),self.hide())},window,"down:13,27"))):(self.o.removeClass("global-dialog-short-msg"),self.o.addClass("global_dialog")),self.reposition()},this.set_spinner=function(b_modal){b_modal?(self.spinner||(self.spinner=document.createElement("div"),self.spinner.className="global_dialog_spinner",document.body.appendChild(self.spinner),emulate_position_fixed&&self.position_cover()),self.spinner.style.display="block"):self.spinner&&(self.spinner.style.display="none")},this.set_modal=function(b_modal){if(self.is_modal=b_modal,!self.o_cover)return!1;if(b_modal){emulate_position_fixed?(self.o_cover.setStyle("position","absolute"),self.position_cover(),self.attach_events()):self.o_cover.setStyle("position","fixed"),self.attach_key_events();self.o_cover.setStyle("backgroundColor","#000"),self.o_cover.setStyle("opacity",.35),self.o_cover.setStyle("MozOpacity",.35),self.o_cover.setStyle("filter","alpha(opacity=35)"),self.o_cover.setStyle("display","block")}else self.o_cover.setStyle("position","absolute"),self.o_cover.setStyle("display","none"),self.detach_events(),self.detach_key_events()},this.set_loading=function(b_loading){if(!self.o_cover)return!1;b_loading?(self.set_spinner(b_loading),self.o_cover.removeClass("loaded"),self.o_cover.addClass("loading"),self.is_modal||self.set_modal(!0)):(self.set_spinner(b_loading),self.o_cover.removeClass("loading"),self.o_cover.addClass("loaded"),self.is_modal&&self.set_modal(!1))},this.set_aria=function(attrs){attrs&&"object"==typeof attrs&&(attrs["aria-labelledby"]&&self.o.setAttribute("aria-labelledby",attrs["aria-labelledby"]),attrs["aria-describedby"]&&self.o.setAttribute("aria-describedby",attrs["aria-describedby"]))},this.remove_existing_dialog=function(){if(self.o)try{return self.o._node.parentNode.removeChild(self.o._node),!(self.o=null)}catch(e){return!1}},this.create_dialog=function(innerHTML,o_options){self.o&&(self.remove_existing_dialog(),self.o=null),self.timestamp=(new Date).getTime(),self.last_style=null,self.is_showing=!1;var o=document.createElement("div");document.body.appendChild(o),self.o=Y.one(o),self.o.set("id","global_dialog"),self.o.set("className","global_dialog"),self.o.setAttribute("role","dialog");var admin_maximizer="";return Y.config.flickr.flags.enable_global_dialog_maximizer&&(Y.log("assign maximizer handler"),self.o.on("click",function(e){e.target.test(".global-dialog-admin-maximizer a")&&(e.preventDefault(),self.o.addClass("global-dialog-maximized"))}),admin_maximizer='<div class="global-dialog-admin-maximizer">admins only: <a href="#">maximize global dialog</a></div>'),self.o.set("innerHTML",'<div id="global-dialog-container" class="global_dialog_container"><div class="wrapper">'+innerHTML+"</div>"+admin_maximizer+"</div>"),self.o_container=null,self.get_elements(),o_options&&o_options.style?self.set_style(o_options.style):self.set_style(self.style),o_options&&o_options.width?self.set_width(o_options.width):self.set_width(),self},this.create_confirmation_dialog=function(msg,callback,config_overrides){var hd_msg,bd_msg,ft_msg,config,photo_html,checkbox_html,html,confirm_id,cancel_id,event_handle,confirm_button_html;Y.Lang.isObject(msg)?(hd_msg=Y.Lang.isString(msg.hd)?msg.hd:"",bd_msg=Y.Lang.isString(msg.bd)?msg.bd:"",ft_msg=Y.Lang.isString(msg.ft)?msg.ft:""):bd_msg=Y.Lang.isString(msg)?msg:"",config={CONFIRM:Y.transjax.get("global-dialog","button_confirm"),CANCEL:Y.transjax.get("global-dialog","button_cancel"),width:330,loading:!1,modal:!0,confirm_butt_class:"Butt",cancel_butt_class:"CancelButt",checkboxes:[],photo:{},scope:window},Y.Lang.isObject(config_overrides)||(config_overrides={}),config=Y.mix(config_overrides,config),confirm_id=Y.guid(),cancel_id=Y.guid(),photo_html="",config.photo&&config.photo.url&&(photo_html='<div class="photo_container"><img src="'+config.photo.url+'"'+(config.photo.width?' width="'+config.photo.width+'"':"")+(config.photo.height?' height="'+config.photo.height+'"':"")+"></div>"),checkbox_html="",config.checkboxes.length&&Y.Array.each(config.checkboxes,function(label){checkbox_html+='<div><label><input type="checkbox">&nbsp; '+label+"</label></div>"}),confirm_button_html=' <input type="button" class="'+config.confirm_butt_class+'" value="'+config.CONFIRM+'" id="'+confirm_id+'">',"BigAssButt"===config.confirm_butt_class&&(confirm_button_html=' <a href="#" class="'+config.confirm_butt_class+'" id="'+confirm_id+'"><span></span>'+config.CONFIRM+"</a>"),html=(hd_msg?'<div class="hd">'+hd_msg+"</div>":"")+'<div class="bd">'+bd_msg+photo_html+checkbox_html+'</div><div class="bd button_container confirmation_button_container">'+confirm_button_html+' <input type="button" class="'+config.cancel_butt_class+'" value="'+config.CANCEL+'" id="'+cancel_id+'"></div>'+(ft_msg?'<div class="ft">'+ft_msg+"</div>":""),Y.global_dialog.remove_existing_dialog(),Y.global_dialog.create_dialog(html,config).show(config),event_handle=Y.delegate("click",function(e){var confirmed,extra;confirmed=e.target.get("id")===confirm_id,extra={},config.checkboxes.length&&(extra.checkboxes=[],self.o_container.all('input[type="checkbox"]').each(function(node){extra.checkboxes.push(node.get("checked"))})),Y.global_dialog.hide(),Y.Lang.isFunction(callback)&&callback.apply(config.scope,[confirmed,extra]),e.preventDefault(),event_handle.detach()},self.o_container,'.button_container input[type="button"], .button_container a.BigAssButt')},this.create_alert_dialog=function(msg,callback,config_overrides){var config,html,confirm_id;config={CONFIRM:Y.transjax.get("global-dialog","button_confirm"),width:330,loading:!1,modal:!0},Y.Lang.isObject(config_overrides)||(config_overrides={}),config=Y.mix(config_overrides,config),confirm_id=Y.guid(),html='<div class="hd">'+msg+'</div><div class="bd button_container"> <input type="button" class="Butt" value="'+config.CONFIRM+'" id="'+confirm_id+'"></div>',Y.global_dialog.remove_existing_dialog(),Y.global_dialog.create_dialog(html,config).show(config),Y.delegate("click",function(){Y.global_dialog.hide(),Y.Lang.isFunction(callback)&&callback.apply(window,[!0])},this.o_container,"#"+confirm_id)},this.position_cover=function(o_element){var bgX,bgY;o_element=o_element||Y.one(self.o_cover),self.get_elements(),o_element&&(bgY=window.innerWidth?(bgX=window.pageXOffset,window.pageYOffset):(bgX=document.body.scrollLeft,document.body.scrollTop),o_element.setStyle("width","100%"),o_element.setStyle("height",Y.one("body").get("offsetHeight")+"px"),o_element.setStyle("top",bgY+"px"),o_element.setStyle("left",bgX+"px"))},this.legacy_resize_handler=function(){self.reposition(),self.position_cover()},this.legacy_scroll_handler=function(){self.reposition(),self.position_cover()},this.key_handler=function(e){if(Y.keyboardShortcutManager.isEnabled()&&27===(e.which||e.keyCode)){if(!this.esc_to_close)return;Y.PageContext&&Y.PageContext.unset(Y.PageContext.get()),self.hide()}},this.attach_events=function(){if(self.events_on)return!1;self.events_on=!0,Y.UA.ios||(self.resize_event_handle=Y.on("resize",self.legacy_resize_handler,window,self,!0),self.scroll_event_handle=Y.on("scroll",self.legacy_scroll_handler,window,self,!0))},this.attach_key_events=function(){self.key_event_handle=Y.on("key",self.key_handler,window,"up:27",self,!0)},this.detach_events=function(){if(!self.events_on)return!1;self.events_on=!1,self.resize_event_handle&&self.resize_event_handle.detach(),self.scroll_event_handle&&self.scroll_event_handle.detach()},this.detach_key_events=function(){self.key_event_handle&&self.key_event_handle.detach()},this.get_elements()}},"0.0.1",{requires:F.config.modules["global-dialog"].requires||[],optional:F.config.modules["global-dialog"].optional||[]});YUI.add("keyboard-shortcut-legend",function(Y){var modalHTML,checkbox,spinnerStart,layout,keys,allkeyNodes,allShortcutNodes,keyHandle,focusedKey,shortcutsShouldBeReenabled,windowResizeHandler,initialized=!1,contextName="keyboard-shortcut-legend",modalHTMLCache={},showing=!1,disabled=!1,minSpinnerDuration=2e3,cookieName="keylayout",escCount=0,fitsInViewport=!0,layoutChanged=!1,minWindowWidth=890,minWindowHeight=584,shortcuts=[],groups=[Y.transjax.get("keyboard-shortcut-legend","navigation"),Y.transjax.get("keyboard-shortcut-legend","actions"),Y.transjax.get("keyboard-shortcut-legend","lightbox"),Y.transjax.get("keyboard-shortcut-legend","map"),Y.transjax.get("keyboard-shortcut-legend","general")];function init(){Y.all(".keyboard-shortcut-legend-trigger").on("click",show),layout=Y.Cookie.get(cookieName)||function(){var bestLayout="qwerty";Y.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts&&("de-de"===Y.config.flickr.lang?bestLayout="qwertz":"fr-fr"===Y.config.flickr.lang?bestLayout="azerty":"es-us"===Y.config.flickr.lang&&(bestLayout="spanish"));return bestLayout}(),initialized=!0}function show(e){var currentContext=Y.PageContext.get(),sortedGroups={};showing?hide(e):(keys=Y.keyboardShortcutLegendLayouts[layout],""!==currentContext&&"lightbox"!==currentContext&&"flickrMap"!==currentContext&&(Y.PageContext.unset(currentContext),currentContext=Y.PageContext.get()),Y.Array.each(shortcuts,function(shortcut,i){shortcut.context!==currentContext&&"*"!==shortcut.context||Y.Array.each(groups,function(group,j){shortcut.group===group&&(sortedGroups[group]||(sortedGroups[group]=[]),sortedGroups[group].push(shortcut))})}),Y.Array.each(groups,function(group,i){sortedGroups[group]&&sortedGroups[group].sort(shortcutSort)}),modalHTMLCache[currentContext+layout]?modalHTML=modalHTMLCache[currentContext+layout]:(modalHTML='<div class="hd keyboard-shortcut-legend-hd"><h2 id="keyboard-shortcut-legend-header">'+Y.transjax.get("keyboard-shortcut-legend","header_"+(""===currentContext?"no_context":"context"))+'</h2><label class="killswitch-container"><span class="spinner">'+Y.transjax.get("keyboard-shortcut-legend","saving")+'</span><span class="success"><span class="msg-icon"></span>'+Y.transjax.get("keyboard-shortcut-legend","saved")+'</span><span class="alert"><span class="msg-icon"></span>'+Y.transjax.get("keyboard-shortcut-legend","unable_to_save")+'</span><input type="checkbox" class="killswitch" tabindex="1" checked>'+Y.transjax.get("keyboard-shortcut-legend","enable_shortcuts")+'</label><a href="#" class="keyboard-shortcut-legend-close"></a></div><div class="bd keyboard-shortcut-legend-bd '+layout+'-layout"><p id="keyboard-shortcut-legend-instructions" class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","instructions")+"</p>",Y.Array.each(keys,function(row,i){modalHTML+='<ul class="keyboard-row row-'+i+'">',Y.Array.each(row,function(key){modalHTML+="<li"+(key.className?' class="'+key.className+'"':"")+' id="key-'+key.keyCode+'"><span class="key-container"><a href="#" class="key-height" role="button" tabindex="-1"><span class="key">'+(key.sup?'<span class="sup">'+key.sup+"</span>":"")+(key.sub?'<span class="sub">'+key.sub+"</span>":"")+"</span></a></span></li>"}),modalHTML+="</ul>"}),Y.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts&&(modalHTML+='<div class="layout-tools"><span class="layout-description show"><span class="selected-layout">'+Y.transjax.get("keyboard-shortcut-legend",layout+"_layout")+'</span> (<a href="#" class="layout-change" role="button" tabindex="1">'+Y.transjax.get("keyboard-shortcut-legend","change_layout")+'</a>)</span><span id="layout-selector-desc" class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","layout_selector_description")+'</span><select class="layout-selector" aria-label="layout-selector-desc"><option value="qwerty"'+("qwerty"===layout?" selected":"")+'>QWERTY</option><option value="spanish"'+("spanish"===layout?" selected":"")+">"+Y.transjax.get("keyboard-shortcut-legend","spanish")+'</option><option value="qwertz"'+("qwertz"===layout?" selected":"")+'>QWERTZ</option><option value="azerty"'+("azerty"===layout?" selected":"")+'>AZERTY</option><option value="dvorak"'+("dvorak"===layout?" selected":"")+">Dvorak</option></select></div>"),modalHTML+='<hr><div class="shortcuts" role="document">',Y.Array.each(groups,function(group,i){sortedGroups[group]&&(modalHTML+='<div class="group"><h4>'+group+"</h4><ul>",Y.Array.each(sortedGroups[group],function(shortcut,j){modalHTML+='<li id="shortcut-'+i+"-"+j+'"><kbd'+("&larr;"===shortcut.key||"&rarr;"===shortcut.key?' class="arrow"':"")+">"+shortcut.key+'</kbd><span id="shortcut-'+i+"-"+j+'-desc">'+shortcut.description+"</span></li>"}),modalHTML+="</ul></div>")}),modalHTML+='</div><div class="mask"></div></div>',modalHTMLCache[currentContext+layout]=modalHTML),fitsInViewport=Y.DOM.winHeight()>minWindowHeight&&Y.DOM.winWidth()>minWindowWidth,Y.PageContext.set(contextName),Y.global_dialog.remove_existing_dialog(),Y.global_dialog.create_dialog(modalHTML,{width:fitsInViewport?842:633}).show({loading:!1,modal:!0}),Y.global_dialog.set_aria({"aria-labelledby":"keyboard-shortcut-legend-header","aria-describedby":"keyboard-shortcut-legend-instructions"}),showing=!0,(checkbox=Y.one(".keyboard-shortcut-legend-hd .killswitch")).set("checked",Y.config.flickr.flags.enable_keyboard_shortcuts),layoutChanged?(layoutChanged=!1,Y.one(".keyboard-shortcut-legend-bd .layout-tools .layout-change").focus()):checkbox.focus(),toggleDisabledOverlay(checkbox,!0),fitsInViewport||(Y.one(".keyboard-shortcut-legend-bd").addClass("mini"),Y.global_dialog.reposition()),Y.Array.each(groups,function(group,i){sortedGroups[group]&&Y.Array.each(sortedGroups[group],function(shortcut,j){var shortcutNode=Y.one("#shortcut-"+i+"-"+j),shortcutCanBeUsed=!1;Y.Array.each(shortcut.keyCodes,function(keyCode){var keyNode=Y.one("#key-"+keyCode);keyNode&&(shortcutCanBeUsed=!0,keyNode.addClass("highlight"),keyNode.on(["focus","mouseover"],function(e){removeAllHighlights({blur:"mouseover"===e.type}),shortcutNode.addClass("highlight")}),keyNode.on(["blur","mouseout"],function(e){removeAllHighlights()}),shortcutNode.on("mouseover",function(e){removeAllHighlights(),keyNode.addClass("super-highlight")}),shortcutNode.on("mouseout",function(e){removeAllHighlights()}),keyNode.one("a.key-height").setAttribute("aria-describedby",shortcutNode.get("id")+"-desc"))}),shortcutCanBeUsed||shortcutNode.remove()})}),allkeyNodes=Y.all(".keyboard-shortcut-legend-bd .keyboard-row li"),allShortcutNodes=Y.all(".keyboard-shortcut-legend-bd .shortcuts li"),Y.once("click",hide,".keyboard-shortcut-legend-close"),Y.keyboardShortcutManager.register({keystring:"27",handler:hide,context:contextName}),Y.all(".keyboard-shortcut-legend-bd a.key-height").on("click",function(e){e.preventDefault()}),Y.all(".keyboard-shortcut-legend-hd .killswitch").on("click",function(e){toggleDisabledOverlay(e.target)}),Y.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts&&(Y.all(".keyboard-shortcut-legend-bd .layout-change").on("click",showLayoutSelector),Y.all(".keyboard-shortcut-legend-bd .layout-selector").on("change",handleLayoutChange)),windowResizeHandler=Y.on("resize",Y.betterThrottle(checkWindowSize,50)),Y.config.flickr.flags.enable_keyboard_shortcuts&&(shortcutsShouldBeReenabled=!0,Y.keyboardShortcutManager.disable(),attachKeyHandler()),e&&e.preventDefault&&e.preventDefault())}function shortcutSort(a,b){return a.order>b.order?1:b.order>a.order?-1:0}function removeAllHighlights(attr){(attr=attr||{}).blur&&focusedKey&&"function"==typeof focusedKey.blur&&(focusedKey.blur(),focusedKey=null),allkeyNodes.removeClass("super-highlight"),allShortcutNodes.removeClass("highlight")}function checkWindowSize(e){(Y.DOM.winHeight()>minWindowHeight&&Y.DOM.winWidth()>minWindowWidth)!==fitsInViewport&&(hide(),show())}function hideSpinner(success){var elapsedDuration=(new Date).getTime()-spinnerStart;minSpinnerDuration<=elapsedDuration||!success?(Y.one(".keyboard-shortcut-legend-hd .spinner").removeClass("show"),showApiStatus(success)):setTimeout(function(){Y.one(".keyboard-shortcut-legend-hd .spinner").removeClass("show"),showApiStatus(success)},minSpinnerDuration-elapsedDuration)}function toggleDisabledOverlay(checkbox,skipApi){var modalBody=Y.one(".keyboard-shortcut-legend-bd"),maskNode=Y.one(".keyboard-shortcut-legend-bd .mask");skipApi||(hideApiStatus(),Y.one(".keyboard-shortcut-legend-hd .spinner").addClass("show"),spinnerStart=(new Date).getTime()),checkbox.get("checked")?(maskNode&&maskNode.setStyle("display","none"),skipApi||function(callback){callback=callback||function(){};Y.flickrAPI.callMethod("flickr.prefs.setPrefs",{disable_keyboard_shortcuts:0},{success:function(){shortcutsShouldBeReenabled=!(disabled=!1),attachKeyHandler(),callback(!0)},failure:function(){callback(!1)}})}(function(rsp){hideSpinner(rsp),rsp||(maskNode&&maskNode.setStyle("display","block"),Y.keyboardShortcutManager.disable(),checkbox.set("checked",!1))})):(maskNode.setStyle("width",modalBody.get("offsetWidth")),maskNode.setStyle("height",modalBody.get("offsetHeight")),maskNode.setStyle("display","block"),skipApi||function(callback){callback=callback||function(){};Y.flickrAPI.callMethod("flickr.prefs.setPrefs",{disable_keyboard_shortcuts:1},{success:function(){shortcutsShouldBeReenabled=!(disabled=!0),detachKeyHandler(),callback(!0)},failure:function(){callback(!1)}})}(function(rsp){hideSpinner(rsp),rsp||(maskNode.setStyle("display","none"),Y.keyboardShortcutManager.enable(),checkbox.set("checked",!0))}))}function showApiStatus(success){Y.one(success?".keyboard-shortcut-legend-hd .success":".keyboard-shortcut-legend-hd .alert").addClass("show"),setTimeout(hideApiStatus,minSpinnerDuration)}function hideApiStatus(){Y.all(".keyboard-shortcut-legend-hd .success, .keyboard-shortcut-legend-hd .alert").removeClass("show")}function showLayoutSelector(e){Y.one(".keyboard-shortcut-legend-bd .layout-description").removeClass("show"),Y.one(".keyboard-shortcut-legend-bd .layout-selector").addClass("show").focus(),e&&"function"==typeof e.preventDefault&&e.preventDefault()}function handleLayoutChange(e){var options;layout=e.target.get("value"),options={domain:".flickr.com",path:"/",expires:new Date((new Date).getTime()+31536e7)},Y.Cookie.set(cookieName,layout,options),layoutChanged=!0,hide(),show()}function handleKeys(e){var keyNode;if(32===e.keyCode&&e.target.test(".keyboard-shortcut-legend-bd .layout-tools .layout-change"))showLayoutSelector(e);else if(!(Y.focusTracker.isInput()||e.altKey||e.ctrlKey||e.metaKey||9===e.keyCode||Y.one(".keyboard-shortcut-legend-bd .layout-tools").contains(e.target)))return 27===e.keyCode&&escCount++,1<escCount?(hide(),escCount=0):(keyNode=Y.one("#key-"+e.keyCode))&&(focusedKey=keyNode.one("a.key-height")).focus(),void e.preventDefault()}function attachKeyHandler(){keyHandle=Y.on("key",handleKeys,"html","down:")}function detachKeyHandler(){keyHandle&&"function"==typeof keyHandle.detach&&keyHandle.detach()}function hide(e){Y.global_dialog.remove_existing_dialog(),Y.global_dialog.hide(),Y.PageContext.unset(contextName),windowResizeHandler.detach(),detachKeyHandler(),shortcutsShouldBeReenabled&&Y.keyboardShortcutManager.enable(),showing=!1,disabled&&Y.global_dialog.create_alert_dialog('<span class="reenable-msg">'+Y.transjax.get("keyboard-shortcut-legend","you_can_reenable_shortcuts_in_prefs")+"</span>",Y.global_dialog.hide,{width:280}),e&&e.preventDefault&&e.preventDefault()}function register(params){initialized||init(),params.context||(params.context=""),params.group||(params.group=Y.transjax.get("keyboard-shortcut-legend","general")),params.order||0===params.order||(params.order=50),shortcuts.push(params)}Y.keyboardShortcutLegend={show:show,hide:hide,register:register},register({keyCodes:[191,109],key:"?",description:Y.transjax.get("keyboard-shortcut-legend","shortcut_description"),context:"*",order:0}),register({keyCodes:[27],key:"esc",description:Y.transjax.get("keyboard-shortcut-legend","esc_description")+' <span class="obscured">'+Y.transjax.get("keyboard-shortcut-legend","esc_description_screenreader")+"</span>",context:"*",order:1})},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend"].requires||[],optional:F.config.modules["keyboard-shortcut-legend"].optional||[]});YUI.add("keyboard-shortcut-manager",function(Y){var context,handle,default_modifiers,listeners=[],enabled=!1,ua=Y.UA,running=!1;function handleKeys(e){var current_modifiers=Y.merge(default_modifiers,{}),modifiers_ok=!0;enabled&&(context=Y.PageContext.get(),Y.focusTracker.isInput()||(e.altKey&&(current_modifiers.altKey=!0),e.ctrlKey&&(current_modifiers.ctrlKey=!0),e.metaKey&&(current_modifiers.metaKey=!0),e.shiftKey&&(current_modifiers.shiftKey=!0),listeners[e.keyCode]&&Y.Object.each(listeners[e.keyCode],function(value,guid,arr){modifiers_ok=!0,Y.Object.each(value.modifiers,function(modifier_value,modifier_guid,modifier_obj){modifiers_ok&&modifier_value!==current_modifiers[modifier_guid]&&(modifiers_ok=!1)}),modifiers_ok&&("*"===value.context[0]||-1<Y.Array.indexOf(value.context,context))&&value.handler.call(value.scope,e)},this)))}function register(keystring,handler,context,scope,modifiers){var params,legend,keyArray,len,o,guid,i,key;for("object"==typeof keystring&&(legend=(params=keystring).legend,keystring=params.keystring,handler=params.handler,context=params.context,scope=params.scope,modifiers=params.modifiers),modifiers=Y.merge(default_modifiers,modifiers),Y.Lang.isString(context)&&(context=[context]),running||function(){F&&F.keyListener?enabled=!(!F.keyListener.enabled||!Y.config.flickr.flags.enable_keyboard_shortcuts):(ua.gecko||531<ua.webkit||7<ua.ie||11<ua.opera)&&Y.config.flickr.flags.enable_keyboard_shortcuts&&(enabled=!0);enabled&&(handle=Y.on("key",handleKeys,"html","down:"));running=!0,enabled&&Y.config.flickr.flags.enable_keyboard_shortcut_legend&&Y.keyboardShortcutLegend&&Y.keyboardShortcutLegend.show&&(register({keystring:"191,109",handler:Y.keyboardShortcutLegend.show,context:"*"}),register({keystring:"191",handler:Y.keyboardShortcutLegend.show,context:"*",modifiers:{shiftKey:!0}}))}(),keyArray=keystring.split(","),len=keyArray.length,o=scope||window,guid=Y.guid(),F&&F.keyListener&&F.keyListener.detach(keyArray),i=0;i<len;i++)key=parseInt(keyArray[i],10),listeners[key]||(listeners[key]={}),listeners[key][guid]={handler:handler,context:context,modifiers:modifiers,scope:o};return Y.config.flickr.flags.enable_keyboard_shortcut_legend&&Y.keyboardShortcutLegend&&Y.keyboardShortcutLegend.register&&legend&&Y.Array.each(context,function(ctx){var newLegend=Y.clone(legend,!0);newLegend.keyCodes=keyArray,newLegend.context=ctx,Y.keyboardShortcutLegend.register(newLegend)}),{detach:function(){for(i=0;i<len;i++)key=parseInt(keyArray[i],10),listeners[key]&&listeners[key][guid]&&(listeners[key][guid]=void 0,delete listeners[key][guid])}}}default_modifiers={altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1},Y.keyboardShortcutManager={register:register,isEnabled:function(){return enabled},disable:function(){enabled=!1,Y.config.flickr.flags.enable_keyboard_shortcuts=!1},enable:function(){enabled=!0,Y.config.flickr.flags.enable_keyboard_shortcuts=!0},destroy:function(){running=enabled=!1,handle&&handle.detach()}}},"0.0.1",{requires:F.config.modules["keyboard-shortcut-manager"].requires});YUI.add("occult",function(Y){if(void 0===window.FLICKR){window.FLICKR={};var F=window.FLICKR}Y.occult={register:function(name,value){!function(){var i,j,d,a=arguments,o=null;for(i=0;i<a.length;i+=1)for(d=(""+a[i]).split("."),o=FLICKR,j="FLICKR"==d[0]?1:0;j<d.length;j+=1)o[d[j]]=o[d[j]]||{},o=o[d[j]]}(name);for(var arr=name.split("."),len=arr.length,workpoint=FLICKR,i=0;i<arr.length-1;i++)workpoint=workpoint[arr[i]];workpoint[arr[len-1]]=value},get:function(name,value){return F[name]}}},"0.0.1",{});YUI.add("urls",function(Y){var regexes={photo:/^\/photos\/([^\/]+)\/(\d+)(?:\/in\/([^\/]+))?(?:(?:\/page(\d+))|(?:\/(lightbox))|(?:\/(tour)))?/,photostream:/^\/photos\/([^\/]+)(?:\/page(\d+))?(?:\/with\/(\d+))?\/?(lightbox\/?)?/,delete_photo:/^\/photos\/([^\/]+)\/?\?delete=(\d+)(?:&context=([^&]+))?/,faves:/^\/photos\/([^\/]+)\/favorites(?:\/from\/([^\/]+))?(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,explore:/^\/explore\/?(\d{4}\/\d{2}\/\d{2})?(?:\/?with\/([0-9]+))?\/?(lightbox\/?)?/,group_pool:/^\/groups\/([^\/]+)\/?(?:pool)?(?:\/((?:(?!with|page|lightbox)[^\/\?])+))?(?:\/with\/(\d+))?(?:\/page(\d+))?(\/lightbox)?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,gallery:/^\/photos\/([^\/]+)\/galleries\/([0-9]+)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?/,contacts:/^\/photos\/(?:friends|contacts)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,contactsfaves:/^\/photos\/contacts\/favorites(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/};Y.urls={get:function(page_type,config){var url;switch((config=config||{}).photo&&Y.Lang.isString(config.photo)&&(config.photo_id=config.photo,Y.PhotoData&&(config.photo=Y.PhotoData.get(config.photo)),Y.Lang.isObject(config.photo)||(config.photo=void 0,delete config.photo)),Y.Lang.isObject(config.photo)&&(config.photo_id=config.photo.get("id")),page_type){case"photo":url=function(config){var photo,photo_id,path_alias,context_id,page,lightbox,sizes,hash,exif,faves,details;if(photo=config.photo,photo_id=config.photo_id,path_alias=config.path_alias,!Y.Lang.isObject(photo)&&!photo_id)return void Y.log("[urls] missing photo object or ID");if(!Y.Lang.isObject(photo)&&!path_alias)return void Y.log("[urls] missing photo object or path alias");photo_id=photo_id||photo.get("id"),path_alias=path_alias||photo.get("pathalias")||photo.get("owner"),config.context&&(Y.Lang.isString(config.context)?context_id=config.context:Y.Lang.isObject(config.context)&&Y.Lang.isString(config.context.id)&&(context_id=config.context.id));config.page&&(1!==(page=parseInt(config.page,10))&&Y.Lang.isNumber(page)||(page=!1));return lightbox=!!Y.Lang.isBoolean(config.lightbox)&&config.lightbox,sizes=!(!Y.Lang.isBoolean(config.sizes)&&!Y.Lang.isString(config.sizes))&&config.sizes,hash=!!Y.Lang.isString(config.hash)&&config.hash,exif=!!Y.Lang.isBoolean(config.exif)&&config.exif,faves=!!Y.Lang.isBoolean(config.faves)&&config.faves,details=!!Y.Lang.isBoolean(config.details)&&config.details,"/photos/"+path_alias+"/"+photo_id+"/"+(sizes?"sizes/"+(Y.Lang.isString(sizes)?sizes+"/":""):"")+(exif?"meta/":"")+(faves?"favorites/":"")+(details?"edit-details/":"")+(context_id?"in/"+context_id+"/":"")+(page?"page"+page+"/":"")+(lightbox?"lightbox/":"")+(hash?"#"+hash:"")}(config);break;case"photostream":url=function(config){var path_alias,url;config.photo&&(config.path_alias=config.photo.get("pathalias")||config.photo.get("owner"));if(!(path_alias=config.path_alias))return void Y.log("[urls] missing path_alias");url="/photos/"+path_alias+"/",config.person?url+="people/"+config.person+"/":config.tag?(Y.Lang.isArray(config.tag)&&(config.tag=config.tag.join(",")),url+="tags/"+config.tag+"/"):config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");return url}(config);break;case"delete_photo":url=function(config){var path_alias;return(path_alias=config.path_alias)?(photo_id=config.photo_id,photo_id?(context_id=config.context_id,"/photos/"+path_alias+"/?delete="+photo_id+(context_id?"&context="+context_id:"")+"&magic_cookie="+Y.config.flickr.magic_cookie):void Y.log("[urls] missing photo_id")):void Y.log("[urls] missing path_alias")}(config);break;case"faves":url=function(config){var path_alias,url;if(!(path_alias=config.path_alias))return void Y.log("[urls] missing path_alias");url="/photos/"+path_alias+"/favorites/",config.from&&(url+="from/"+config.from+"/");config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"group_pool":url=function(config){var group_id,url;if(!(group_id=config.group_id))return void Y.log("[urls] missing group_id");url="/groups/"+group_id+"/pool/",config.owner_id&&(url+=config.owner_id+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.page&&(url+="page"+config.page+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"gallery":url=function(config){var path_alias,gallery_id,url;if(path_alias=config.path_alias,gallery_id=config.gallery_id,!path_alias)return void Y.log("[urls] missing path_alias");if(!gallery_id)return void Y.log("[urls] missing gallery_id");url="/photos/"+path_alias+"/galleries/"+gallery_id+"/",config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");return url}(config);break;case"contacts":url=function(config){var url;url="/photos/friends/",config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"contactsfaves":url=function(config){var url;url="/photos/contacts/favorites/",config.page&&(url+="page"+config.page+"/");config.photo_id&&(url+="with/"+config.photo_id+"/");config.lightbox&&(url+="lightbox/");config.view_mode&&(url+="?view="+config.view_mode);return url}(config);break;case"explore":url=function(config){var date,with_id,url;date=config.date,with_id=config.with_id,url="/explore",date&&(url+="/"+date);with_id&&(url+="/with/"+with_id);config.lightbox&&(url+="lightbox/");return url}(config)}return url},parse:function(page_type,path){var path_parts,obj={};if(regexes[page_type]){switch(path_parts=regexes[page_type].exec(path),page_type){case"photo":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.photo_id=path_parts[2],obj.context_id=path_parts[3]&&decodeURIComponent(path_parts[3]),obj.page=path_parts[4],obj.lightbox=!!path_parts[5],obj.tour=!!path_parts[6];break;case"photostream":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.page=path_parts[2],obj.photo_id=path_parts[3],obj.lightbox=!!path_parts[4];break;case"delete_photo":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.photo_id=path_parts[2],obj.context_id=path_parts[3];break;case"faves":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.from=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.page=path_parts[3],obj.photo_id=path_parts[4],obj.lightbox=!!path_parts[5],obj.view_mode=path_parts[6];break;case"group_pool":obj.group_id=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.owner_id=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.photo_id=path_parts[3],obj.page=path_parts[4],obj.lightbox=!!path_parts[5],obj.view_mode=path_parts[6];break;case"gallery":obj.path_alias=path_parts[1]&&decodeURIComponent(path_parts[1]),obj.gallery_id=path_parts[2]&&decodeURIComponent(path_parts[2]),obj.page=path_parts[3],obj.photo_id=path_parts[4],obj.lightbox=!!path_parts[5];break;case"contacts":case"contactsfaves":obj.page=path_parts[1],obj.photo_id=path_parts[2],obj.lightbox=!!path_parts[3],obj.view_mode=path_parts[4];break;case"explore":obj.date=path_parts[1],obj.photo_id=path_parts[2],obj.lightbox=path_parts[3]}return obj}Y.log('[urls] no regex found for page_type "'+page_type+'"')},getShortID:function(num){Y.Lang.isNumber(num)||(num=parseInt(num,10));for(var mod,enc="",alpha="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",div=num;58<=num;)div=num/58,mod=num-58*Math.floor(div),enc=""+alpha.substr(mod,1)+enc,num=Math.floor(div);return div?""+alpha.substr(div,1)+enc:enc},getLongID:function(short_id){for(var alphabet="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",decoded=0,multi=1,i=short_id.length-1;0<=i;i--)decoded+=multi*alphabet.indexOf(short_id[i]),multi*=alphabet.length;return decoded},regexes:regexes}},"0.0.1",{requires:F.config.modules.urls.requires||[],optional:F.config.modules.urls.optional||[]});YUI.add("photo-transjax",function(a){a.transjax.add("photo",{your_favorites:"Your favorites",untitled:"Untitled",window_title:"%s | Flickr - Photo Sharing!"})},"0.0.1",{requires:["transjax-base"]});YUI.add("type-cast",function(Y){function integer(val){if(val=parseInt(val,10),Y.Lang.isNumber(val))return val}Y.TypeCast={string:function(val){return Y.Lang.isNumber(val)&&(val+=""),Y.Lang.isString(val)?val:""},bool:function(val){return"0"===val&&(val=0),!!val},integer:integer,integer0123:function(val){if(val=integer(val),!(!Y.Lang.isNumber(val)||val<0||3<val))return val},arr:function(val){return Y.Lang.isArray(val)?val:[]},obj:function(val){return Y.Lang.isObject(val)?val:{}}}},"0.0.1",{requires:F.config.modules["type-cast"].requires||[],optional:F.config.modules["type-cast"].optional||[]});YUI.add("photo-data",function(Y){var registry={},TypeCast=Y.TypeCast;function isInt(val){return Y.Lang.isNumber(val)&&parseInt(val,10)===val}function PhotoData(photo_data){PhotoData.superclass.constructor.apply(this,arguments)}Y.PhotoData={add:function(photo_data){var photo;return photo_data instanceof PhotoData?photo=photo_data:registry[photo_data.id]?(photo=registry[photo_data.id]).merge_data(photo_data):(photo=new PhotoData(photo_data),registry[photo_data.id]=photo),photo},get:function(photo_id){return void 0===photo_id?registry:registry[photo_id]}},PhotoData.NAME="PhotoData",PhotoData.ATTRS={id:{value:""},title:{broadcast:1,value:"",setter:function(val,name){return(val=TypeCast.string(val)).replace(/^\s+$/,"")}},description:{broadcast:1,value:"",setter:TypeCast.string},owner:{value:"",setter:function(val){return Y.Lang.isString(val)||(val=Y.Lang.isObject(val)&&val.nsid?val.nsid:""),val}},ownername:{value:""},pathalias:{value:""},iconserver:{value:""},iconfarm:{value:""},url:{value:"",getter:function(val,name){return Y.urls.get("photo",{photo:this})}},date_posted:{broadcast:1,getter:TypeCast.integer},is_public:{broadcast:1,getter:TypeCast.bool},is_friend:{broadcast:1,getter:TypeCast.bool},is_family:{broadcast:1,getter:TypeCast.bool},perm_comment:{broadcast:1,getter:TypeCast.integer0123},perm_addmeta:{broadcast:1,getter:TypeCast.integer0123},perms:{getter:function(){return{is_public:this.get("is_public"),is_friend:this.get("is_friend"),is_family:this.get("is_family"),perm_comment:this.get("perm_comment"),perm_addmeta:this.get("perm_addmeta")}}},license:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},safety_level:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},needs_interstitial:{broadcast:1,value:!1,getter:TypeCast.bool,setter:TypeCast.bool},media:{broadcast:1,value:"photo"},is_video:{getter:function(){return"video"===this.get("media")}},secret:{value:""},deleted:{value:!1},dmca_takedown:{value:!1},geo:{broadcast:1,getter:function(val){return Y.Lang.isObject(val)||(val={}),val}},has_geo:{getter:function(){var geo=this.get("geo");return geo&&geo.latitude&&geo.longitude&&geo.accuracy}},exif_latlong:{},perm_viewgeo:{broadcast:1,value:!1},is_bad:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},content_type:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},is_fave:{broadcast:1,value:!1,setter:function(val,name){return(val=TypeCast.bool(val))!==this.get(name)&&(val?this.increment("fave_count"):this.decrement("fave_count")),0===this.get("fave_changes_pending")&&this.set("is_confirmed_fave",val),val},getter:TypeCast.bool},is_confirmed_fave:{value:void 0},fave_changes_pending:{value:0},fave_count:{broadcast:1,value:0,getter:TypeCast.integer,setter:TypeCast.integer},comment_count:{broadcast:1,value:0,getter:TypeCast.integer,setter:TypeCast.integer},can_addmeta:{value:!1,getter:TypeCast.bool},can_comment:{value:!1,getter:TypeCast.bool},can_fave:{value:!1,getter:function(){return!this.get("is_ignored")&&(!this.get("dmca_takedown")&&(!this.get("is_owner")&&!(!Y.config.flickr.user.nsid&&!Y.config.flickr.flags.enable_grease)))}},group_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},people_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},guestpass_count:{broadcast:1,getter:TypeCast.integer,setter:TypeCast.integer},is_owner:{value:!1,getter:function(){return Y.config.flickr.user.nsid&&Y.config.flickr.user.nsid===this.get("owner")}},is_ignored:{value:!1},tags:{broadcast:1,getter:TypeCast.arr},sizes:{value:{},getter:function(val,name){var biggest,ratio,height_2048,width_2048;return val=TypeCast.obj(val),Y.config.flickr.flags.enable_2048_images&&(biggest=val.o||val.l||val.z)&&(2048<=biggest.width||2048<=biggest.height)&&(1<(ratio=biggest.width/biggest.height)?(width_2048=2048,height_2048=Math.round(2048/ratio)):(height_2048=2048,width_2048=Math.round(2048*ratio)),val[2048]={url:val.t.url.replace("_t","_2048"),height:height_2048+"",width:width_2048+"",label:"2048"}),val}}},Y.extend(PhotoData,Y.Base,{initializer:function(photo_data){this.merge_data(photo_data)},merge_data:function(photo_data){var sizes,old_sizes;void 0!==photo_data.id&&photo_data.id!==this.get("id")&&this.set("id",photo_data.id),void 0!==photo_data.title&&photo_data.title!==this.get("title")&&this.set("title",photo_data.title),void 0!==photo_data.description&&photo_data.description!==this.get("description")&&this.set("description",photo_data.description),void 0!==photo_data.owner&&photo_data.owner!==this.get("owner")&&this.set("owner",photo_data.owner),void 0!==photo_data.ownername&&photo_data.ownername!==this.get("ownername")&&this.set("ownername",photo_data.ownername),void 0!==photo_data.pathalias&&photo_data.pathalias!==this.get("pathalias")&&this.set("pathalias",photo_data.pathalias),void 0!==photo_data.iconserver&&photo_data.iconserver!==this.get("iconserver")&&this.set("iconserver",photo_data.iconserver),void 0!==photo_data.iconfarm&&photo_data.iconfarm!==this.get("iconfarm")&&this.set("iconfarm",photo_data.iconfarm),void 0!==photo_data.url&&photo_data.url!==this.get("url")&&this.set("url",photo_data.url),void 0!==photo_data.date_posted&&photo_data.date_posted!==this.get("date_posted")&&this.set("date_posted",photo_data.date_posted),void 0!==photo_data.date_taken&&photo_data.date_taken!==this.get("date_taken")&&this.set("date_taken",photo_data.date_taken),void 0!==photo_data.is_public&&photo_data.is_public!==this.get("is_public")&&this.set("is_public",photo_data.is_public),void 0!==photo_data.is_friend&&photo_data.is_friend!==this.get("is_friend")&&this.set("is_friend",photo_data.is_friend),void 0!==photo_data.is_family&&photo_data.is_family!==this.get("is_family")&&this.set("is_family",photo_data.is_family),void 0!==photo_data.can_comment&&photo_data.can_comment!==this.get("can_comment")&&this.set("can_comment",photo_data.can_comment),void 0!==photo_data.can_addmeta&&photo_data.can_addmeta!==this.get("can_addmeta")&&this.set("can_addmeta",photo_data.can_addmeta),void 0!==photo_data.perm_comment&&photo_data.perm_comment!==this.get("perm_comment")&&this.set("perm_comment",photo_data.perm_comment),void 0!==photo_data.perm_addmeta&&photo_data.perm_addmeta!==this.get("perm_addmeta")&&this.set("perm_addmeta",photo_data.perm_addmeta),void 0!==photo_data.license&&photo_data.license!==this.get("license")&&this.set("license",photo_data.license),void 0!==photo_data.needs_interstitial&&photo_data.needs_interstitial!==this.get("needs_interstitial")&&this.set("needs_interstitial",photo_data.needs_interstitial),void 0!==photo_data.safety_level&&photo_data.safety_level!==this.get("safety_level")&&this.set("safety_level",photo_data.safety_level),void 0!==photo_data.media&&photo_data.media!==this.get("media")&&this.set("media",photo_data.media),void 0!==photo_data.secret&&photo_data.secret!==this.get("secret")&&this.set("secret",photo_data.secret),void 0!==photo_data.is_bad&&photo_data.is_bad!==this.get("is_bad")&&this.set("is_bad",photo_data.is_bad),void 0!==photo_data.content_type&&photo_data.content_type!==this.get("content_type")&&this.set("content_type",photo_data.content_type),void 0!==photo_data.is_faved&&photo_data.is_faved!==this.get("is_fave")&&this.set("is_fave",photo_data.is_faved),void 0!==photo_data.is_fave&&photo_data.is_fave!==this.get("is_fave")&&this.set("is_fave",photo_data.is_fave),void 0!==photo_data.fave_count&&photo_data.fave_count!==this.get("fave_count")&&this.set("fave_count",photo_data.fave_count),void 0!==photo_data.count_faves&&photo_data.count_faves!==this.get("fave_count")&&this.set("fave_count",photo_data.count_faves),void 0!==photo_data.comment_count&&photo_data.comment_count!==this.get("comment_count")&&this.set("comment_count",photo_data.comment_count),void 0!==photo_data.count_comments&&photo_data.count_comments!==this.get("comment_count")&&this.set("comment_count",photo_data.count_comments),void 0!==photo_data.geo&&photo_data.geo!==this.get("geo")&&this.set("geo",photo_data.geo),void 0!==photo_data.exif_latlong&&photo_data.exif_latlong!==this.get("exif_latlong")&&this.set("exif_latlong",photo_data.exif_latlong),void 0!==photo_data.perm_viewgeo&&photo_data.perm_viewgeo!==this.get("perm_viewgeo")&&this.set("perm_viewgeo",photo_data.perm_viewgeo),void 0!==photo_data.woe&&photo_data.woe!==this.get("woe")&&this.set("woe",photo_data.woe),void 0!==photo_data.tags&&photo_data.tags!==this.get("tags")&&this.set("tags",photo_data.tags),void 0!==photo_data.group_count&&photo_data.group_count!==this.get("group_count")&&this.set("group_count",photo_data.group_count),void 0!==photo_data.people_count&&photo_data.people_count!==this.get("people_count")&&this.set("people_count",photo_data.people_count),void 0!==photo_data.guestpass_count&&photo_data.guestpass_count!==this.get("guestpass_count")&&this.set("guestpass_count",photo_data.guestpass_count),photo_data.sizes&&Y.Lang.isObject(photo_data.sizes)?sizes=photo_data.sizes:(sizes={},photo_data.url_sq&&(sizes.sq={url:photo_data.url_sq,width:parseInt(photo_data.width_sq,10),height:parseInt(photo_data.height_sq,10)}),photo_data.url_t&&(sizes.t={url:photo_data.url_t,width:parseInt(photo_data.width_t,10),height:parseInt(photo_data.height_t,10)}),photo_data.url_s&&(sizes.s={url:photo_data.url_s,width:parseInt(photo_data.width_s,10),height:parseInt(photo_data.height_s,10)}),photo_data.url_m&&(sizes.m={url:photo_data.url_m,width:parseInt(photo_data.width_m,10),height:parseInt(photo_data.height_m,10)}),photo_data.url_z&&(sizes.z={url:photo_data.url_z,width:parseInt(photo_data.width_z,10),height:parseInt(photo_data.height_z,10)}),photo_data.url_l&&(sizes.l={url:photo_data.url_l,width:parseInt(photo_data.width_l,10),height:parseInt(photo_data.height_l,10)}),photo_data.url_h&&(sizes.h={url:photo_data.url_h,width:parseInt(photo_data.width_h,10),height:parseInt(photo_data.height_h,10)}),photo_data.url_k&&(sizes.k={url:photo_data.url_k,width:parseInt(photo_data.width_k,10),height:parseInt(photo_data.height_k,10)}),photo_data.url_o&&(sizes.o={url:photo_data.url_o,width:parseInt(photo_data.width_o,10),height:parseInt(photo_data.height_o,10)}),"video"===photo_data.media&&photo_data.height_v&&(sizes.v={width:parseInt(photo_data.width_v,10),height:parseInt(photo_data.height_v,10)})),Y.Object.size(sizes)&&(old_sizes=this.get("sizes")||{},Y.Object.each(old_sizes,function(old_size,key){sizes[key]&&(sizes[key]=Y.merge(old_size,sizes[key]))}),this.set("sizes",Y.merge(old_sizes,sizes)))},toggle_fave:function(e){var adding,method,params,callback,that=this;if(this.get("can_fave")){if(Y.config.flickr.flags.enable_grease&&!Y.config.flickr.user.nsid)return Y.grease.addFave(this.get("id")),void Y.grease.authenticate();method="flickr.favorites."+((adding=!this.get("is_fave"))?"add":"remove"),params={photo_id:this.get("id")},callback={success:function(){var photo_id,faves_context_id,faves_context,faves_context_position;photo_id=that.get("id"),that.decrement("fave_changes_pending"),that.set("is_confirmed_fave",adding),0===that.get("fave_changes_pending")&&that.set("is_fave",adding),faves_context_id="faves-"+(Y.config.flickr.user.pathalias?Y.config.flickr.user.pathalias:Y.config.flickr.user.nsid),(faves_context=Y.ContextData.getContext(faves_context_id))&&(faves_context_position=faves_context.getPhotoPosition(photo_id)),adding?faves_context?Y.ContextData.getPrevLimit(faves_context_id)===faves_context_position?Y.ContextData.unremovePhoto(faves_context_id,faves_context_position):Y.ContextData.invalidate(faves_context_id):"photo"===Y.config.flickr.page_type&&that.get("id")===Y.photo.getCurrentPhoto().get("id")&&Y.ContextData.add({id:faves_context_id,user_id:Y.config.flickr.user.nsid,type:"faves",title:Y.transjax.get("photo","your_favorites"),url:Y.config.flickr.user.photos_url+"favorites/",photos:[{position:"0",photo:that}]}):faves_context&&Y.Lang.isNumber(faves_context_position)&&Y.ContextData.removePhoto(faves_context_id,faves_context_position)},failure:function(){that.decrement("fave_changes_pending"),0===that.get("fave_changes_pending")&&that.set("is_fave",that.get("is_confirmed_fave"))}},this.set("is_fave",adding),this.increment("fave_changes_pending"),Y.flickrAPI.callMethod(method,params,callback)}},record_interstitial_clickthrough:function(){var owner=this.get("owner");Y.Object.each(registry,function(photo,photo_id){photo.get("owner")===owner&&photo.set("needs_interstitial",!1)}),Y.flickrAPI.callMethod("flickr.people.recordInterstitialClickthrough",{user_id:owner},function(){})},updateWoeAttributeByeId:function(woe_id){var scope=this;Y.use("flickr-geo",function(Y){Y.flickrGeo.getWoeById(woe_id,function(r){r.success&&Y.Lang.isObject(r.woe)?scope.set("woe",r.woe):Y.log("Unable to update WOE. Expected data was not received from the API.","error","photo-data")},this)})},increment:function(name){return!!isInt(this.get(name))&&this.add(name,1)},decrement:function(name){return!!isInt(this.get(name))&&this.add(name,-1)},add:function(name,number){var newVal,prevVal=this.get(name);return!(!Y.Lang.isNumber(prevVal)||!Y.Lang.isNumber(number))&&(newVal=prevVal+number,!!this.set(name,newVal)&&newVal)}})},"0.0.1",{requires:F.config.modules["photo-data"].requires||[],optional:F.config.modules["photo-data"].optional||[]});YUI.add("grease",function(Y){var authInProgress,web1999Window,src,globalDialog,callback,grease_ok=!1,storage=Y.StorageLite,PENDING_SHARE_V3="ps3",POST_LOGIN="/photo_grease_postlogin.gne",FAVE="fave",CONTACT="contact",SHARE="share",sessionRegex=/cookie_session=[^;]+/gi,loginPoll=1e3,keyList=["pc","pic","ps",PENDING_SHARE_V3,"pf","pct","pf","pp","pps"];function clearStorage(){Y.Array.each(keyList,function(o){storage.removeItem(o)})}Y.config.flickr.flags.enable_grease&&(grease_ok=!0),globalDialog=Y.global_dialog;var timer,pollCount,canceled,running,authPoller=(timer=null,pollCount=0,running=canceled=!1,{start:function(){if(running)return loginPoll=50,timer&&timer.cancel(),void checkAuth();running=!0,checkAuth()},stop:stop,cancel:function(){timer&&timer.cancel(),canceled=!0,Y.fire("grease:cancel")},pause:function(){timer&&timer.cancel(),loginPoll=1e6},canceled:canceled,reset:function(){running=!1,timer&&timer.cancel(),stop(),globalDialog.remove_existing_dialog(),timer=null,canceled=!1,pollCount=0,canceled=!(loginPoll=1e3)}});function ascendingDefer(){return loginPoll=1e4<=loginPoll?loginPoll:2*loginPoll}function stop(){running&&(timer&&(globalDialog.remove_existing_dialog(),timer.cancel(),!1),running=!1)}function checkAuth(){if(!canceled){timer&&(timer.cancel(),timer=null);var io_cfg={method:"post",data:"random=0",on:{success:function(id,o,args){o&&"1"===o.responseText.substring(0,1)?Y.fire("grease:authenticated"):pollCount++<3&&(stopSpinning(),timer=timer||Y.later(ascendingDefer(),this,checkAuth))},failure:function(){pollCount++<1&&(timer=timer||Y.later(ascendingDefer(),this,checkAuth))}}};Y.io("/fragment.gne?name=social-auth-fragment",io_cfg)}}function cancelSocial(){Y.detach("grease|*"),authInProgress=!1,stopSpinning(),callback(!1),authPoller.reset()}function handleClicks(e){(e.target.hasClass("close-x")||e.target.hasClass("Butt"))&&(e.preventDefault(),e.halt(),Y.global_dialog.hide())}function startSpinning(){globalDialog.show({loading:!0,modal:!0})}function stopSpinning(){globalDialog.hide()}function beacon(url){var bd=Y.one("body"),img=bd.create('<img height="1" width="1" src="'+url+'">');bd.appendChild(img)}function showConfirmDialog(){globalDialog.create_dialog(Y.one("#grease-confirm-"+src).get("innerHTML"),{width:355}).show({loading:!1,modal:!0}),Y.one("#global_dialog").on("click",handleClicks,this),Y.later(1e4,this,Y.global_dialog.hide),Y.config.flickr.flags.enable_rapid_tracking&&Y.one("#reg-tour")&&Y.use("rapid-tracker",function(Y){switch(Y.rapidTracker.addModules("grease-conversion-tracker"),Y.rapidTracker.beaconClick("grease-conversion-tracker",src),src){case FAVE:beacon("https://pclick.internal.yahoo.com/p/s=2143640346&t="+Math.random());break;case CONTACT:beacon("https://pclick.internal.yahoo.com/p/s=2143640345&t="+Math.random());break;case SHARE:beacon("https://pclick.internal.yahoo.com/p/s=2143640344&t="+Math.random());break;default:beacon("https://pclick.internal.yahoo.com/p/s=2143640343&t="+Math.random())}})}function handleApiFailure(){clearStorage(),globalDialog.create_dialog(Y.one("#grease-error").get("innerHTML")).show({loading:!1,modal:!0,width:355,style:"grease-error"}),Y.one("#global_dialog").on("click",handleClicks,this),Y.later(5e3,this,Y.global_dialog.hide)}function pollCookie(){document.cookie.match(sessionRegex)?(authInProgress=!1,startSpinning(),authPoller.start()):Y.later(20,this,pollCookie)}function submitPendingComment(comment){if(startSpinning(),clearStorage(),Y.one("#message")){Y.one("#message").set("innerHTML",comment);var io_cfg={method:"post",data:"preview=0",form:{id:Y.one(".add-comment-form form")},on:{success:function(id,o,args){stopSpinning(),showConfirmDialog();var commentBox=Y.one("#comments");commentBox.set("innerHTML",o.responseText);var problem=commentBox.one(".Problem");problem&&globalDialog.create_alert_dialog(problem.get("innerHTML"),function(){commentBox.one("#message").scrollIntoView()})}}};Y.io("/photo_comments_fragment.gne",io_cfg)}else handleApiFailure()}function store(key,value,json){var j=json||!1;storage.setItem(key,value,j)}function get(key,parse){var p=parse||!1;return storage.getItem(key,p)}Y.grease={init:function(reg){grease_ok&&(reg&&Y.config.flickr.user.nsid?storage.on("storage-lite:ready",function(){var pendingComment=get("pc"),pendingInlineComment=get("pic"),pendingFave=get("pf"),pendingContact=get("pct"),pendingShare=get("ps",!0),pendingShareV3=get(PENDING_SHARE_V3,!0);get("pp"),get("pps");if(pendingComment){src="comment";var slicePoint=pendingComment.indexOf(";"),id=pendingComment.substring(0,slicePoint),comment=pendingComment.substring(slicePoint+1);id===Y.photo.getCurrentPhoto().get("id")&&submitPendingComment(comment)}else if(pendingInlineComment){src="comment";slicePoint=pendingInlineComment.indexOf(";"),id=pendingInlineComment.substring(0,slicePoint);!function(comment,photo_id){clearStorage();var io_cfg={method:"post",data:"magic_cookie="+Y.config.flickr.magic_cookie+"&photo="+photo_id+"&addcomment=1flash_ver=unknown&offset="+-1+"&limit=4&show-chrome=true&view-more-count=20&hide-meta=true&message="+comment,on:{success:function(id,o,args){var pic=Y.one("div[data-photo-id="+photo_id+"]");if(pic){var count=pic.getAttribute("data-comments-total-count");count=""===count?0:parseInt(count,10),count++,pic.setAttribute("data-comments-total-count",count);var countNode=pic.one(".comment-count");countNode&&(count<100?countNode.setHTML(count):countNode.setHTML("99+"))}stopSpinning()},failure:function(obj,xhr){stopSpinning(),showError(Y.transjax.get("photo-comments","error_add_generic"))}}};Y.io("/photo_comments_fragment_2013.gne?cachebust="+(new Date).getTime(),io_cfg)}(comment=pendingInlineComment.substring(slicePoint+1),id)}else if(pendingFave)src="fave",function(pendingFave){var photoData,listModel,smokescreen,needsAPI=!0;if(Y.photo&&Y.photo.getCurrentPhoto&&Y.photo.getCurrentPhoto()&&Y.photo.getCurrentPhoto().get("is_owner"))return globalDialog&&globalDialog.remove_existing_dialog(),(smokescreen=Y.one("#global-dialog-background"))&&smokescreen.setStyle("display","none"),clearStorage();Y.PhotoData&&((photoData=Y.PhotoData.get(pendingFave))?photoData.get("is_fave")||photoData.toggle_fave():(void 0!==Y.FlickrAppExplore&&(listModel=Y.FlickrAppExplore.getListModel())&&(listModel.toggleFave(pendingFave),needsAPI=!1),void 0!==Y.FlickrAppPhotostream&&(listModel=Y.FlickrAppPhotostream.getListModel())&&(listModel.toggleFave(pendingFave),neeedsAPI=!1),needsAPI&&Y.flickrAPI.callMethod("flickr.favorites.add",{photo_id:pendingFave})),showConfirmDialog(),clearStorage())}(pendingFave);else if(pendingContact)src="contact",function(contactString){startSpinning(),contactArr=contactString.split(";"),Y.flickrAPI.callMethod("flickr.contacts.add",{user_id:contactArr[0],friend:contactArr[1],family:contactArr[2]},{success:function(o){stopSpinning(),showConfirmDialog(),clearStorage()},failure:handleApiFailure})}(pendingContact);else if(pendingShare)src="share",function(params){startSpinning(),clearStorage(),Y.flickrAPI.callMethod("flickr.sharing.share",params,{success:function(o){stopSpinning(),showConfirmDialog()},failure:handleApiFailure})}(pendingShare);else if(pendingShareV3)src="sharev3",function(share_params){startSpinning(),clearStorage(),share_params.magic_cookie=Y.config.flickr.magic_cookie,share_params.from_grease=1,Y.use("share-this-v3-dialog",function(Y){Y.shareThisV3Dialog.do_share_action(share_params)})}(pendingShareV3);else{var smokescreen=Y.one("#global-dialog-background");smokescreen&&smokescreen.setStyle("display","none"),clearStorage()}}):storage.on("storage-lite:ready",function(){clearStorage()}))},enabled:grease_ok,authenticate:function authenticate(cb){authInProgress?(cancelSocial(),authenticate(cb)):(authPoller.reset(),callback=cb||function(){},Y.global_dialog.remove_existing_dialog(),Y.global_dialog.show({loading:!0,modal:!0}),authInProgress=!0,function(url){var postLogin,windowWidth,popupWidth=650;Y.config.flickr.flags.enable_ads_on_login_page&&(windowWidth=Y.one(window).get("winWidth")||0,isNaN(popupWidth)||(popupWidth=Math.max(880,Math.min(1200,windowWidth)))),authPoller.reset();var fullUrl=url+"&popup=1&redir="+POST_LOGIN+"?d="+encodeURIComponent(window.location+"?reg=1")+"&src="+src;if(Y.config.flickr.is_touch_device)return postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1&src="+src+"&reg=1",window.location=url+"&popup=0&redir="+encodeURIComponent(postLogin);try{web1999Window=window.open(fullUrl,"newWindow","width="+popupWidth+",height=650,resizable=1,scrollbars=1,location=yes")}catch(e){return}try{web1999Window.focus&&web1999Window.focus()}catch(ee){}!web1999Window||web1999Window.closed||void 0===web1999Window.closed?(postLogin=POST_LOGIN+"?d="+window.location+"&notpopup=1&src="+src+"&reg=1",window.location=url+"&popup=0&redir="+encodeURIComponent(postLogin)):window.setTimeout(pollCookie,500);var win=Y.one("window");win.on("grease|focus",function(){authPoller.canceled||authPoller.start(),document.cookie.match(sessionRegex)||(stopSpinning(),callback(!1),pollCookie())}),Y.on("grease:cancel",function(o){authInProgress=!1,cancelSocial()}),win.on("grease|blur",function(){authPoller.canceled||authPoller.pause()}),win.on("grease:timeout",function(o){authInProgress=!1,cancelSocial()}),Y.on("grease:authenticated",function(o){if(web1999Window)try{web1999Window.close()}catch(err){}startSpinning(),callback(!(authInProgress=!1));var urlParams=["reg=1","src="+src];if(PENDING_SHARE_V3){var newURL=window.location.toString(),hasQuery=newURL.match(/\?/i);-1!==(newURL+=(hasQuery?"&":"?")+urlParams.join("&")).indexOf("#?")&&(newURL=newURL.replace("#","")),window.location=newURL}else window.location=Y.urls.get("photo",{photo:Y.photo.getCurrentPhoto()})+"?"+urlParams.join("&")})}("/signin?src="+src+"&reg=1"))},postComment:function(comment,photoid){photoid=photoid||Y.photo.getCurrentPhoto().get("id"),clearStorage(),store(photoid?"pic":"pc",photoid+";"+comment),src="comment"},addFave:function(id){clearStorage(),store("pf",id),src="fave"},addContact:function(params){clearStorage(),Y.Lang.isArray(params)&&(store("pct",params.join(";")),src="contact")},share:function(params){clearStorage(),store("ps",params,!0),src="share"},shareV3:function(params){clearStorage(),store(PENDING_SHARE_V3,params,!0),src="sharev3"},photoParty:function(params){clearStorage(),store("pp",params),src="party"},photoPartyStart:function(params){clearStorage(),store("pps",Y.JSON.stringify(params)),src="partyStart"}},"saw"===Y.config.flickr.user.admin_user&&(Y.occult.register("postComment",function(a){submitPendingComment(a)}),Y.occult.register("showdialog",function(a){src="fave",showConfirmDialog()}),Y.occult.register("fakeerror",function(a){handleApiFailure()}));var tourbar=Y.one("#reg-tour");function clearbody(){for(var i=1;i<4;i++)bd.removeClass(stub+i)}if(tourbar){var stub="tour-step",bd=Y.one("body");tourbar.one(".close-x").on("click",function(e){e.preventDefault(),clearbody(),Y.Event.purgeElement("#reg-tour"),tourbar.addClass("hidden")}),tourbar.on("mouseover",function(e){!function handleOver(targ){if(!targ.test("#reg-tour"))if(targ.test("ol li"))switch(clearbody(),targ.get("id")){case"step-1":bd.addClass(stub+1);break;case"step-2":bd.addClass(stub+2);break;case"step-3":bd.addClass(stub+3)}else handleOver(targ.get("parentNode"))}(e.target)}),tourbar.on("mouseout",function(e){clearbody()})}},"0.0.1",{requires:F.config.modules.grease.requires||[],optional:F.config.modules.grease.optional||[]});!function(){var module_id="context-data";YUI.add(module_id,function(Y){var registry={};function add(context_data){var context=new PhotoContext(context_data);return(registry[context.id]=context).on("totalChange",function(total){Y.fire("ContextData:totalChange",context.id,total)}),context.on("photoLoaded",function(position,photo){Y.fire("ContextData:photoLoaded",context.id,position,photo)}),context.on("photoRemoved",function(position,photo){Y.fire("ContextData:photoRemoved",context.id,position,photo)}),context.on("photoUnremoved",function(position,photo){Y.fire("ContextData:photoUnremoved",context.id,position,photo)}),context.on("photoLoadFailure",function(position){Y.fire("ContextData:photoLoadFailure",context.id,position)}),context.on("prevLimitReached",function(position){Y.fire("ContextData:prevLimitReached",context.id,position)}),context.on("nextLimitReached",function(position){Y.fire("ContextData:nextLimitReached",context.id,position)}),Y.fire("ContextData:contextAdded",context),context}function remove(context_id){registry[context_id]&&(registry[context_id]=void 0,delete registry[context_id],Y.fire("ContextData:contextRemoved",context_id))}function getContext(context_id){return context_id?registry[context_id]:void 0}function getPhotoPosition(context_id,photo_id){return registry[context_id]?registry[context_id].getPhotoPosition(photo_id):void 0}function PhotoContext(config){this.id=config.id,this.type=config.type,this.set_id=config.set_id,this.group_id=config.group_id,this.for_user=config.for_user,this.gallery_id=config.gallery_id,this.user_id=config.user_id,this.from=config.from,this.owner_name_possessive=config.owner_name_possessive,this.title=config.title||"",this.url=config.url||"",this.order_by=config.order_by||"",this.total=parseInt(config.total,10),this.removed={},Y.config.flickr.filmstrips&&Y.config.flickr.filmstrips.enable_filmstrip_timelines&&(this.start_position=parseInt(config.start_position,10)),this.photos={},Y.Lang.isNumber(this.total)||(this.total=void 0),this.prev_limit=config.prev_limit,this.next_limit=config.next_limit,Y.Object.each(config.photos,function(obj){var position,photo,raw_position=obj.position,raw_photo=obj.photo;position=parseInt(raw_position,10),Y.Lang.isNumber(position)&&(photo=Y.PhotoData.add(raw_photo))&&this.setPhoto(position,photo)},this),this.next_batch={},this.loading_batches={}}Y.ContextData={add:add,remove:remove,reload:function(context_id,photos){var context=getContext(context_id),type=context.type,set_id=context.set_id,group_id=context.group_id,for_user=context.for_user,gallery_id=context.gallery_id,user_id=context.user_id,from=context.from,owner_name_possessive=context.owner_name_possessive,title=context.title,url=context.url;remove(context_id),add({id:context_id,set_id:set_id,group_id:group_id,for_user:for_user,gallery_id:gallery_id,user_id:user_id,from:from,owner_name_possessive:owner_name_possessive,type:type,title:title,url:url,photos:photos})},invalidate:function(context_id){Y.fire("ContextData:contextInvalidated",context_id)},getContext:getContext,getContexts:function(){return Y.Object.values(registry)},loadPhoto:function(context_id,position){if(registry[context_id])return registry[context_id].loadPhoto(position)},loadPhotoRange:function(context_id,start_position,end_position){registry[context_id]&&registry[context_id].loadPhotoRange(start_position,end_position)},removePhoto:function(context_id,position){if(registry[context_id])return registry[context_id].removePhoto(position)},unremovePhoto:function(context_id,position){if(registry[context_id])return registry[context_id].unremovePhoto(position)},getPhoto:function(context_id,position){return registry[context_id]?registry[context_id].getPhoto(position):void 0},getPhotoPosition:getPhotoPosition,getPhotoPositions:function(photo_id){var positions={};return Y.Object.each(registry,function(context,context_id){var position=getPhotoPosition(context_id,photo_id);Y.Lang.isNumber(position)&&(positions[context_id]=position)}),positions},getPrevLimit:function(context_id){return registry[context_id]?registry[context_id].prev_limit:void 0},getNextLimit:function(context_id){return registry[context_id]?registry[context_id].next_limit:void 0}},PhotoContext.prototype={getPhoto:function(position){return this.photos[position+""]},setPhoto:function(position,photo){this.photos[position+""]=photo},getLoadedPositions:function(){var positions=[];return Y.Object.each(this.photos,function(photo,key){positions.push(parseInt(key,10))}),positions},getPhotoPosition:function(photo_id){var position;return Y.Object.some(this.photos,function(photo,key){if(photo.get("id")===photo_id)return position=key,!0}),parseInt(position,10)},loadPhoto:function(position){var outside_prev_limit,outside_next_limit,photo=this.getPhoto(position);photo?this.fire("photoLoaded",position,photo):(outside_prev_limit=Y.Lang.isNumber(this.prev_limit)&&position<this.prev_limit,outside_next_limit=Y.Lang.isNumber(this.next_limit)&&position>this.next_limit,outside_prev_limit||outside_next_limit?(outside_prev_limit&&this.fire("prevLimitReached",this.prev_limit),outside_next_limit&&this.fire("nextLimitReached",this.next_limit)):this.fetch(position))},loadPhotoRange:function(start_position,end_position){var i,j;for(j=start_position<end_position?(i=start_position,end_position):(i=end_position,start_position);i<=j;i++)this.loadPhoto(i)},removePhoto:function(position){var photo=this.getPhoto(position);this.removed[position+""]=!0,this.fire("photoRemoved",position,photo)},unremovePhoto:function(position){var photo=this.getPhoto(position);this.removed[position+""]=void 0,delete this.removed[position+""],this.fire("photoUnremoved",position,photo)},inBatchRange:function(batch,position){return batch&&batch.range&&position>=batch.range[0]&&position<=batch.range[1]},inNextBatch:function(position){return this.inBatchRange(this.next_batch,position)},inLoadingBatch:function(position){var batch_id,batch;for(batch_id in this.loading_batches)if(this.loading_batches.hasOwnProperty(batch)&&(batch=this.loading_batches[batch_id],this.inBatchRange(batch,position)))return!0;return!1},addToNextBatch:function(position){var batch,batch_sorted,closest_position,start_pos,photo_id,num_prev,num_next;(batch=this.next_batch.positions||[]).push(position),batch_sorted=batch.sort(Y.Array.numericSort),this.next_batch.positions=batch_sorted,closest_position=this.getClosestLoadedPosition(batch),Y.Lang.isNumber(closest_position)?(start_pos=closest_position,photo_id=this.getPhoto(closest_position).get("id"),(num_prev=closest_position-batch_sorted[0])<0&&(num_prev=0),(num_next=batch_sorted[batch_sorted.length-1]-closest_position)<0&&(num_next=0),this.next_batch.range=[start_pos-num_prev,start_pos+num_next],this.next_batch.params={start_pos:start_pos,photo_id:photo_id,num_prev:num_prev,num_next:num_next},this.next_batch.handle||(this.next_batch.handle=Y.later(500,this,this.fetchBatch))):Y.log("No photo was found in the context. At least one photo is needed to fetch data.","error",module_id)},fetch:function(position,bypass_limits){!bypass_limits&&Y.Lang.isNumber(this.prev_limit)&&position<this.prev_limit||!bypass_limits&&Y.Lang.isNumber(this.next_limit)&&position>this.next_limit||this.inNextBatch(position)||this.inLoadingBatch(position)||this.addToNextBatch(position)},fetchBatch:function(){var batch,batch_id,start_pos,photo_id,num_prev,num_next,method,params,reversed,callback,that,extras;switch(batch=this.next_batch,this.next_batch={},batch_id=batch.range.toString(),this.loading_batches[batch_id]=batch,start_pos=batch.params.start_pos,photo_id=batch.params.photo_id,num_prev=batch.params.num_prev,num_next=batch.params.num_next,this.type){case"contacts":method="flickr.contacts.getContext",params={photo_id:photo_id,num_prev:num_next,num_next:num_prev},reversed=!0;break;case"contactsfaves":method="flickr.contacts.getContextRecentlyFaved",params={photo_id:photo_id,num_prev:num_next,num_next:num_prev},this.user_id&&Y.config.flickr.user.nsid!==this.user_id&&(params.user_id=this.user_id),reversed=!0;break;case"photosof":method="flickr.photos.people.getContext",params={user_id:this.user_id,photo_id:photo_id,num_prev:num_next,num_next:num_prev},reversed=!0;break;case"faves":method="flickr.favorites.getContext",params={user_id:this.user_id,photo_id:photo_id,num_prev:num_next,num_next:num_prev},this.from&&(params.from=this.from),reversed=!0;break;case"gallery":method="flickr.galleries.getContext",params={gallery_id:this.gallery_id,photo_id:photo_id,num_prev:num_prev,num_next:num_next};break;case"photolist":method="flickr.photolist.getContext",params={photolist_id:this.id.split("photolist-")[1],photo_id:photo_id,num_prev:num_prev,num_next:num_next};break;case"pool":method="flickr.groups.pools.getContext",params={group_id:this.group_id,photo_id:photo_id,num_prev:num_next,num_next:num_prev},this.for_user&&(params.for_user=this.for_user),reversed=!0;break;case"search":break;case"set":method="flickr.photosets.getContext",params={photoset_id:this.set_id,photo_id:photo_id,num_prev:num_next,num_next:num_prev},reversed=!0;break;case"stream":method="flickr.photos.getContext",params={photo_id:photo_id,num_prev:num_next,num_next:num_prev,order_by:"datetaken"===this.order_by?"datetaken":"dateposted"===this.order_by?"dateposted":""},reversed=!0;break;case"tags":case"timescrubber":break;case"explore":method="flickr.explore.getContext",params={photo_id:photo_id,num_prev:num_prev,num_next:num_next};break;case"photos_recommendations":method="flickr.photos.recommendations.getContext",params={photo_id:photo_id,num_prev:num_prev,num_next:num_next}}if(photo_id&&(num_prev||num_next)&&method&&params)return extras=["url_sq","url_q","url_t","url_s","url_m","url_z","url_c","url_l","url_o","video_size","owner_name","path_alias","icon_server","needs_interstitial","count_comments","count_faves"],Y.config.flickr.flags.enable_hera&&extras.push("description"),Y.config.flickr.flags.enable_retina_lightbox?extras.push("url_h"):(Y.config.flickr.flags.enable_high_res_pref||Y.config.flickr.flags.dark_launch_high_res_pref)&&extras.push("url_h","url_k"),params.extras=extras.join(","),that=this,callback={success:function(obj){var next,prev,api_prev,api_next,i,photo,position,new_total;for(that.loading_batches[batch_id]=void 0,delete that.loading_batches[batch_id],new_total=parseInt(obj.data.count._content,10),api_prev=obj.data.prevphotos&&Y.Lang.isArray(obj.data.prevphotos.photo)?obj.data.prevphotos.photo:[],api_next=obj.data.nextphotos&&Y.Lang.isArray(obj.data.nextphotos.photo)?obj.data.nextphotos.photo:[],Y.Lang.isNumber(new_total)&&new_total!==parseInt(that.total,10)&&(that.total=new_total,that.fire("totalChange",that.total)),prev=reversed?api_next:api_prev,i=(next=reversed?api_prev:api_next).length-1;0<=i;i--)position=parseInt(start_pos,10)+1+i,that.getPhoto(position)||(next[i].description&&"string"==typeof next[i].description._content&&(next[i].description=next[i].description._content),photo=Y.PhotoData.add(next[i]),that.setPhoto(position,photo),that.fire("photoLoaded",position,photo));for(i=prev.length-1;0<=i;i--)position=parseInt(start_pos,10)-1-i,that.getPhoto(position)||(prev[i].description&&"string"==typeof prev[i].description._content&&(prev[i].description=prev[i].description._content),photo=Y.PhotoData.add(prev[i]),that.setPhoto(position,photo),that.fire("photoLoaded",position,photo));num_prev>prev.length&&(that.prev_limit=start_pos-prev.length,that.fire("prevLimitReached",that.prev_limit)),num_next>next.length&&(that.next_limit=start_pos+next.length,that.fire("nextLimitReached",that.next_limit))},failure:function(obj){var key_position=that.getPhotoPosition(batch.params.photo_id);Y.Array.each(batch.positions,function(position){that.fire("photoLoadFailure",position)}),obj&&obj.data&&("contacts"===that.type&&2===obj.data.code||"contactsfaves"===that.type&&2===obj.data.code||"photosof"===that.type&&3===obj.data.code||"faves"===that.type&&3===obj.data.code||"gallery"===that.type&&3===obj.data.code||"pool"===that.type&&2===obj.data.code||"set"===that.type&&2===obj.data.code||"stream"===that.type&&1===obj.data.code?(Y.log("The getContext API request failed because the key photo is not in the context","error",module_id),that.removePhoto(key_position)):("contacts"===that.type&&1===obj.data.code||"contactsfaves"===that.type&&1===obj.data.code||"photosof"===that.type&&1===obj.data.code||"faves"===that.type&&1===obj.data.code||"gallery"===that.type&&1===obj.data.code||"pool"===that.type&&1===obj.data.code||"set"===that.type&&1===obj.data.code||"stream"===that.type&&1===obj.data.code||"photolist"===that.type&&1===obj.data.code)&&(Y.log("The getContext API request failed because the key photo does not exist","error",module_id),that.getPhoto(key_position).set("deleted",!0))),that.loading_batches[batch_id]=void 0,delete that.loading_batches[batch_id]}},method&&params&&callback&&Y.flickrAPI.callMethod(method,params,callback),this},getClosestLoadedPosition:function(batch){var photo_positions,batch_total,batch_avg,closest_position;return photo_positions=Y.Object.keys(this.photos),batch_total=0,Y.Array.each(batch,function(pos){batch_total+=parseInt(pos,10)}),batch_avg=batch_total/batch.length,photo_positions.sort(function(pos_a,pos_b){return Math.abs(pos_a-batch_avg)-Math.abs(pos_b-batch_avg)}),Y.Array.some(photo_positions,function(position){if(!0!==this.photos[position].get("deleted"))return closest_position=position,!0},this),parseInt(closest_position,10)}},Y.augment(PhotoContext,Y.EventTarget)},"0.0.1",{requires:F.config.modules[module_id].requires||[],optional:F.config.modules[module_id].optional||[]})}();/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("intl",function(e,t){var n={},r="yuiRootLang",i="yuiActiveLang",s=[];e.mix(e.namespace("Intl"),{_mod:function(e){return n[e]||(n[e]={}),n[e]},setLang:function(e,t){var n=this._mod(e),s=n[i],o=!!n[t];return o&&t!==s&&(n[i]=t,this.fire("intl:langChange",{module:e,prevVal:s,newVal:t===r?"":t})),o},getLang:function(e){var t=this._mod(e)[i];return t===r?"":t},add:function(e,t,n){t=t||r,this._mod(e)[t]=n,this.setLang(e,t)},get:function(t,n,r){var s=this._mod(t),o;return r=r||s[i],o=s[r]||{},n?o[n]:e.merge(o)},getAvailableLangs:function(t){var n=e.Env._loader,r=n&&n.moduleInfo[t],i=r&&r.lang;return i?i.concat():s}}),e.augment(e.Intl,e.EventTarget),e.Intl.publish("intl:langChange",{emitFacade:!0})},"3.11.0",{requires:["intl-base","event-custom"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"3.11.0",{requires:["yui-base"]});
YUI.add("history-manager",function(Y){var first_state,current_state,show_photostream_context,win=window,loc=win.location,win_history=win.history,use_popstate=win_history.pushState&&win_history.replaceState,use_hashes=!use_popstate&&1.92<=Y.UA.gecko,saved_states={},enabled={photo:!0,faves:!0,group_pool:!0,gallery:!0,contacts:!0,contactsfaves:!0,photostream:!0,explore:!!Y.config.flickr.flags.enable_justified_explore}[Y.config.flickr.page_type]&&(use_popstate||use_hashes);function setState(new_state){Y.log("setState","info","history-manager"),first_state=first_state||new_state,current_state=new_state}function getStateFromUrl(){var url_regex,path_parts,pathalias,photo_id,context_id,owner_id,page,lightbox,tour,gallery_id,date,state={};if((path_parts=(url_regex=Y.urls.regexes[Y.config.flickr.page_type])&&url_regex.exec(loc.pathname))instanceof Array)switch(Y.config.flickr.page_type){case"photo":path_parts[1]&&path_parts[2]&&("photostream"===path_parts[3]&&(show_photostream_context=!0),pathalias=path_parts[1],photo_id=path_parts[2],context_id=path_parts[3]||"photostream",page=path_parts[4]||(-1<loc.search.indexOf("page=")?loc.search.split("page=")[1].split("&")[0]:void 0)||1,lightbox=!!path_parts[5]||void 0,tour=!!path_parts[6]||void 0,pathalias&&(state.pathalias=decodeURIComponent(pathalias)),photo_id&&(state.photo_id=photo_id),context_id&&(state.context_id=decodeURIComponent(context_id)),page&&(state.page=page),lightbox&&(state.lightbox=lightbox),tour&&(state.tour=tour));break;case"faves":path_parts[1]&&(pathalias=path_parts[1]&&decodeURIComponent(path_parts[1]),from=path_parts[2]&&decodeURIComponent(path_parts[2]),page=path_parts[3],photo_id=path_parts[4],lightbox=!!path_parts[5],view_mode=path_parts[6],pathalias&&(state.pathalias=pathalias),from&&(state.from=from),page&&(state.page=page),photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox),view_mode&&(state.view_mode=view_mode));break;case"group_pool":path_parts[1]&&(group_id=path_parts[1],owner_id=path_parts[2],photo_id=path_parts[3],page=path_parts[4],lightbox=!!path_parts[5]||void 0,view_mode=path_parts[6],group_id&&(state.group_id=decodeURIComponent(group_id)),owner_id&&(state.owner_id=decodeURIComponent(owner_id)),photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox));break;case"gallery":path_parts[1]&&path_parts[2]&&(pathalias=path_parts[1],gallery_id=path_parts[2],photo_id=path_parts[3],lightbox=!!path_parts[4]||void 0,pathalias&&(state.pathalias=decodeURIComponent(pathalias)),gallery_id&&(state.gallery_id=decodeURIComponent(gallery_id)),photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox));break;case"photostream":path_parts[1]&&(pathalias=path_parts[1],photo_id=path_parts[3],page=path_parts[2],lightbox=!!path_parts[4]||void 0,pathalias&&(state.pathalias=decodeURIComponent(pathalias)),page&&(state.page=path_parts[1]),photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox));break;case"contacts":page=path_parts[1],photo_id=path_parts[2],lightbox=!!path_parts[3]||void 0,page&&(state.page=path_parts[1]),photo_id&&(state.photo_id=path_parts[2]),lightbox&&(state.lightbox=lightbox);break;case"explore":date=path_parts[1],photo_id=path_parts[2],lightbox=path_parts[3],date&&(state.date=date),photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox);break;default:photo_id=path_parts[1],lightbox=!!path_parts[2]||void 0,photo_id&&(state.photo_id=photo_id),lightbox&&(state.lightbox=lightbox)}return state}function setStateFromUrl(){setState(getStateFromUrl())}function objectsAreEquivalent(obj1,obj2){var key;for(key in obj1)if(obj1.hasOwnProperty(key)&&(!obj2.hasOwnProperty(key)||obj2[key]!==obj1[key]))return!1;for(key in obj2)if(obj2.hasOwnProperty(key)&&(!obj1.hasOwnProperty(key)||obj1[key]!==obj2[key]))return!1;return!0}function pushState(state,config){var replace,title,url;Y.log("pushState","info","history-manager"),replace=(config=config||{}).replace,title=Y.Lang.isString(config.title)?config.title:win.document.title,url=function(state){var url="",config={};switch(Y.config.flickr.page_type){case"photo":url+="/photos/"+state.pathalias+"/"+state.photo_id+"/",state.context_id&&(show_photostream_context||"photostream"!==state.context_id)&&(url+="in/"+state.context_id+"/"),1<state.page?url+="page"+state.page+"/":state.lightbox?url+="lightbox/":(state.tour||first_state.tour)&&(url+="tour/");break;case"faves":state.pathalias&&(config.path_alias=state.pathalias),state.from&&(config.from=state.from),state.page&&(config.page=state.page),state.photo_id&&(config.photo_id=state.photo_id),state.lightbox&&(config.lightbox=state.lightbox),url=Y.urls.get("faves",config);break;case"group_pool":url+="/groups/"+state.group_id+"/pool/",state.owner_id&&(url+=state.owner_id+"/"),state.photo_id&&(url+="with/"+state.photo_id+"/"),state.lightbox&&(url+="lightbox/");break;case"gallery":url+="/photos/"+state.pathalias+"/galleries/"+state.gallery_id+"/",state.photo_id&&(url+="with/"+state.photo_id+"/"),state.lightbox&&(url+="lightbox/");break;case"contacts":url+="/photos/friends/",state.photo_id?url+="with/"+state.photo_id+"/":Y.config.flickr.flags.enable_justified_contacts_photos&&1<state.page&&(url+="page"+state.page+"/"),state.lightbox&&(url+="lightbox/");break;case"photostream":url+="/photos/"+state.pathalias+"/",state.photo_id&&(Y.listData&&Y.listData.is_public_view?url+="public/with/"+state.photo_id+"/":url+="with/"+state.photo_id+"/"),state.lightbox&&(url+="lightbox/");break;case"explore":url+="/explore",state.date&&(url+="/"+state.date),state.photo_id&&(url+="/with/"+state.photo_id),state.lightbox&&(url+="/lightbox");break;case"contactsfaves":url+="/photos/contacts/favorites/",state.photo_id&&(url+="with/"+state.photo_id+"/"),state.lightbox&&(url+="lightbox/")}return url}(state),objectsAreEquivalent(state,current_state)||(setState(state),use_popstate?(replace?win_history.replaceState(state,title,url):win_history.pushState(state,title,url),notify()):use_hashes&&(saved_states[url]=state,url!==loc.pathname&&url!==loc.pathname+"/"||(url=""),(url||getHash())&&(url=url||"/",replace?loc.replace("#"+url):loc.assign("#"+url)),notify()))}function replaceState(state,config){pushState(state,{replace:!0,title:(config=config||{}).title})}function getState(){var key,clone={};if(current_state)for(key in current_state)current_state.hasOwnProperty(key)&&(clone[key]=current_state[key]);return clone}function getHash(){var hash_pos=loc.href.indexOf("#");return-1===hash_pos?"":loc.href.substr(hash_pos+1)}function notify(){Y.fire("historyManager:change",getState())}function handlePop(e){Y.log("handlePop","info","history-manager"),handleStateChange(e.state)}function handleHashChange(e){var hash=getHash();"/"===hash&&(hash=loc.pathname),handleStateChange(saved_states[hash])}function handleStateChange(new_state){var something_changed;Y.log("handleStateChange","info","history-manager"),objectsAreEquivalent(new_state=new_state||getStateFromUrl(),current_state)||(something_changed=!0),something_changed&&(setState(new_state),notify())}enabled&&(setStateFromUrl(),use_popstate?win.addEventListener("popstate",handlePop,!1):use_hashes&&win.addEventListener("hashchange",handleHashChange,!1),replaceState(current_state)),Y.historyManager={enabled:enabled,pushState:pushState,replaceState:replaceState,getState:getState,setState:setState,getStateFromUrl:getStateFromUrl,setStateFromUrl:setStateFromUrl}},"0.0.1",{requires:F.config.modules["history-manager"].requires||[],optional:F.config.modules["history-manager"].optional||[]});YUI.add("html5-balls",function(Y){var BALL_TEMPLATE='<div class="html5-balls"><div class="blueball"></div><div class="pinkball"></div></div>';Y.UA.ie&&Y.UA.ie<9&&(BALL_TEMPLATE='<div class="html4-balls"></div>');function Balls(attr){this.set("node",attr.node),this.set("width",attr.width);var node=this.get("node");node.create(BALL_TEMPLATE).setStyle("width",this.get("width")),node.set("innerHTML",BALL_TEMPLATE)}Y.augment(Balls,Y.Attribute),Y.Balls=Balls},"0.0.1",{requires:F.config.modules["html5-balls"].requires||[],optional:F.config.modules["html5-balls"].optional||[]});YUI.add("lightbox-transjax",function(a){a.transjax.add("lightbox",{by:"By %s",close:"Close",pause:"Pause",play:"Play",prev:"Prev",next:"Next",newer:"Newer",older:"Older",view_photo_page:"View photo page",view_video_page:"View video page",favorite_with_count_one:"1 favorite",favorite_with_count_more_than_one:"%s favorites",favorite:"Favorite",comment_with_count_one:"1 comment",comment_with_count_more_than_one:"%s comments",comment:"Comment",allsizes:"View all sizes",must_be_signed_in:"You must be signed in to see this content.",sign_in:"SIGN IN",outside_safesearch:"This photo falls outside your current SafeSearch filter.",you_can_click_through:"You can click through to see it if you want.",show_the_photo:"YES PLEASE, SHOW ME THE PHOTO",view_photo_in_lightbox:"View this photo in a light box",view_photos_in_lightbox:"View these photos in a light box",close_the_lightbox:"Close the Light Box",back_to_yahoo:"Back to Yahoo.com",prev_photo:"Previous photo",next_photo:"Next photo",start_or_stop_slideshow_mode:"Start or stop slideshow mode",fave_the_current_photo:"Fave the current photo",fullscreen:"Fullscreen",fullscreen_exit:"Exit Fullscreen",launch_iphone_app:"Launch the Flickr iPhone App"})},"0.0.1",{requires:F.config.modules["lightbox-transjax"].requires||[],optional:F.config.modules["lightbox-transjax"].optional||[]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-complex",function(e,t){var n=e.Attribute;n.Complex=function(){},n.Complex.prototype={_normAttrVals:n.prototype._normAttrVals,_getAttrInitVal:n.prototype._getAttrInitVal},e.AttributeComplex=n.Complex},"3.11.0",{requires:["attribute-base"]});
/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("substitute",function(e,t){var n=e.Lang,r="dump",i=" ",s="{",o="}",u=/(~-(\d+)-~)/g,a=/\{LBRACE\}/g,f=/\{RBRACE\}/g,l=function(t,l,c,h){var p,d,v,m,g,y,b=[],w,E,S=t.length;for(;;){p=t.lastIndexOf(s,S);if(p<0)break;d=t.indexOf(o,p);if(p+1>=d)break;w=t.substring(p+1,d),m=w,y=null,v=m.indexOf(i),v>-1&&(y=m.substring(v+1),m=m.substring(0,v)),g=l[m],c&&(g=c(m,g,y)),n.isObject(g)?e.dump?n.isArray(g)?g=e.dump(g,parseInt(y,10)):(y=y||"",E=y.indexOf(r),E>-1&&(y=y.substring(4)),g.toString===Object.prototype.toString||E>-1?g=e.dump(g,parseInt(y,10)):g=g.toString()):g=g.toString():n.isUndefined(g)&&(g="~-"+b.length+"-~",b.push(w)),t=t.substring(0,p)+g+t.substring(d+1),h||(S=p-1)}return t.replace(u,function(e,t,n){return s+b[parseInt(n,10)]+o}).replace(a,s).replace(f,o)};e.substitute=l,n.substitute=l},"3.11.0",{requires:["yui-base"],optional:["dump"]});
YUI.add("flickr-dialog-base",function(Y){Y.FlickrDialog={};Y.FlickrDialog.Base=function(attr){Y.Attribute.call(this,Y.FlickrDialog.ATTRS,attr),this._createAndInsertHTML(),this._attachEvents()},Y.extend(Y.FlickrDialog.Base,Y.Attribute),Y.FlickrDialog.ATTRS={dialogContentHTML:{value:"",validator:Y.Lang.isString},width:{value:330,validator:function(value){return Y.Lang.isNumber(value)||"auto"===value}},modal:{value:!0,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},context:{valueFn:function(){return"flickr-dialog-"+Y.guid()},validator:Y.Lang.isString,writeOnce:"initOnly"},dialogClass:{value:"flickr-dialog-base",validator:Y.Lang.isString},role:{value:"dialog",validator:Y.Lang.isString,writeOnce:"initOnly"},allowClicksOnMaskToHide:{value:!1,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},allowReturnKeyToConfirm:{value:!1,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},allowEscKeyToCancel:{value:!0,validator:Y.Lang.isBoolean},allowEventsToPropagate:{value:!0,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},allowFocusOnFirstElement:{value:!0,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},restoreFocusOnHide:{value:!0,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},setAriaLabelledby:{value:!0,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},allowModalToShrink:{value:!1,validator:Y.Lang.isBoolean,writeOnce:"initOnly"},shrunkWidth:{value:280,validator:Y.Lang.isNumber},shrunkClass:{value:"flickr-dialog-shrunk",validator:Y.Lang.isString},autoCenter:{value:!0,validator:Y.Lang.isNumber},resizeDetectionThrottle:{value:50,validator:Y.Lang.isNumber},dialogNode:{value:null},maskNode:{value:null},primaryControl:{value:null},timestamp:{value:null,validator:Y.Lang.isNumber},showing:{value:!1,validator:Y.Lang.isBoolean},stackingOrder:{value:0,validator:Y.Lang.isNumber}},Y.FlickrDialog.Base.prototype._createAndInsertHTML=function(){var titleNode,titleNodeId;this.set("timestamp",(new Date).getTime()),this.set("dialogNode",Y.Node.create(Y.substitute('<div class="flickr-dialog {dialogClass} hidden" role="{role}"><div class="flickr-dialog-container"><div class="flickr-dialog-content-wrapper">{dialogContentHTML}</div></div></div>',{dialogClass:this.get("dialogClass"),role:this.get("role"),dialogContentHTML:this.get("dialogContentHTML")}))),Y.one("body").append(this.get("dialogNode")),this.set("maskNode",Y.Node.create('<div class="flickr-dialog-mask hidden"></div>')),Y.one("body").append(this.get("maskNode")),this.set("primaryControl",this.get("dialogNode").one("input, button, textarea")||this.get("dialogNode")),this.get("dialogNode").setStyle("width","auto"===this.get("width")?this.get("width"):this.get("width")+"px"),this.get("setAriaLabelledby")&&(titleNode=this.get("dialogNode").one(".hd h1, .hd h2, .hd h3, .hd h4, .hd h5, .hd h6"))&&(titleNodeId=titleNode.generateID(),this.get("dialogNode").setAttribute("aria-labelledby",titleNodeId))},Y.FlickrDialog.Base.prototype._attachEvents=function(){this.get("allowClicksOnMaskToHide")&&this.get("maskNode").on("click",this._hideAdapter,this),this.get("allowReturnKeyToConfirm")&&Y.keyboardShortcutManager.register({keystring:"13",handler:this._confirmAdapter,context:this.get("context"),scope:this}),Y.keyboardShortcutManager.register({keystring:"27",handler:this._hideAdapter,context:this.get("context"),scope:this}),this.get("modal")&&Y.on(["FlickrDialog:show","FlickrDialog:hide"],this._adjustMaskOpacity,this),this.after("dialogContentHTMLChange",function(e){this.get("dialogNode").one(".flickr-dialog-content-wrapper").set("innerHTML",e.newVal)}),this.after(["widthChange","shrunkWidthChange"],function(e){this.get("dialogNode").setStyle("width","auto"===this.get("width")?this.get("width"):this.get("width")+"px"),this.get("autoCenter")&&(this.get("allowModalToShrink")?(this._modalWidth=this.get("dialogNode").get("offsetWidth"),this._modalHeight=this.get("dialogNode").get("offsetHeight"),this._checkWindowSize({widthWasChanged:!0})):this.center())}),this.after("dialogClassChange",function(e){this.get("dialogNode").removeClass(e.prevVal).addClass(e.newVal)}),this.after("shrunkClassChange",function(e){this._currentlyShrunk&&this.get("dialogNode").removeClass(e.prevVal).addClass(e.newVal)})},Y.FlickrDialog.Base.prototype._hideAdapter=function(e){27===e.charCode&&!this.get("allowEscKeyToCancel")||(this.get("allowEventsToPropagate")||e.stopPropagation(),this.hide())},Y.FlickrDialog.Base.prototype._confirmAdapter=function(e){var focusedElement=Y.focusTracker.get();focusedElement&&focusedElement.hasClass("CancelButt")||this.hide(!0)},Y.FlickrDialog.Base.prototype._stack=function(e){this.get("dialogNode").setStyle("zIndex",20001+2*Y.FlickrDialog.Base.visibleDialogs),this.get("maskNode").setStyle("zIndex",2e4+2*Y.FlickrDialog.Base.visibleDialogs)},Y.FlickrDialog.Base.prototype._unstack=function(e){this.get("dialogNode").setStyle("zIndex",""),this.get("maskNode").setStyle("zIndex","")},Y.FlickrDialog.Base.prototype._adjustMaskOpacity=function(e){var maskOpacity;this.get("showing")&&(0===this.get("stackingOrder")||1===Y.FlickrDialog.Base.visibleModalDialogs?this.get("maskNode").setStyle("opacity",.35):(maskOpacity=1-Math.pow(.65,1/Y.FlickrDialog.Base.visibleModalDialogs),this.get("maskNode").setStyle("opacity",maskOpacity)))},Y.FlickrDialog.Base.prototype._enforceModality=function(e){this.isTopDialog()&&!this.get("dialogNode").contains(e.target)&&this.get("primaryControl").focus()},Y.FlickrDialog.Base.prototype._checkWindowSize=function(e){var viewportWidth=Y.DOM.winWidth(),viewportHeight=Y.DOM.winHeight(),hasChanged=!this._currentlyShrunk&&(this._modalWidth>viewportWidth||this._modalHeight>viewportHeight)||this._currentlyShrunk&&this._modalWidth<=viewportWidth&&this._modalHeight<=viewportHeight,widthWasChanged=e.widthWasChanged;this.get("allowModalToShrink")&&(hasChanged||widthWasChanged)&&(this._currentlyShrunk&&!widthWasChanged||!(this._modalWidth>viewportWidth||this._modalHeight>viewportHeight)?(this.get("dialogNode").setStyle("width","auto"===this.get("width")?this.get("width"):this.get("width")+"px"),this.get("dialogNode").removeClass(this.get("shrunkClass")),this._currentlyShrunk=!1,this.fire("unshrunk")):(this.get("dialogNode").setStyle("width","auto"===this.get("shrunkWidth")?this.get("shrunkWidth"):this.get("shrunkWidth")+"px"),this.get("dialogNode").addClass(this.get("shrunkClass")),this._currentlyShrunk=!0,this.fire("shrunk")),this.get("autoCenter")&&this.center()),this.fire("viewportResized",{viewportHeight:viewportHeight,viewportWidth:viewportWidth,hasChanged:hasChanged,modalHeight:this._modalHeight,modalWidth:this._modalWidth})},Y.FlickrDialog.Base.prototype.show=function(argsToPassToEvent){this.get("showing")||(this.get("restoreFocusOnHide")&&(this._previouslySelectedNode=Y.focusTracker.get()),this.get("dialogNode").removeClass("hidden"),this.center(),this._stack(),this.get("modal")&&(this.get("maskNode").removeClass("hidden"),this._modalityHandler=Y.one(Y.config.doc).on("focus",this._enforceModality,this)),this._modalWidth=this.get("dialogNode").get("offsetWidth"),this._modalHeight=this.get("dialogNode").get("offsetHeight"),this._windowResizeHandler=Y.on("resize",Y.betterThrottle(this._checkWindowSize,this.get("resizeDetectionThrottle"),this)),Y.PageContext.set(this.get("context")),this.set("showing",!0),Y.FlickrDialog.Base.visibleDialogs++,this.get("modal")&&Y.FlickrDialog.Base.visibleModalDialogs++,this.set("stackingOrder",Y.FlickrDialog.Base.visibleDialogs),this.fire("show",argsToPassToEvent),Y.fire("FlickrDialog:show"),this.get("allowFocusOnFirstElement")&&(Y.focusTracker.blur(),this.get("primaryControl").focus()))},Y.FlickrDialog.Base.prototype.hide=function(argsToPassToEvent){this.get("showing")&&(this.get("modal")&&this._modalityHandler.detach(),this.get("allowModalToShrink")&&this._windowResizeHandler.detach(),Y.focusTracker.isInput()&&Y.focusTracker.blur(),this.get("dialogNode").addClass("hidden"),this.get("maskNode").addClass("hidden"),this._previouslySelectedNode&&Y.later(0,this._previouslySelectedNode,this._previouslySelectedNode.focus),Y.PageContext.unset(this.get("context")),this._unstack(),this.set("showing",!1),Y.FlickrDialog.Base.visibleDialogs--,this.get("modal")&&Y.FlickrDialog.Base.visibleModalDialogs--,this.set("stackingOrder",0),this.fire("hide",argsToPassToEvent),Y.fire("FlickrDialog:hide"))},Y.FlickrDialog.Base.prototype.center=function(){var w=this.get("dialogNode").get("offsetWidth"),h=this.get("dialogNode").get("offsetHeight");this.get("dialogNode").setStyle("marginLeft",-w/2+"px"),this.get("dialogNode").setStyle("marginTop",-h/2+"px"),this.fire("center")},Y.FlickrDialog.Base.prototype.isTopDialog=function(){return this.get("stackingOrder")===Y.FlickrDialog.Base.visibleDialogs},Y.FlickrDialog.Base.prototype.destroy=function(argsToPassToEvent){this.hide(),this.get("dialogNode").empty(),this.get("maskNode").empty(),this.get("dialogNode").remove(!0),this.get("maskNode").remove(!0),this.fire("destroy",argsToPassToEvent),Y.fire("FlickrDialog:destroy")},Y.FlickrDialog.Base.visibleDialogs=0,Y.FlickrDialog.Base.visibleModalDialogs=0},"0.0.1",{requires:F.config.modules["flickr-dialog-base"].requires||[],optional:F.config.modules["flickr-dialog-base"].optional||[]});YUI.add("flickr-dialog-alert",function(Y){Y.FlickrDialog.Alert=function(attr){var defaults,attributeConfig;defaults={message:"",confirmButtonText:Y.transjax.get("global-dialog","button_confirm"),confirmButtonClass:"Butt",confirmButtonId:Y.guid(),callback:function(e){},dialogClass:"flickr-dialog-alert",role:"alertdialog",allowReturnKeyToConfirm:!0},(attr=Y.mix(attr||{},defaults)).dialogContentHTML=Y.substitute('<div class="hd">{message}</div><div class="bd button-container"><input type="button" class="{confirmButtonClass}" value="{confirmButtonText}" id="{confirmButtonId}"></div>',attr),Y.FlickrDialog.Alert.superclass.constructor.call(this,attr),attributeConfig={message:{value:defaults.message,validator:Y.Lang.isString,writeOnce:"initOnly"},confirmButtonText:{value:defaults.confirmButtonText,validator:Y.Lang.isString,writeOnce:"initOnly"},confirmButtonClass:{value:defaults.confirmButtonClass,validator:Y.Lang.isString,writeOnce:"initOnly"},confirmButtonId:{value:defaults.confirmButtonId,validator:Y.Lang.isString,writeOnce:"initOnly"},callback:{value:defaults.callback,validator:Y.Lang.isFunction,writeOnce:"initOnly"}},this.addAttrs(attributeConfig,attr),Y.one("#"+this.get("confirmButtonId")).on("click",this.hide,this),this.on("hide",this.get("callback"),this)};Y.extend(Y.FlickrDialog.Alert,Y.FlickrDialog.Base,{},{})},"0.0.1",{requires:F.config.modules["flickr-dialog-alert"].requires||[],optional:F.config.modules["flickr-dialog-alert"].optional||[]});YUI.add("flickr-dialog-confirmation",function(Y){PHOTO_TEMPLATE='<div class="photo-container"><img src="{url}" width="{width}" height="{height}"></div>',Y.FlickrDialog.ConfirmationDialog=function(attr){var defaults,attributeConfig;defaults={title:"",message:"",photo:null,confirmButtonText:Y.transjax.get("global-dialog","button_confirm"),confirmButtonClass:"Butt",confirmButtonId:Y.guid(),cancelButtonText:Y.transjax.get("global-dialog","button_cancel"),cancelButtonClass:"CancelButt",cancelButtonId:Y.guid(),callback:function(confirmed){},dialogClass:"flickr-dialog-confirmation",role:"alertdialog",allowReturnKeyToConfirm:!0},(attr=Y.mix(attr||{},defaults)).titleHTML=attr.title?Y.substitute('<div class="hd"><h3>{title}</h3></div>',attr):"",attr.photoHTML=attr.photo?Y.substitute(PHOTO_TEMPLATE,attr.photo):"",attr.dialogContentHTML=Y.substitute('{titleHTML}<div class="bd">{message}{photoHTML}</div><div class="bd button-container"><input type="button" class="{confirmButtonClass}" value="{confirmButtonText}" id="{confirmButtonId}"> <input type="button" class="{cancelButtonClass}" value="{cancelButtonText}" id="{cancelButtonId}"></div>',attr),Y.FlickrDialog.ConfirmationDialog.superclass.constructor.call(this,attr),attributeConfig={title:{value:defaults.title,validator:Y.Lang.isString,writeOnce:"initOnly"},message:{value:defaults.message,validator:Y.Lang.isString,writeOnce:"initOnly"},photo:{value:defaults.photo,writeOnce:"initOnly"},confirmButtonText:{value:defaults.confirmButtonText,validator:Y.Lang.isString,writeOnce:"initOnly"},confirmButtonClass:{value:defaults.confirmButtonClass,validator:Y.Lang.isString,writeOnce:"initOnly"},confirmButtonId:{value:defaults.confirmButtonId,validator:Y.Lang.isString,writeOnce:"initOnly"},cancelButtonText:{value:defaults.cancelButtonText,validator:Y.Lang.isString,writeOnce:"initOnly"},cancelButtonClass:{value:defaults.cancelButtonClass,validator:Y.Lang.isString,writeOnce:"initOnly"},cancelButtonId:{value:defaults.cancelButtonId,validator:Y.Lang.isString,writeOnce:"initOnly"},callback:{value:defaults.callback,writeOnce:"initOnly"}},this.addAttrs(attributeConfig,attr),Y.one("#"+this.get("confirmButtonId")).on("click",this._checkConfirmationAndHide,this,!0),Y.one("#"+this.get("cancelButtonId")).on("click",this._checkConfirmationAndHide,this),this.on("hide",this._invokeCallback,this)};var proto={};proto._checkConfirmationAndHide=function(e,confirmed){this.hide(confirmed)},proto._invokeCallback=function(e,confirmed){"function"==typeof this.get("callback")?this.get("callback")(confirmed):confirmed&&"function"==typeof this.get("callback").confirmed?this.get("callback").confirmed():confirmed||"function"!=typeof this.get("callback").cancelled||this.get("callback").cancelled()},Y.extend(Y.FlickrDialog.ConfirmationDialog,Y.FlickrDialog.Base,proto,{})},"0.0.1",{requires:F.config.modules["flickr-dialog-confirmation"].requires||[],optional:F.config.modules["flickr-dialog-confirmation"].optional||[]});YUI.add("flickr-dialog-destructive-confirmation",function(Y){Y.FlickrDialog.DestructiveConfirmationDialog=function(attr){var defaults;defaults={confirmButtonClass:"DeleteButt"},attr=Y.mix(attr||{},defaults),Y.FlickrDialog.DestructiveConfirmationDialog.superclass.constructor.call(this,attr),this.set("primaryControl",Y.one("#"+this.get("cancelButtonId")))};Y.extend(Y.FlickrDialog.DestructiveConfirmationDialog,Y.FlickrDialog.ConfirmationDialog,{},{})},"0.0.1",{requires:F.config.modules["flickr-dialog-destructive-confirmation"].requires||[],optional:F.config.modules["flickr-dialog-destructive-confirmation"].optional||[]});YUI.add("flickr-dialog-frame",function(Y){Y.FlickrDialog.Frame=function(attr){attr=Y.mix(attr||{},{dialogClass:"flickr-dialog-frame"}),Y.FlickrDialog.Frame.superclass.constructor.call(this,attr)};Y.extend(Y.FlickrDialog.Frame,Y.FlickrDialog.Base,{},{})},"0.0.1",{requires:F.config.modules["flickr-dialog-frame"].requires||[],optional:F.config.modules["flickr-dialog-frame"].optional||[]});YUI.add("flickr-dialog-short-message",function(Y){Y.FlickrDialog.ShortMessage=function(attr){var defaults,attributeConfig;defaults={message:"",width:"auto",type:"no-icon",callback:function(e){},dialogClass:"flickr-dialog-short-message",role:"alertdialog",allowClicksOnMaskToHide:!0,allowReturnKeyToConfirm:!0,timeToHide:4e3},(attr=Y.mix(attr||{},defaults)).dialogContentHTML=Y.substitute('<span class="short-msg-{type}"></span>{message}',attr),Y.FlickrDialog.ShortMessage.superclass.constructor.call(this,attr),attributeConfig={message:{value:defaults.message,validator:Y.Lang.isString,writeOnce:"initOnly"},callback:{value:defaults.callback,writeOnce:"initOnly"},timeToHide:{value:defaults.timeToHide,validator:Y.Lang.isNumber,writeOnce:"initOnly"}},this.addAttrs(attributeConfig,attr),this.on("hide",this.get("callback"),this),this.get("timeToHide")&&(this.on("show",this._startFinalCountdown,this),this.on("hide",this._cancelFinalCountdown,this))};var proto={};proto._startFinalCountdown=function(){this._timer=Y.later(this.get("timeToHide"),this,this.hide)},proto._cancelFinalCountdown=function(){this._timer.cancel()},Y.extend(Y.FlickrDialog.ShortMessage,Y.FlickrDialog.Base,proto,{})},"0.0.1",{requires:F.config.modules["flickr-dialog-short-message"].requires||[],optional:F.config.modules["flickr-dialog-short-message"].optional||[]});YUI.add("flickr-dialog-spinner",function(Y){Y.FlickrDialog.Spinner=function(attr){attr=Y.mix(attr||{},{dialogClass:"flickr-dialog-spinner",width:"auto",allowEscKeyToCancel:!1}),Y.FlickrDialog.Spinner.superclass.constructor.call(this,attr)};Y.extend(Y.FlickrDialog.Spinner,Y.FlickrDialog.Base,{},{})},"0.0.1",{requires:F.config.modules["flickr-dialog-spinner"].requires||[],optional:F.config.modules["flickr-dialog-spinner"].optional||[]});YUI.add("flickr-dialog",function(Y){},"0.0.1",{requires:F.config.modules["flickr-dialog"].requires||[],optional:F.config.modules["flickr-dialog"].optional||[]});YUI.add("photo-comments-transjax",function(a){a.transjax.add("photo-comments",{error_delete_permission:"Sorry, but you don't have permission to delete that comment, or you aren't signed into Flickr.",error_delete_generic:"Sorry, but there was a problem deleting the comment.",error_edit_getting:"Sorry, but there was a problem getting the comment to edit.",error_edit_generic:"Sorry, but there was a problem editing the comment.",error_add_rate_limit:'Slow down, partner! To protect the Flickr community against spam, we place a few restrictions on new accounts. You can read more about these restrictions in <a href="/help/website/#870679">this FAQ</a>.',error_add_generic:"We had a problem saving your comment.",error_getting_comments:"Sorry, but there was a problem getting the comments for this photo.",error_empty_body:"An empty comment box? That won't work!",reply_wipe_confirmation:"You already started typing a comment. If you continue, that text will be lost!",reply_button_confirm:"OKAY",reply_button_cancel:"CANCEL",delete_confirmation:"Are you sure you want to delete this comment?",delete_button_confirm:"YES, DELETE IT",delete_button_cancel:"CANCEL",hide_formatting_tips:"Hide formatting tips",faves_rollup_placeholder:"...and %s more favorites",block_user:"Block this user from commenting on your stuff in the future.",user_blocked:'You are currently blocking this Flickr member. They cannot add any more comments to any of your stuff. You can remove this via the blocked list on your "Contacts" page.',deleting:"Deleting...",trigger_recompile:"",bert_lorem_ipsum:"Lorem Ip'sum lorem"})},"0.0.1",{requires:["transjax-base"]});YUI.add("fb-reco",function(Y){function Connect(){var connectButt=Y.one(".connect-card .fb-butt");connectButt&&connectButt.on("click",this.getAccessToken,this)}Connect.prototype={getAccessToken:function(e){if(e.halt(),FB){FB.getLoginStatus(function(response){"connected"===response.status?window.location.href="/friends/facebook/":"not_authorized"===response.status||FB.login(function(response){if(response.authResponse){FB.getAuthResponse().accessToken;window.location.href="/friends/facebook/"}},{scope:"publish_actions,user_friends"})})}else cb.call(ref,!1)}};var f=new Connect;Y.fbReco=f},"0.0.1",{requires:F.config.modules["fb-reco"].requires||[]});YUI.add("string-filters",function(Y){function wordwrap(str,width,break_str,cut){if(break_str=break_str||"\n",width=width||75,cut=cut||!1,!str)return str;var regex=".{1,"+width+"}(\\s|$)"+(cut?"|.{"+width+"}|.+$":"|\\S+?(\\s|$)");return str.match(new RegExp(regex,"g")).join(break_str)}function nibble_to_hex(nibble){return"0123456789ABCDEF".charAt(nibble)}Y.StringFilters={nl2br:function(str){return str.replace(/\n/g,"<br>")},nl2p:function(str){return str=(str=(str=(str=(str=(str=(str="<p>"+(str=Y.Lang.trim(str))+"</p>").replace(/<blockquote>(.*?)<\/blockquote>/g,"</p><blockquote><p>$1</p></blockquote><p>")).replace(/(?:\r?\n){2,}/g,"</p><p>")).replace(/(?:\r?\n){1}/g,"<br>")).replace(/<p><\/p>/g,"")).replace(/<br><\/p>/g,"</p>")).replace(/<p><br>/g,"<p>")},escape_entities:function(str,escape_all){var entityTable={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",402:"fnof",710:"circ",732:"tilde",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8226:"bull",8230:"hellip",8240:"permil",8242:"prime",8243:"Prime",8249:"lsaquo",8254:"oline",8260:"frasl",8250:"rsaquo",8364:"euro",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams"};return escape_all?str.replace(/[\u00A0-\u2666<>\&]/g,function(c){return"&"+(entityTable[c.charCodeAt(0)]?entityTable[c.charCodeAt(0)]:"#"+c.charCodeAt(0))+";"}):str=(str=(str=(str=str.replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")},unescape_entities:function unescape_entities(str,unescape_all){if(!str.match(/&/))return str;if(unescape_all){var div=document.createElement("div");return div.innerHTML=str,0===div.childNodes.length?"":null===div.childNodes[0].nodeValue?unescape_entities(str,!1):div.childNodes[0].nodeValue}return str=(str=(str=(str=str.replace(/&amp;/g,"&")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")},linkify:function(str,onclick,space){if(onclick=(onclick=onclick||"").replace(/\s/g,space=space||" "),-1<str.indexOf("http://")){for(var strA=str.split("\n"),y=0;y<strA.length;y++){for(var substrA=strA[y].split(" "),t=0;t<substrA.length;t++){var openParen="";if("("===substrA[t].substr(0,1)&&(substrA[t]=substrA[t].replace(/\(/g,""),openParen="("),"http://"===substrA[t].substr(0,7)){var url=substrA[t],paren="";")"===url.substr(url.length-1,1)&&(url=url.substr(0,url.length-1),paren=")");var period="";"."===url.substr(url.length-1,1)&&(url=url.substr(0,url.length-1),period="."),substrA[t]=('<a href="'+url+'" rel="nofollow" onclick="'+onclick+'">'+url+"</a>"+paren+period).replace(/\s/g,space)}substrA[t]=openParen+substrA[t]}strA[y]=substrA.join(" ")}str=strA.join("\n")}return str},possess:function(name_thing){return Y.config.flickr.lang&&"en-us"!==Y.config.flickr.lang?name_thing:"s"===name_thing.substr(name_thing.length-1,1).toLowerCase()?name_thing+"'":name_thing+"'s"},wordwrap:wordwrap,zero_width_wordwrap:function(str,width,break_str,cut){!1!==cut&&(cut=!0);var fragments=wordwrap(str,width=width||80,break_str=break_str||'<span class="breaking-non-space"> </span>',cut).split(break_str);if(fragments.length<=1)return str;for(var final_data="",n=0,len=fragments.length,data_pos=0;n<len-1;n++)" "===str[data_pos+=fragments[n].length]?(final_data+=fragments[n]+" ",data_pos++):final_data+=fragments[n]+break_str;return final_data+=fragments[fragments.length-1]},escape_utf8:function(data){if(""===data||null==data)return"";data=data.toString();for(var buffer="",i=0;i<data.length;i++){var c=data.charCodeAt(i),bs=[];if(65536<c?(bs[0]=240|(1835008&c)>>>18,bs[1]=128|(258048&c)>>>12,bs[2]=128|(4032&c)>>>6,bs[3]=128|63&c):2048<c?(bs[0]=224|(61440&c)>>>12,bs[1]=128|(4032&c)>>>6,bs[2]=128|63&c):128<c?(bs[0]=192|(1984&c)>>>6,bs[1]=128|63&c):bs[0]=c,1<bs.length)for(var j=0;j<bs.length;j++){var b=bs[j];buffer+="%"+(nibble_to_hex((240&b)>>>4)+nibble_to_hex(15&b))}else encodeURIComponent&&"function"==typeof encodeURIComponent?buffer+=encodeURIComponent(String.fromCharCode(bs[0])):buffer+=String.fromCharCode(bs[0])}return buffer},escape_utf8_bytes:function(data){if(""===data||null==data)return"";data=data.toString();for(var buffer="",i=0;i<data.length;i++){var c=data.charCodeAt(i),bs=[];if(65536<c?(bs[0]=240|(1835008&c)>>>18,bs[1]=128|(258048&c)>>>12,bs[2]=128|(4032&c)>>>6,bs[3]=128|63&c):2048<c?(bs[0]=224|(61440&c)>>>12,bs[1]=128|(4032&c)>>>6,bs[2]=128|63&c):128<c?(bs[0]=192|(1984&c)>>>6,bs[1]=128|63&c):bs[0]=c,1<bs.length)for(var j=0;j<bs.length;j++)buffer+=String.fromCharCode(bs[j]);else buffer+=String.fromCharCode(bs[0])}return buffer},strip_tags:function(str){return str.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},truncate:function(str,len,suffix){return len=len||30,suffix=Y.Lang.isString(suffix)?suffix:"...",str.length>len&&(str=str.slice(0,len-suffix.length)+suffix),str},substitute_equivalent_chars:function(str){var variants,count,i;for(count=(variants=["(?:ae|)","(?:oe|)","(?:ss|)","(?:th|)","[a]","[e3]","[i]","[o]","[u]","[y]","[c]","[d]","[f]","[g]","[h]","[j]","[k]","[l]","[n]","[r]","[s]","[t]","[z]"]).length,i=0;i<count;i++)str=str.replace(new RegExp(variants[i],"gi"),variants[i]);return str},is_email_address:function(str){return/^[a-z_0-9\.\-\+]+@[a-z_0-9\.\-\+]+\.[a-z]/i.test(str)},soundex:function(str){if(!Y.Lang.isString(str)||0===str.length)return"";var letters=str.substring(1,str.length).toLowerCase().split(""),codes={a:"",e:"",i:"",o:"",u:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,d:3,t:3,l:4,m:5,n:5,r:6};return letters=Y.Array.filter(letters,function(item,index,arry){return item!==arry[index+1]}),letters=Y.Array.map(letters,function(item){return codes[item]}),(str.charAt(0).toUpperCase()+letters.join("")+"000").slice(0,4)},isEqualSoundex:function(a,b){var n=3;if(!Y.Lang.isString(a)||!Y.Lang.isString(b)||a.length<4||b.length<4)return!1;if(a===b)return!0;for(;"0"===a.charAt(n)||"0"===b.charAt(n);){if((a=a.slice(0,n))===(b=b.slice(0,n)))return 4-n;n--}return!1}}},"0.0.1",{requires:F.config.modules["string-filters"].requires||[],optional:F.config.modules["string-filters"].optional||[]});!function(){var module_id="refresh-sihp-friendfinder";YUI.add(module_id,function(Y){var rootNode,API=Y.flickrAPI,suggestions={},suggestPool=[],CONTACTS_TO_SHOW=4,fetchAttempts=0,MAX_FETCH_ATTEMPTS=4;function updateSuggestionsPool(data){var len,suggestion,entry;if(0<data.length){for(len=data.length;len--;)suggestion=data[len],suggestions[suggestion.nsid]||(suggestions[suggestion.nsid]={isUsed:!1},entry={name:Y.StringFilters.escape_entities(suggestion.realname||suggestion.username),nsid:suggestion.nsid,buddyIcon:suggestion.iconurls.default,photosUrl:"/photos/"+(suggestion.path_alias||suggestion.nsid),relationshipUrl:"/people/"+(suggestion.path_alias||suggestion.nsid+"/")+"relationship/"},suggestPool.push(entry));suggestPool=function(array){for(var t,i,m=array.length;m;)i=Math.floor(Math.random()*m--),t=array[m],array[m]=array[i],array[i]=t;return array}(suggestPool)}}function findNewSuggestion(){for(var checkSuggestion,i=0,len=suggestPool.length;i<len;){if((checkSuggestion=suggestions[suggestPool[i].nsid])&&!checkSuggestion.isUsed)return checkSuggestion.isUsed=!0,suggestPool.shift();i++}return null}function addSuggestionDom(entry){var suggestList=rootNode.one(".peopleYouMayKnow");entry&&Y.config.flickr.flags.enable_feed_reskin?suggestList.append(Y.Node.create(['<li class="suggestion clearfix" data-user-nsid='+entry.nsid+">",'<a href="'+entry.photosUrl+'" class="buddyicon-link"><img src="'+entry.buddyIcon+'" alt="" width="32" height="32"></a>','<span class="username"><a href="'+entry.photosUrl+'">'+Y.StringFilters.truncate(Y.StringFilters.escape_entities(entry.name),25)+"</a></span>",'<div class="friendfinder-btn-wrapper">','<button data-user-nsid="'+entry.nsid+'" data-track="addContact" class="addNewContact add-as-a-contact-link is-a-contact">&check;</button>',"</div>","</li>"].join(""))):entry&&suggestList.append(Y.Node.create(['<li class="suggestion clearfix" data-user-nsid='+entry.nsid+">",'<a href="'+entry.photosUrl+'" class="buddyicon-link"><img src="'+entry.buddyIcon+'" alt="" width="32" height="32"></a>','<span class="username"><a href="'+entry.photosUrl+'">'+Y.StringFilters.truncate(Y.StringFilters.escape_entities(entry.name),25)+"</a></span>",'<div class="friendfinder-btn-wrapper">','<span class="is-a-contact">'+Y.transjax.get("refresh-sihp","added_contact")+"</span>",'<a href="'+entry.relationshipUrl+'" data-user-nsid="'+entry.nsid+'" data-track="addContact" class="addNewContact add-as-a-contact-link">'+Y.transjax.get("refresh-sihp","add_contact")+"</a>","</div>","</li>"].join("")))}function clickHandler(e){var target=e.target;target.hasClass("add-as-a-contact-link")&&(e.halt(),function(target,nsid){var params,callback,targetParentNode,spinnerNode,successNode;params={user_id:nsid,friend:0,family:0},callback={success:function(response){spinnerNode.hide(),successNode=targetParentNode.one(".is-a-contact"),Y.config.flickr.flags.enable_feed_reskin?successNode.addClass("following"):(successNode.removeClass("is-a-contact"),successNode.addClass("is-a-contact-success")),setTimeout(function(){1<targetParentNode.ancestor("ul").all("li").size()?(targetParentNode.ancestor("li").remove(),addSuggestionDom(findNewSuggestion())):rootNode.remove(),Y.refreshSIHPSidebar.updateConfig()},1e3)},failure:function(response){spinnerNode.hide(),target.show()}},targetParentNode=target.ancestor(),(spinnerNode=targetParentNode.one(".friendfinder-spinner"))?spinnerNode.show():spinnerNode=Y.Node.create('<div class="html5-balls"><span class="blueball"></span><span class="pinkball"></span></div>'),targetParentNode.append(spinnerNode),target.hide(),API.callMethod("flickr.contacts.add",params,callback)}(target,target.getAttribute("data-user-nsid")))}Y.refreshSIHPFriendFinder={init:function(config){rootNode=config.sidebarNode.one("#sihp-friendfinder"),Y.config.flickr.flags.enable_hermes_sihp_fb_friendfinder&&rootNode&&!rootNode.one("#sihp-fb-empty")&&function getSuggestions(isFB){var method,params,callback;params=isFB?(method="flickr.contacts.import.facebook",{user_id:F.config.flickr.user.nsid,limit:20,lite:1,extras:"icon_urls_deep"}):(method="flickr.contacts.getSuggestions",{user_id:F.config.flickr.user.nsid,extras:"icon_urls_deep",count:20}),callback={success:function(response){var data,i;try{data=isFB?response.data.import.members.contact:response.data.suggestions.suggestion}catch(e){data=null}if(data&&updateSuggestionsPool(data),(!data||suggestPool.length<4)&&fetchAttempts<MAX_FETCH_ATTEMPTS)return fetchAttempts++,void getSuggestions();for(rootNode.one("#fb-loading-balls").remove(),i=0;i<CONTACTS_TO_SHOW;i++)addSuggestionDom(findNewSuggestion());Y.refreshSIHPSidebar.updateConfig()},failure:function(response){rootNode.remove(),Y.refreshSIHPSidebar.updateConfig()}},API.callMethod(method,params,callback)}(!0),rootNode&&rootNode.on("click",clickHandler);var sidebarFBButt=Y.one("#sihp-fb-empty .fb-butt")||Y.one("#sihp-fb-empty .facebook-button");sidebarFBButt&&sidebarFBButt.on("click",Y.fbReco.getAccessToken)}}},"0.0.1",{requires:F.config.modules[module_id].requires||[],optional:F.config.modules[module_id].optional||[]})}();